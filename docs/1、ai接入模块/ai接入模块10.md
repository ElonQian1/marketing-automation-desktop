ä¸‹é¢æ˜¯æˆ‘ç»™ä½ å‡†å¤‡å¥½çš„**ä»»åŠ¡æ¸…å•æ–‡æ¡£**ï¼ˆç›´æ¥æ”¾è¿›ä»“åº“å³å¯ï¼‰ã€‚å·²æŒ‰ä½ çš„è§„èŒƒï¼š**ç¬¬ä¸€è¡Œæ˜¯æ–‡ä»¶è·¯å¾„**ã€‚æŠŠå®ƒä¿å­˜ä¸º `docs/lead-hunt/TASKS.md`ï¼Œç„¶åå‘ç»™ä½ çš„ AI ä»£ç†å¼€å·¥å°±è¡Œã€‚

```markdown
# docs/lead-hunt/TASKS.md

## ğŸ¯ ç›®æ ‡
åœ¨ ADB çœŸæœº dump æœªå°±ç»ªçš„æƒ…å†µä¸‹ï¼Œå…ˆé—­ç¯è·‘é€šâ€œç²¾å‡†è·å®¢â€ï¼š**å¯¼å…¥è¯„è®º â†’ AI æ„å›¾è¯†åˆ« â†’ åˆ—è¡¨ç­›é€‰ä¸å»ºè®®å›å¤ â†’ ç”Ÿæˆ & æ‰§è¡Œï¼ˆæ¨¡æ‹Ÿï¼‰å›æ”¾è®¡åˆ’**ã€‚  
ç­‰ ADB/dump æ¨¡å—å®Œæˆåï¼Œä»…æ›¿æ¢ Providerï¼Œæ— éœ€æ”¹ä¸Šå±‚ä¸šåŠ¡ä¸ UIã€‚

> çº¦å®šï¼šä¸æ–°å»ºåˆ†æ”¯ï¼Œç›´æ¥åœ¨ `main` è¿­ä»£å°æ­¥æäº¤ï¼›æäº¤ä¿¡æ¯ç”¨ä¸­æ–‡ï¼›æ‰€æœ‰æ–°æ–‡ä»¶ä»£ç å—é¦–è¡Œå†™â€œæ–‡ä»¶ç›¸å¯¹è·¯å¾„â€ã€‚

---

## âœ… äº¤ä»˜è·¯çº¿ï¼ˆ3 ä¸ªè¿ç»­æäº¤ / æˆ– 3 ä¸ª PRï¼‰

### PR-1ï¼šæ•°æ®ä¸åè®®åˆå§‹åŒ–ï¼ˆå¯¼å…¥ â†’ åˆ—è¡¨ â†’ ç”Ÿæˆå›æ”¾è®¡åˆ’åˆ°æ–‡ä»¶ï¼‰
**æ–°å¢/ä¿®æ”¹ï¼ˆåç«¯ / Rustï¼‰**
- `src-tauri/src/services/lead_hunt.rs`  
  - `RawComment { id, platform, videoUrl?, author, content, ts? }`  
  - `ReplayPlan { id, platform, videoUrl, author, comment, suggested_reply? }`  
  - `save_comments(Vec<RawComment>)` / `list_comments()` / `write_replay_plan(ReplayPlan)`
- `src-tauri/src/commands_lead_hunt.rs`  
  - `lh_save_comments(items)` / `lh_list_comments()` / `lh_import_comments()` / `lh_create_replay_plan(plan)`
- `src-tauri/src/mock/social_comments.json`ï¼ˆ3~5 æ¡ç¤ºä¾‹æ•°æ®ï¼‰
- `src-tauri/src/main.rs` æ³¨å†Œä¸Šè¿°å‘½ä»¤

**æ–°å¢/ä¿®æ”¹ï¼ˆå‰ç«¯ / Reactï¼‰**
- `src/pages/LeadHunt.tsx`  
  - é¡¶éƒ¨æŒ‰é’®ï¼šå¯¼å…¥ï¼ˆ`lh_import_comments`ï¼‰ã€åˆ·æ–°ï¼ˆ`lh_list_comments`ï¼‰  
  - è¡¨æ ¼ï¼šplatform/author/contentï¼›è¡Œæ“ä½œï¼š**ç”Ÿæˆå›æ”¾è®¡åˆ’**ï¼ˆ`lh_create_replay_plan`ï¼‰

**å®Œæˆæ ‡å‡†ï¼ˆDoDï¼‰**
- è¿è¡Œ `pnpm tauri dev`ï¼Œè¿›å…¥â€œç²¾å‡†è·å®¢â€é¡µ  
- èƒ½å¯¼å…¥ mock è¯„è®ºå¹¶å±•ç¤º  
- ç‚¹å‡»ä»»æ„è¡Œâ€œç”Ÿæˆå›æ”¾è®¡åˆ’â€ï¼Œå†™å…¥ `debug/outbox/replay_plans.json`

**å»ºè®®æäº¤ä¿¡æ¯**
```

feat(lead-hunt): åˆå§‹åŒ–ç²¾å‡†è·å®¢é—­ç¯ï¼ˆå¯¼å…¥/åˆ—è¡¨/ç”Ÿæˆå›æ”¾è®¡åˆ’-æ¨¡æ‹Ÿï¼‰

```

---

### PR-2ï¼šAI æ„å›¾è¯†åˆ«ï¼ˆå‡½æ•°è°ƒç”¨å·¥å…·ï¼ŒOpenAI/æ··å…ƒå‡å¯ï¼‰
**æ–°å¢/ä¿®æ”¹ï¼ˆå‰ç«¯ï¼‰**
- `src/ai/schemas/leadIntent.schema.ts`ï¼š`return_lead_analysis` å‡½æ•°å·¥å…·ï¼ˆintent/ä¿¡å¿ƒ/å®ä½“/å»ºè®®å›å¤ï¼‰
- `src/features/leadHunt/analyzeLead.ts`ï¼š`analyzeOne` / `analyzeBatch`ï¼ˆé»˜è®¤å¹¶å‘ 4ï¼ŒæŒ‡æ•°é€€é¿é‡è¯•ï¼‰
- `src/pages/LeadHunt.tsx`  
  - æ–°å¢â€œ**AI æ‰¹é‡åˆ†æ**â€æŒ‰é’®ï¼›å±•ç¤º `intent(%) / reply_suggestion`ï¼›æ”¯æŒæŒ‰æ„å›¾è¿‡æ»¤

> å¯é€‰å¼ºåŒ–ï¼šæŠŠæ‰¹å¤„ç†ä¸‹æ²‰åˆ°åç«¯å‘½ä»¤ `lh_analyze_comments`ï¼Œç»Ÿä¸€é™æµä¸å…¥åº“ï¼ˆå½“å‰å…ˆå‰ç«¯ç›´è°ƒå¯è¡Œï¼Œåç»­å†æ²‰ä¸‹å»ï¼‰ã€‚

**å®Œæˆæ ‡å‡†ï¼ˆDoDï¼‰**
- åœ¨â€œAI è®¾ç½®â€é¡µå¡«å¥½ provider+æ¨¡å‹ï¼ˆå¦‚ `gpt-4o-mini` / `hunyuan-turbos-latest`ï¼‰  
- ç‚¹å‡»â€œAI æ‰¹é‡åˆ†æâ€ï¼Œå‡ºç°æ„å›¾/ç½®ä¿¡åº¦/å»ºè®®å›å¤ï¼Œå¯æŒ‰æ„å›¾ç­›é€‰  
- ç”Ÿæˆå›æ”¾è®¡åˆ’æ—¶ï¼ŒæŠŠ `reply_suggestion` ä¸€èµ·å†™å…¥ `suggested_reply`

**å»ºè®®æäº¤ä¿¡æ¯**
```

feat(lead-hunt): æ¥å…¥AIæ„å›¾è¯†åˆ«ï¼ˆå‡½æ•°è°ƒç”¨ï¼‰ï¼Œæ”¯æŒæ‰¹é‡åˆ†æä¸å»ºè®®å›å¤å±•ç¤º

````

---

### PR-3ï¼šå›æ”¾æ¨¡æ‹Ÿæ‰§è¡Œå™¨ï¼ˆOrchestrator + MockDumpProviderï¼‰
**æ–°å¢/ä¿®æ”¹ï¼ˆåç«¯ / Rustï¼‰**
- `src-tauri/src/device/provider.rs`  
  ```rust
  #[async_trait] pub trait DumpProvider {
    async fn open_app(&self, platform: &str) -> anyhow::Result<()>;
    async fn open_video(&self, url: &str) -> anyhow::Result<()>;
    async fn dump_xml(&self) -> anyhow::Result<String>;
    async fn reply(&self, author: &str, text: &str) -> anyhow::Result<()>;
  }
````

* `src-tauri/src/device/mock.rs`ï¼š`MockDumpProvider`ï¼ˆè¿”å›å›ºå®š XMLï¼Œreply è®°æ—¥å¿—ï¼‰
* `src-tauri/src/device/orchestrator.rs`ï¼š`ReplayOrchestrator<P: DumpProvider>::run(&ReplayPlan)`
* `src-tauri/src/commands_lead_hunt.rs` æ–°å¢

  * `lh_run_replay_plan(plan_id)`ï¼šè¯»å– `replay_plans.json`ï¼Œç”¨ `ReplayOrchestrator::<MockDumpProvider>` æ‰§è¡Œï¼›è¿‡ç¨‹ä¸­é€šè¿‡ `app.emit_all("orchestrator://status", "...")` æ¨é€æ­¥éª¤äº‹ä»¶

**æ–°å¢/ä¿®æ”¹ï¼ˆå‰ç«¯ / Reactï¼‰**

* `src/pages/LeadHunt.tsx`

  * è¡Œæ“ä½œæ–°å¢â€œ**æ‰§è¡Œæ¨¡æ‹Ÿ**â€ï¼ˆ`lh_run_replay_plan`ï¼‰
  * è®¢é˜… `orchestrator://status`ï¼ˆå¯å…ˆå¼¹çª—/consoleï¼Œåç»­åšæ¼‚äº®çš„æ—¥å¿—é¢æ¿ï¼‰

**å®Œæˆæ ‡å‡†ï¼ˆDoDï¼‰**

* â€œæ‰§è¡Œæ¨¡æ‹Ÿâ€èƒ½çœ‹åˆ°ï¼šopen_app â†’ open_video â†’ dump â†’ reply çš„é¡ºåºæ—¥å¿—
* ä¸ä¾èµ– ADBï¼›ADB dump å°±ç»ªåä»…éœ€æ–°å¢ `AdbDumpProvider` å¹¶æ›¿æ¢ç»‘å®š

**å»ºè®®æäº¤ä¿¡æ¯**

```
feat(lead-hunt): æ–°å¢å›æ”¾ Orchestrator ä¸ MockDumpProviderï¼Œæ”¯æŒæ‰§è¡Œæ¨¡æ‹Ÿä¸äº‹ä»¶æ—¥å¿—
```

---

## ğŸ”§ è¿è¡Œä¸éªŒè¯ï¼ˆAI ä»£ç†æ‰§è¡Œæç¤ºï¼‰

1. **å®‰è£…ä¾èµ–**

   * å‰ç«¯ï¼š`pnpm i`ï¼ˆæˆ– `npm i` / `yarn`ï¼‰
   * Rustï¼šç¡®ä¿ stable å·¥å…·é“¾ & OS Keyring å¯ç”¨

2. **å¯åŠ¨**

   * `pnpm tauri dev`

3. **éªŒè¯æµç¨‹**

   * æ‰“å¼€â€œAI è®¾ç½®â€é¡µï¼ˆé€‰æ‹© OpenAI/æ··å…ƒã€è®¾ç½®æ¨¡å‹ï¼‰
   * è¿›å…¥â€œç²¾å‡†è·å®¢â€é¡µ
   * PR-1ï¼šå¯¼å…¥ mock â†’ åˆ—è¡¨ â†’ ç”Ÿæˆ `debug/outbox/replay_plans.json`
   * PR-2ï¼šAI æ‰¹é‡åˆ†æ â†’ è¿‡æ»¤ä¸å»ºè®®å›å¤ â†’ ç”Ÿæˆè®¡åˆ’ï¼ˆå« suggested_replyï¼‰
   * PR-3ï¼šæ‰§è¡Œæ¨¡æ‹Ÿ â†’ è§‚å¯Ÿ `orchestrator://status` æ—¥å¿—

---

## ğŸ“ å¥‘çº¦ä¸ç±»å‹é€Ÿè®°

```ts
// å‰ç«¯ï¼šç”Ÿæˆå›æ”¾è®¡åˆ’
invoke("lh_create_replay_plan", {
  plan: {
    id, platform, videoUrl, author, comment, suggested_reply?: string
  }
})

// æ‰§è¡Œæ¨¡æ‹Ÿ
invoke("lh_run_replay_plan", { planId: string })
```

å‡½æ•°è°ƒç”¨å·¥å…·ï¼ˆä¸¤ç«¯é€šç”¨ï¼‰ï¼š

```ts
// return_lead_analysis
{
  intent: "è¯¢ä»·" | "è¯¢åœ°å€" | "å”®å" | "å’¨è¯¢" | "æ— æ•ˆ",
  confidence: number, // 0..1
  entities: { product?, quantity?, location?, phone?, priceTarget? },
  reply_suggestion: string,
  tags?: string[]
}
```

---

## ğŸ§© åç»­æ‹“å±•ï¼ˆä¸åœ¨æœ¬è½®äº¤ä»˜ï¼Œä½†ä¿ç•™æ¥å£ä½ï¼‰

* **AdbDumpProvider**ï¼šæ›¿æ¢ `MockDumpProvider`ï¼Œæ¥å…¥çœŸæœº ADB / UiAutomator dumpï¼›Orchestrator æ— éœ€å˜æ›´
* **å…¥åº“ä¸è§‚æµ‹**ï¼šå°† `lead_analyses` ä¸ `replay_plans` å­˜ SQLiteï¼ˆçŠ¶æ€æœºï¼špending/running/done/failedï¼‰
* **å®šä½ç­–ç•¥**ï¼šåœ¨ `dump_xml()` çš„ XML ä¸­å®ç° ä½œè€…/è¯„è®º æ–‡æœ¬ç›¸ä¼¼åº¦ + é‚»æ¥å®šä½ï¼›åˆ†é¡µç­–ç•¥
* **é€Ÿç‡/é‡è¯•é¢æ¿**ï¼šåœ¨è®¾ç½®é¡µæš´éœ²å¹¶å‘/é‡è¯•å‚æ•°ï¼›è¿›åº¦æ¡ä¸å‰©ä½™æ—¶é—´ä¼°è®¡
* **éšç§åˆè§„**ï¼šå¯¹æ‰‹æœºå·/åœ°å€ç­‰åšè„±æ•ï¼›è¯¦æƒ…é¡µç‚¹å‡»æ˜¾ç¤ºåŸæ–‡

---

```

éœ€è¦æˆ‘æŠŠè¿™ä¸ª `TASKS.md` ç›´æ¥å†æ‹†åˆ†æˆ 3 ä»½ PR è¯´æ˜ï¼ˆå„è‡ª README çº§åˆ«ï¼‰ä¹Ÿå¯ä»¥ï¼›æˆ–è€…è¦ä¸€ä¸ª**æœ€å°æ¼”ç¤ºé¡µ**æŠŠ `orchestrator://status` æ—¥å¿—æ¸²æŸ“å¾—æ›´å¥½çœ‹ï¼Œä¹Ÿå¯ä»¥é©¬ä¸Šè¡¥ä¸Šã€‚
::contentReference[oaicite:0]{index=0}
```
