# 四件套示例（AI看了就会照做）

## 1. 命名前缀（文件名 + 类型名）

### 文件名前缀规则
```typescript
// ❌ 原始命名（容易冲突）
src/modules/prospecting/strategies/weighted.ts
src/modules/script/strategies/weighted.ts  // 重名冲突！

// ✅ 前缀化命名（避免冲突）  
src/modules/prospecting/strategies/prospecting-strategy-weighted.ts
src/modules/script/strategies/script-strategy-weighted.ts
```

### 类型名前缀规则
```typescript
// ❌ 原始类型名
export class WeightedStrategy { }
export interface StrategyConfig { }

// ✅ 前缀化类型名
export class ProspectingStrategyWeighted { }
export interface ProspectingStrategyConfig { }
```

## 2. 门牌导出（index.ts 统一出口）

### 模块门牌结构
```typescript
// src/modules/prospecting/index.ts
// 🎯 只导出对外契约，不泄露内部实现

// Domain 公开契约
export type { 
  ProspectingTarget,
  ProspectingStrategy,
  ProspectingConfig 
} from './domain/public';

// Application 用例
export { 
  useProspectingAcquisition,
  ProspectingApplicationService 
} from './application';

// 公开 Hooks
export { 
  useProspectingStore,
  useProspectingValidation 
} from './hooks';

// ❌ 不要导出内部实现
// export { InternalProspectingCache } from './infrastructure/cache';
```

### domain/public 契约导出
```typescript
// src/modules/prospecting/domain/public/index.ts
// 🎯 仅导出对外部模块开放的契约

export type { ProspectingTarget } from '../entities/ProspectingTarget';
export type { ProspectingStrategy } from '../strategies/ProspectingStrategy';
export type { ProspectingConfig } from '../config/ProspectingConfig';

// ❌ 不导出内部实现细节
// export { ProspectingInternalCache } from '../infrastructure/cache';
```

## 3. 别名导入（tsconfig.json paths）

### 路径别名配置
```json
// tsconfig.json
{
  "compilerOptions": {
    "paths": {
      "@prospecting/*": ["src/modules/precise-acquisition/*"],
      "@script/*": ["src/modules/smart-script-management/*"],
      "@contact/*": ["src/modules/contact-import/*"],
      "@adb/*": ["src/modules/adb/*"],
      "@shared/*": ["src/shared/*"]
    }
  }
}
```

### 别名导入使用
```typescript
// ✅ 推荐：使用别名 + 门牌导入
import { ProspectingTarget, useProspectingAcquisition } from '@prospecting';
import { ContactImporter } from '@contact';
import { AdbDeviceService } from '@adb';

// ⚠️ 临时允许：相对路径（后续整理）
import { helper } from '../utils/helper';

// ❌ 禁止：跨模块直接访问内部实现
import { InternalCache } from '@prospecting/infrastructure/cache';
```

## 4. 文件头（三行注释标准）

### 标准文件头格式
```typescript
// src/modules/prospecting/domain/strategies/prospecting-strategy-weighted.ts
// module: prospecting | layer: domain | role: strategy
// summary: 加权评分的精准获客策略实现

/**
 * 加权精准获客策略
 * 基于多维度权重计算目标用户匹配度
 */
export class ProspectingStrategyWeighted { }
```

### 各层文件头示例
```typescript
// Domain层
// src/modules/prospecting/domain/entities/ProspectingTarget.ts  
// module: prospecting | layer: domain | role: entity
// summary: 精准获客目标用户实体

// Application层  
// src/modules/prospecting/application/usecases/ProspectingUseCase.ts
// module: prospecting | layer: application | role: usecase  
// summary: 精准获客核心用例

// Infrastructure层
// src/modules/prospecting/infrastructure/repositories/ProspectingRepository.ts
// module: prospecting | layer: infrastructure | role: repository
// summary: 精准获客数据仓储实现

// UI层
// src/modules/prospecting/ui/components/ProspectingPanel.tsx
// module: prospecting | layer: ui | role: component
// summary: 精准获客操作面板组件
```

### 文件头字段说明
- **路径**：必须与实际文件路径完全一致
- **module**：模块名（prospecting/script/contact/adb/shared）
- **layer**：架构层次（domain/application/infrastructure/ui）  
- **role**：文件角色（entity/service/usecase/component/repository等）
- **summary**：一句话描述文件作用

## 完整示例（四件套组合）

```typescript
// src/modules/prospecting/domain/strategies/prospecting-strategy-weighted.ts
// module: prospecting | layer: domain | role: strategy
// summary: 加权评分的精准获客策略实现

import type { ProspectingTarget, ProspectingConfig } from '@prospecting';
import { BaseStrategy } from '@shared/strategies';

/**
 * 加权精准获客策略
 * 根据多维度权重计算目标用户匹配度
 */
export class ProspectingStrategyWeighted extends BaseStrategy {
  constructor(private config: ProspectingConfig) {
    super();
  }

  async evaluate(target: ProspectingTarget): Promise<number> {
    // 实现加权评分逻辑
    return 0.85;
  }
}
```

---
**记住四件套的核心目的**：避免命名冲突、明确模块边界、简化导入路径、保持代码可追溯性。