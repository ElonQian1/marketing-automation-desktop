# 未完成功能快速参考

## 🚨 关键缺失功能（按优先级）

### 🔴 P0 - 致命级（无法使用核心功能）

#### 1. 设备导入时的文件选择功能 - **完全缺失**
**需求**："导入到设备时，抓取已经导入的文件名，勾选一个或多个文件夹来进行导入"

**缺失内容**：
- ❌ 后端API：`get_imported_file_list` - 获取所有已导入的文件列表
- ❌ 后端API：`get_numbers_by_files` - 根据文件名获取号码
- ❌ 前端组件：`FileSelector` - 文件选择器
- ❌ 前端对话框：`DeviceImportFileSelector` - 设备导入配置界面

**工作量**：2-3天

---

#### 2. 导入结果展示 - **完全缺失**
**需求**："导入任务完成后，返回导入结果：导入成功数量，未导入成功数量。用户点击确认之后，自动返回主界面"

**缺失内容**：
- ❌ 前端组件：`ImportResultModal` - 导入结果模态框
- ❌ 返回主界面逻辑
- ❌ 成功/失败统计展示

**工作量**：0.5-1天

---

#### 3. 导入进度显示 - **完全缺失**
**需求**："导入任务遗交之后，要显示导入状态：已导入数量，未导入数量"

**缺失内容**：
- ❌ 实时进度条
- ❌ 已导入/未导入数量统计
- ❌ 导入状态反馈

**工作量**：0.5-1天

---

### 🟠 P1 - 重要级（影响用户体验）

#### 4. 文件名去重检查 - **未实现**
**需求**："文件名重复的则不导入"

**当前问题**：
- 只检查号码重复，不检查文件是否已导入
- 可能重复导入同一文件

**需要**：
- 后端API：`check_file_imported`
- 导入前检查逻辑

**工作量**：0.5天

---

#### 5. 批量文件操作后端 - **未实现**
**需求**："批量下载文件夹、批量删除文件夹"

**当前问题**：
- UI按钮已有，但点击无效果

**需要**：
- 后端API：`delete_numbers_by_files`
- 后端API：`export_numbers_by_files`

**工作量**：1天

---

### 🟡 P2 - 次要级（锦上添花）

#### 6. 批量展开选中文件夹 - **未实现**
当前只能"展开全部"或"折叠全部"，无法只展开选中的文件夹。

**工作量**：0.2天

---

## 📊 完成度统计

| 模块 | 完成度 | 说明 |
|------|--------|------|
| 导入文件到号码池 | 85% | 缺文件去重 |
| 号码池展示 | 90% | 缺批量操作后端 |
| 设备与VCF | 10% | 核心流程未实现 ⚠️ |

**总体完成度：约 60%**

---

## 🎯 最小可用版本 (MVP) 需要完成

1. ✅ 模块名称更改
2. ✅ 号码池树形展示
3. ✅ 导入状态显示
4. ✅ 从已保存目录导入按钮
5. ❌ **文件选择器** (P0)
6. ❌ **导入结果展示** (P0)
7. ❌ **导入进度显示** (P0)

**MVP完成度：4/7 (57%)**

---

## 🚀 快速实施路径

### 第1天：核心API
```
上午：实现 get_imported_file_list
下午：实现 get_numbers_by_files
```

### 第2天：文件选择
```
上午：FileSelector 组件
下午：DeviceImportFileSelector 对话框
```

### 第3天：结果展示
```
上午：ImportResultModal + 进度显示
下午：集成测试 + 流程调通
```

### 第4天：完善（可选）
```
上午：文件去重
下午：批量操作后端
```

---

## 📞 需要明确的问题

### 1. 设备导入的触发入口在哪？
当前代码中有多个地方涉及设备导入，需要确认：
- 在哪个页面添加"按文件选择"功能？
- 是否替换现有的"按ID范围"导入？
- 还是作为新的导入方式并存？

### 2. 导入进度的数据来源？
- 后端是否支持导入进度回调？
- 需要websocket还是轮询？
- 还是只在完成后显示结果？

### 3. "联系人导入主界面"指的是？
- ContactImportWizard？
- ContactImportWorkbench？
- 还是其他页面？

---

**更新时间**：2025-10-22  
**下次评审**：实施第一阶段后
