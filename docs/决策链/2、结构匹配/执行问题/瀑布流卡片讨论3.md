但是我 “结构匹配” 模态框 本身就有一个功能， 就是各个字段微调的，
应对 “关注”按钮 这种文本， 开启强行等值匹配的。

你上面修改是否会导致我  “结构匹配” 模态框  这个功能丢失呢？


不会丢。核心做法是**把你现有的“字段微调”面板保留**，但加一个“匹配对象/模式”切换，让它**在不同模式下生效范围不同**：

## 怎么改不丢功能

* **模式切换（必加）**

  * **Card（卡片集合）**：用于“找瀑布流卡片”。默认**忽略文本等值**，只看结构/几何/重复性；

    * 字段微调面板仍保留，但**默认禁用正向等值**（可选开启“负词排除”作为安全阀）。
  * **Button（按钮定位）**：用于“关注按钮”。此时**字段微调全部可用**（正词=“关注/Follow…”，负词=“已关注/Following…”），并启用“点击后状态验证”。
* **UI 细节**

  * 在“结构匹配”模态框顶部加分段控件：`匹配对象：卡片｜按钮`。
  * 当选 **卡片** 时：

    * 文本/ID/desc 等值输入框显示但置灰（tooltip：*卡片模式默认忽略文本；如需，可开启“负词排除”*）。
    * 允许勾选：`[ ] 启用负词排除`（仅排除“已关注/Following/发消息/邀请”等，避免误把广告/工具栏当卡片）。
  * 当选 **按钮** 时：

    * 文本/ID/desc 的**等值/正则/大小写**等微调全部可用；
    * 提示“点击后验证”选项（勾选即自动二次 dump 做状态校验）。
* **后端契约**

  * StrategyPlan / SelfAnchorPlan 新增 `mode: "card" | "button"`；
  * `mode=card` 时，忽略正向文本等值，仅应用**结构/几何/重复性**与（可选的）**负词排除**；
  * `mode=button` 时，按你现在的“字段微调”原样执行，包括强行等值。

## 兼容与智能默认

* **向后兼容**：老数据没有 `mode`，若存在“文本等值/正则”则**推断为 button**，否则**推断为 card**。
* **智能默认**：用户点选的节点若是“小尺寸、右 1/3、clickable=true”，自动预选 **Button**；若是“含大图+底栏结构、重复兄弟 ≥2”，预选 **Card**。

## 小结

* 你的“字段微调（强行等值匹配）”**不删、不丢**，只是**只在 Button 模式完全生效**；
* Card 模式仍可选配“负词排除”，但**默认不做正向文本等值**，保证瀑布流卡片的泛化与稳定；
* 这样一拆：**找卡片集合**更稳、**找关注按钮**更准，两个需求互不干扰。
