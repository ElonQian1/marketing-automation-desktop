# Round 2｜候选池与数据模型（讲义总览）

> 目标（30–45 分钟）：把“候选池如何建、数据如何落、字段如何管”讲清楚，并给出**可立即执行**的模板与练习。

---

## 1. 本轮范围
- 覆盖对象：**候选池（账号/视频）**、**评论**、**任务**、**模板**、**审计/日报**相关的数据结构与操作规范。
- 不覆盖：接口接入细节（Round 7）、风控实现（Round 6）。

---

## 2. 关键结论
1) 候选池是**合规三步法的起点**：没有进入候选池的对象，不做评论拉取。
2) 所有来源（抖音/巨量/白名单）入库前**统一抽象为相同字段**，便于后续筛选与查重。
3) **标签（行业/地域/来源）是检索与分配的主索引**；要求固定枚举与命名规范。
4) 数据层只做“**能被证明**合规”的内容；无法证明→不落库。

---

## 3. 数据对象清单
- **watch_targets（候选池）**：账号/视频的基础信息、来源标签、行业/地域标签、最后抓取时间。
- **comments（评论）**：评论文本、作者 ID、时间、点赞数、归属视频、来源渠道。
- **tasks（任务）**：回复/关注任务、分配账号、状态机、执行结果码、查重键。
- **reply_templates（话术模板）**：模板文本、变量、类别、启用状态。
- **audit_logs（审计）**：谁/何时/哪个账号/命中规则/执行器/结果。
- **daily_reports（日报）**：关注清单与回复清单的导出文件索引。

> 详细字段请见：
> - 《Round 2｜候选池字段清单（v1）》
> - 《Round 2｜导入规范与校验规则（v1）》
> - 《Round 2｜标签体系与维护（v1）》

---

## 4. 候选池的进入与更新
- **进入方式**：人工添加 / CSV 导入 / 合规榜单 / 广告计划回流。
- **更新频率**：建议**每日上午 1 次**批量更新 + 临时补录（运营可随时添加）。
- **去重策略**：按 `platform + platform_id_or_url` 唯一；重复导入视为**更新**而非新增。

---

## 5. 任务生成与签收（与数据的关系）
- 从 `comments` 通过**筛选规则**（关键词/时间/地域/互动阈值）生成 `tasks`。
- 任务执行后，`tasks.status` → DONE/FAILED，并写入 `audit_logs`；若有回复内容，落到日报。

---

## 6. 本轮输出物（可交付）
- ✅ 字段清单（可打印）：《候选池字段清单（v1）》
- ✅ 导入规范与校验规则（v1）
- ✅ 标签体系与维护（v1）
- ✅ 演练脚本：《演练脚本（候选池与数据模型）》

---

## 7. 验收（DoD）
- 能以模板 CSV 新增 ≥10 个候选对象并通过校验；
- 能把**不同来源**的数据映射为**统一字段**；
- 能按标签筛选、导出**两张日报**的字段；
- 审计日志字段齐全，可追溯一条任务的全链路。

