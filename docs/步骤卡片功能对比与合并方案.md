# æ­¥éª¤å¡ç‰‡åŠŸèƒ½å¯¹æ¯”ä¸åˆå¹¶æ–¹æ¡ˆ

## ğŸ“‹ å½“å‰çŠ¶å†µåˆ†æ

### ç»„ä»¶æ¸…å•

| ç»„ä»¶ | è¡Œæ•° | å…³é”®å‘ç° | çœŸå®çŠ¶æ€ |
|------|------|----------|----------|
| **DraggableStepCard.tsx** | 1400 | âŒ **æ— å†…ç½®æ‰§è¡Œé€»è¾‘**<br>ä¾èµ–å¤–éƒ¨ `StepTestButton` prop | âœ… ç”Ÿäº§ä½¿ç”¨ |
| **stepCards/NewStepCard.tsx** | 288 | âœ… **ä½¿ç”¨ useStepCardStateMachine**<br>âœ… æ”¯æŒ matchOnly æ¨¡å¼<br>âœ… å®Œæ•´çŠ¶æ€æœº | âš ï¸ æœªè¢«å¼•ç”¨ |
| **stepCards/ActionBar.tsx** | 100 | âœ… **Split Button è®¾è®¡**<br>âœ… matchOnly æŒ‰é’®<br>âœ… ExecutionMode æ”¯æŒ | âš ï¸ ä»…è¢« NewStepCard ä½¿ç”¨ |
| **stepCards/ActionParams.tsx** | 280 | âš ï¸ åŠŸèƒ½å­é›†ï¼Œ280è¡Œ | âš ï¸ ä»…è¢« NewStepCard ä½¿ç”¨ |
| **action-system/ActionParamsPanel.tsx** | 836 | âœ… åŠŸèƒ½å®Œæ•´ï¼Œ836è¡Œ<br>âœ… å¾ªç¯ä¾èµ–é˜²æŠ¤<br>âœ… CoordinateSelector | âœ… è¢« DraggableStepCard ä½¿ç”¨ |
| **hooks/useStepCardStateMachine.ts** | 305 | âœ… **StepExecutionGateway**<br>âœ… **V3 æ™ºèƒ½ç­–ç•¥**<br>âœ… **matchOnly æ”¯æŒ** | âš ï¸ ä»…è¢« NewStepCard ä½¿ç”¨ |
| **components/StepTestButton.tsx** | ~300 | âœ… æ‰§è¡ŒæŒ‰é’®ç»„ä»¶<br>æ³¨å…¥åˆ° DraggableStepCard | âœ… ç”Ÿäº§ä½¿ç”¨ |

---

## ğŸ” æ ¸å¿ƒé—®é¢˜è¯Šæ–­

### é—®é¢˜ 1: DraggableStepCard çš„æ‰§è¡Œæ–¹å¼

**å½“å‰æ¶æ„**ï¼š
```tsx
// DraggableStepCard.tsx ä¾èµ–å¤–éƒ¨æ³¨å…¥
interface DraggableStepCardProps {
  StepTestButton?: React.ComponentType<{  // â† Prop Drilling
    step: SmartScriptStep;
    deviceId?: string;
  }>;
}

// ä½¿ç”¨æ–¹å¼
<DraggableStepCard
  step={step}
  StepTestButton={StepTestButton}  // â† å¤–éƒ¨ä¼ å…¥
/>
```

**StepTestButton.tsx çš„æ‰§è¡Œé€»è¾‘**ï¼š
```tsx
// éœ€è¦éªŒè¯ï¼šStepTestButton æ˜¯å¦ä½¿ç”¨ useStepCardStateMachineï¼Ÿ
// éœ€è¦éªŒè¯ï¼šæ˜¯å¦æ”¯æŒ matchOnly æ¨¡å¼ï¼Ÿ
```

### é—®é¢˜ 2: NewStepCard çš„ä»·å€¼

**NewStepCard å†…ç½®æ‰§è¡Œ**ï¼š
```tsx
import { useStepCardStateMachine } from '../../hooks/useStepCardStateMachine';
import { ActionBar } from './ActionBar';

const NewStepCard = ({ step }) => {
  const { runStep, status } = useStepCardStateMachine({
    stepId: step.id,
    initialAction: step.currentAction,
    stepParameters: step.parameters  // â† å®Œæ•´å‚æ•°ä¼ é€’
  });

  const handleRun = (mode: ExecutionMode) => {
    runStep(mode, stepCard);  // â† å†…ç½®æ‰§è¡Œ
  };

  return (
    <Card>
      <ActionBar 
        onRun={handleRun}  // â† matchAndExecute / matchOnly
      />
    </Card>
  );
};
```

---

## ğŸ“Š åŠŸèƒ½ç»´åº¦è¯¦ç»†å¯¹æ¯”

### 1. æ‰§è¡Œèƒ½åŠ›å¯¹æ¯”

| åŠŸèƒ½ | DraggableStepCard | NewStepCard | ä¼˜èƒœè€… | å¤‡æ³¨ |
|------|------------------|-------------|--------|------|
| **æ‰§è¡Œå¼•æ“** | å¤–éƒ¨ StepTestButton | useStepCardStateMachine | âš ï¸ å¾…éªŒè¯ | éœ€æ£€æŸ¥ StepTestButton å®ç° |
| **StepExecutionGateway** | â“ å–å†³äº StepTestButton | âœ… å†…ç½® | NewStepCard | Gateway æ˜¯æ­£ç¡®æ¶æ„ |
| **V3 æ™ºèƒ½ç­–ç•¥** | â“ å–å†³äº StepTestButton | âœ… æ”¯æŒ | NewStepCard | é¿å…åæ ‡å…œåº• |
| **matchOnly æ¨¡å¼** | âŒ æ— æ­¤åŠŸèƒ½ | âœ… ActionBar æ”¯æŒ | NewStepCard | ä»…åŒ¹é…ä¸æ‰§è¡Œ |
| **çŠ¶æ€æœº** | âŒ æ— å†…ç½® | âœ… å®Œæ•´çŠ¶æ€æµè½¬ | NewStepCard | idleâ†’matchingâ†’readyâ†’executingâ†’success |
| **xmlSnapshot ä¼ é€’** | â“ å–å†³äº StepTestButton | âœ… å®Œæ•´ä¼ é€’ | NewStepCard | ä¿®å¤"æ·»åŠ æœ‹å‹"æŒ‰é’®é—®é¢˜ |

### 2. UI äº¤äº’å¯¹æ¯”

| åŠŸèƒ½ | DraggableStepCard | NewStepCard | ä¼˜èƒœè€… | å¤‡æ³¨ |
|------|------------------|-------------|--------|------|
| **æ‹–æ‹½æ’åº** | âœ… dnd-kit | âŒ æ—  | DraggableStepCard | å¿…éœ€åŠŸèƒ½ |
| **Split Button** | âŒ æ—  | âœ… ActionBar | NewStepCard | æ‰§è¡Œ+åˆ‡æ¢åˆä½“ |
| **å‚æ•°é¢æ¿** | âœ… ActionParamsPanel (836è¡Œ) | âš ï¸ ActionParams (280è¡Œ) | DraggableStepCard | åŠŸèƒ½æ›´å®Œæ•´ |
| **ç­–ç•¥é€‰æ‹©å™¨** | âœ… CompactStrategyMenu | âŒ æ—  | DraggableStepCard | æ™ºèƒ½åŒ¹é… |
| **å¾ªç¯æ”¯æŒ** | âœ… å®Œæ•´ | âŒ æ—  | DraggableStepCard | ç”Ÿäº§å¿…éœ€ |
| **å¤±è´¥ç­–ç•¥** | âœ… ExecutionFailureStrategy | âŒ æ—  | DraggableStepCard | æ‰§è¡Œæµæ§åˆ¶ |
| **æ–‡æœ¬åŒ¹é…æ§åˆ¶** | âœ… TextMatchingInlineControl | âŒ æ—  | DraggableStepCard | ç»†ç²’åº¦æ§åˆ¶ |

### 3. ä»£ç è´¨é‡å¯¹æ¯”

| æŒ‡æ ‡ | DraggableStepCard | NewStepCard | è¯„ä»· |
|------|------------------|-------------|------|
| **ä»£ç å¤æ‚åº¦** | 1400è¡Œï¼Œå¤æ‚åº¦é«˜ | 288è¡Œï¼Œæ¸…æ™°ç®€æ´ | NewStepCard æ›´æ˜“ç»´æŠ¤ |
| **èŒè´£å•ä¸€æ€§** | âŒ åŠŸèƒ½è¿‡å¤š | âœ… èšç„¦æ ¸å¿ƒ | NewStepCard æ›´ç¬¦åˆå•ä¸€èŒè´£ |
| **ä¾èµ–æ³¨å…¥** | âš ï¸ Prop Drilling | âœ… è‡ªåŒ…å« | NewStepCard æ¶æ„æ›´å¥½ |
| **å¯æµ‹è¯•æ€§** | âš ï¸ ä¾èµ–å¤–éƒ¨ç»„ä»¶ | âœ… ç‹¬ç«‹å¯æµ‹ | NewStepCard æ›´æ˜“æµ‹è¯• |

---

## ğŸ¯ å°æ­¥å¿«è·‘åˆå¹¶æ–¹æ¡ˆ

### Phase 1: éªŒè¯ StepTestButton å®ç°

**ä»»åŠ¡**ï¼š
1. é˜…è¯» `StepTestButton.tsx` å®Œæ•´ä»£ç 
2. ç¡®è®¤æ˜¯å¦ä½¿ç”¨ `useStepCardStateMachine`
3. ç¡®è®¤æ˜¯å¦æ”¯æŒ `matchOnly` æ¨¡å¼
4. ç¡®è®¤æ˜¯å¦ä½¿ç”¨ `StepExecutionGateway`

**è¾“å‡º**ï¼š`StepTestButton åŠŸèƒ½æ¸…å•`

---

### Phase 2: æå–ç‹¬ç«‹æ¨¡å—

**2.1 æå–æ‰§è¡Œå¼•æ“æ¨¡å—**

å¦‚æœ StepTestButton æ²¡æœ‰ä½¿ç”¨ useStepCardStateMachineï¼š
```
âœ… ä¿ç•™: hooks/useStepCardStateMachine.ts
âœ… æå‡: å°†å…¶è®¾ä¸ºæ ‡å‡†æ‰§è¡Œæ–¹å¼
âŒ åºŸå¼ƒ: StepTestButton çš„æ—§æ‰§è¡Œé€»è¾‘
```

**2.2 æå– UI ç»„ä»¶æ¨¡å—**

Split Button åŠŸèƒ½ï¼š
```typescript
// æ–°å»º: src/components/step-card/ExecutionActionBar.tsx
// ä» ActionBar.tsx æå–ï¼Œç‹¬ç«‹åŒ–
export const ExecutionActionBar = ({
  onExecute,
  onMatchOnly,  // â† æ–°å¢ matchOnly åŠŸèƒ½
  onChangeAction
}) => {
  return (
    <Button.Group>
      <Button onClick={onExecute}>æ‰§è¡Œ</Button>
      <Dropdown menu={actionMenu}>
        <Button icon={<DownOutlined />} />
      </Dropdown>
    </Button.Group>
    <Button onClick={onMatchOnly}>ä»…åŒ¹é…</Button>  {/* â† æ–°åŠŸèƒ½ */}
  );
};
```

---

### Phase 3: æ¸è¿›å¼é›†æˆåˆ° DraggableStepCard

**æ­¥éª¤ 3.1: æ·»åŠ å†…ç½®æ‰§è¡Œèƒ½åŠ›ï¼ˆå¯é€‰æ¨¡å¼ï¼‰**

```typescript
// DraggableStepCard.tsx
interface DraggableStepCardProps {
  // ä¿æŒå‘åå…¼å®¹
  StepTestButton?: React.ComponentType<...>;  // â† ä¿ç•™å¤–éƒ¨æ³¨å…¥
  
  // æ–°å¢å†…ç½®æ‰§è¡Œé€‰é¡¹
  useInternalExecution?: boolean;  // â† å¼€å…³ï¼šä½¿ç”¨å†…ç½®æ‰§è¡Œ
}

const DraggableStepCard = ({ 
  step, 
  StepTestButton,
  useInternalExecution = false  // â† é»˜è®¤falseï¼Œä¿æŒå…¼å®¹
}) => {
  // å†…ç½®æ‰§è¡Œå¼•æ“
  const { runStep, status } = useStepCardStateMachine({
    stepId: step.id,
    initialAction: step.currentAction,
    stepParameters: step.parameters,
    enabled: useInternalExecution  // â† ä»…åœ¨å¯ç”¨æ—¶åˆå§‹åŒ–
  });

  const handleExecute = () => {
    if (useInternalExecution) {
      runStep('matchAndExecute', step);  // â† å†…ç½®æ‰§è¡Œ
    }
    // å¦åˆ™ä¾èµ–å¤–éƒ¨ StepTestButton
  };

  const handleMatchOnly = () => {
    if (useInternalExecution) {
      runStep('matchOnly', step);  // â† æ–°åŠŸèƒ½
    }
  };

  return (
    <Card>
      {/* æ¸è¿›å¼ï¼šä¼˜å…ˆä½¿ç”¨å†…ç½®ï¼Œå›é€€åˆ°å¤–éƒ¨ */}
      {useInternalExecution ? (
        <ExecutionActionBar 
          onExecute={handleExecute}
          onMatchOnly={handleMatchOnly}  // â† æ–°åŠŸèƒ½
        />
      ) : (
        StepTestButton && <StepTestButton step={step} />
      )}
    </Card>
  );
};
```

**æ­¥éª¤ 3.2: ç°åº¦è¿ç§»**

```typescript
// 1. åœ¨æµ‹è¯•é¡µé¢å…ˆå¯ç”¨
<DraggableStepCard useInternalExecution={true} />

// 2. éªŒè¯åŠŸèƒ½å®Œæ•´æ€§
// 3. é€æ­¥è¿ç§»ç”Ÿäº§é¡µé¢
// 4. æœ€ç»ˆç§»é™¤ StepTestButton propï¼ˆbreaking changeï¼‰
```

---

### Phase 4: æ¸…ç†å†—ä½™ä»£ç 

**å¾…éªŒè¯åå†³å®š**ï¼š

å¦‚æœ useStepCardStateMachine ç¡®å®æ›´ä¼˜ï¼š
```bash
âœ… ä¿ç•™:
  - hooks/useStepCardStateMachine.ts
  - stepCards/ActionBar.tsx (æå–ä¸º ExecutionActionBar)
  
âŒ åˆ é™¤:
  - stepCards/NewStepCard.tsx (åŠŸèƒ½å·²åˆå¹¶)
  - stepCards/ActionParams.tsx (è¢« ActionParamsPanel æ›¿ä»£)
  - stepCards/index.ts
  - enhanced-step-card/ (æ— ç‹¬ç‰¹ä»·å€¼)

âš ï¸ åºŸå¼ƒè®¡åˆ’:
  - components/StepTestButton.tsx (é€æ­¥è¿ç§»åˆ°å†…ç½®æ‰§è¡Œ)
```

---

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³æ‰§è¡Œï¼šéªŒè¯ StepTestButton

```bash
# ä»»åŠ¡ 1: è¯»å– StepTestButton.tsx
# ä»»åŠ¡ 2: å¯¹æ¯”å…¶æ‰§è¡Œé€»è¾‘ä¸ useStepCardStateMachine
# ä»»åŠ¡ 3: åˆ¶å®šè¯¦ç»†åˆå¹¶è·¯çº¿å›¾
```

**å®Œæˆåè¾“å‡º**ï¼š
- [ ] StepTestButton åŠŸèƒ½æ¸…å•
- [ ] æ‰§è¡Œé€»è¾‘å¯¹æ¯”è¡¨
- [ ] æœ€ç»ˆåˆ é™¤/ä¿ç•™å†³ç­–
- [ ] åˆå¹¶æ—¶é—´è¡¨ï¼ˆå°æ­¥å¿«è·‘ï¼‰

---

## âœ… Phase 1 éªŒè¯ç»“æœï¼šStepTestButton æ‰§è¡Œé€»è¾‘

### æ‰§è¡Œé“¾è·¯åˆ†æ

```
StepTestButton (197è¡Œ)
  â””â”€> useSingleStepTest
       â””â”€> useStepTestV2Migration (è½¬å‘åˆ°V2)
            â””â”€> useV2StepTest
                 â””â”€> executeStep()
                      â”œâ”€> normalizeStepForExecution()
                      â””â”€> âŒ æœªä½¿ç”¨ StepExecutionGateway
                          âŒ æœªä½¿ç”¨ useStepCardStateMachine
```

### å…³é”®å‘ç°å¯¹æ¯”

| ç‰¹æ€§ | StepTestButton ä½“ç³» | NewStepCard ä½“ç³» | ç»“è®º |
|------|-------------------|-----------------|------|
| **æ‰§è¡Œå¼•æ“** | useV2StepTest | useStepCardStateMachine | **ä¸åŒç³»ç»Ÿ** |
| **Gateway** | âŒ æ—  | âœ… StepExecutionGateway | **NewStepCardæ¶æ„æ›´å¥½** |
| **V3æ™ºèƒ½ç­–ç•¥** | âŒ æ—  | âœ… æ”¯æŒ | **NewStepCardåŠŸèƒ½æ›´å¼º** |
| **matchOnlyæ¨¡å¼** | âœ… æœ‰ï¼ˆmatch-onlyï¼‰ | âœ… æœ‰ï¼ˆmatchOnlyï¼‰ | **éƒ½æ”¯æŒ** |
| **çŠ¶æ€ç®¡ç†** | useStateæœ¬åœ° | å®Œæ•´çŠ¶æ€æœº | **NewStepCardæ›´å®Œå–„** |
| **ä»£ç è¡Œæ•°** | 197è¡Œï¼ˆæŒ‰é’®ï¼‰<br>+ 285è¡Œï¼ˆV2 Hookï¼‰ | 288è¡Œï¼ˆå¡ç‰‡ï¼‰<br>+ 305è¡Œï¼ˆçŠ¶æ€æœºHookï¼‰ | **å¤æ‚åº¦ç›¸å½“** |

### ğŸš¨ æ ¸å¿ƒå·®å¼‚ï¼šä¸¤å¥—æ‰§è¡Œç³»ç»Ÿ

**ç³»ç»ŸA: StepTestButton ä½“ç³»ï¼ˆå½“å‰ç”Ÿäº§ï¼‰**
```typescript
useSingleStepTest 
  â†’ useStepTestV2Migration 
    â†’ useV2StepTest 
      â†’ ç›´æ¥è°ƒç”¨ execute_step_v2ï¼ˆTauriå‘½ä»¤ï¼‰
```

**ç³»ç»ŸB: useStepCardStateMachine ä½“ç³»ï¼ˆæ›´ä¼˜æ¶æ„ï¼‰**
```typescript
useStepCardStateMachine 
  â†’ StepExecutionGateway
    â†’ executeV3() 
      â†’ execute_chain_test_v3ï¼ˆTauriå‘½ä»¤ï¼‰
        â†’ V3æ™ºèƒ½ç­–ç•¥ï¼ˆé¿å…åæ ‡å…œåº•ï¼‰
```

### âš¡ æ¶æ„ä¼˜åŠ£å¯¹æ¯”

| ç»´åº¦ | ç³»ç»ŸA (StepTestButton) | ç³»ç»ŸB (useStepCardStateMachine) |
|------|----------------------|-------------------------------|
| **æ¶æ„å±‚æ¬¡** | âŒ Hookç›´æ¥è°ƒTauri | âœ… GatewayæŠ½è±¡å±‚ |
| **å¯æµ‹è¯•æ€§** | âš ï¸ éš¾ä»¥Mock | âœ… Gatewayå¯Mock |
| **ç­–ç•¥ç³»ç»Ÿ** | âŒ æ—  | âœ… V3æ™ºèƒ½ç­–ç•¥ |
| **åæ ‡å…œåº•** | âš ï¸ V2å¯èƒ½æœ‰å…œåº• | âœ… V3é¿å…å…œåº• |
| **çŠ¶æ€æœº** | âŒ ç®€å•çŠ¶æ€ | âœ… å®Œæ•´çŠ¶æ€æµè½¬ |
| **æ–‡æ¡£è¯´æ˜** | âš ï¸ "é€æ­¥åºŸå¼ƒV1" | âœ… "æ­£ç¡®æ¶æ„" |

---

## ğŸ“ æ›´æ–°åçš„å†³ç­–

### âŒ **é”™è¯¯å‡è®¾ï¼ˆä¹‹å‰ï¼‰**
> "StepTestButton å¯èƒ½ä½¿ç”¨äº† useStepCardStateMachine"

### âœ… **äº‹å®çœŸç›¸**
1. **ä¸¤å¥—ç‹¬ç«‹ç³»ç»Ÿ**ï¼šV2 vs V3
2. **useStepCardStateMachine æ¶æ„æ›´ä¼˜**ï¼š
   - âœ… ä½¿ç”¨ Gateway æŠ½è±¡
   - âœ… æ”¯æŒ V3 æ™ºèƒ½ç­–ç•¥
   - âœ… å®Œæ•´çŠ¶æ€æœºè®¾è®¡
   - âœ… æ–‡æ¡£æ˜ç¡®æ¨è

3. **StepTestButton æ˜¯è¿‡æ¸¡æ–¹æ¡ˆ**ï¼š
   - âš ï¸ V1â†’V2è¿ç§»äº§ç‰©
   - âš ï¸ æœªä½¿ç”¨ Gateway
   - âš ï¸ æ³¨é‡Šç§°"é€æ­¥åºŸå¼ƒ"

### ğŸ¯ åˆå¹¶ç­–ç•¥è°ƒæ•´

**Phase 1: ç«‹å³å¯åˆ é™¤ï¼ˆé›¶é£é™©ï¼‰**
```bash
âŒ enhanced-step-card/ (291è¡Œ)
   - æ— ç‹¬ç‰¹ä»·å€¼
   - ä»…ç»„åˆaction-systemç»„ä»¶
   
âŒ stepCards/ActionParams.tsx (280è¡Œ)
   - åŠŸèƒ½å®Œå…¨è¢« ActionParamsPanel (836è¡Œ) è¦†ç›–
```

**Phase 2: æ¨¡å—æå–ï¼ˆä¿ç•™ç²¾åï¼‰**
```bash
âœ… ä¿ç•™å¹¶æå‡:
   - hooks/useStepCardStateMachine.ts (305è¡Œ)
     â†’ è®¾ä¸ºæ ‡å‡†æ‰§è¡Œå¼•æ“
   
âœ… æå–ä¸ºç‹¬ç«‹æ¨¡å—:
   - stepCards/ActionBar.tsx (100è¡Œ)
     â†’ é‡å‘½åä¸º ExecutionActionBar.tsx
     â†’ æ·»åŠ åˆ° DraggableStepCard

âš ï¸ æš‚æ—¶ä¿ç•™ï¼ˆä½œä¸ºå‚è€ƒï¼‰:
   - stepCards/NewStepCard.tsx (288è¡Œ)
     â†’ å±•ç¤ºæ­£ç¡®çš„é›†æˆæ–¹å¼
     â†’ æ·»åŠ READMEè¯´æ˜å…¶ä»·å€¼
```

**Phase 3: é•¿æœŸè¿ç§»ï¼ˆbreaking changeï¼‰**
```bash
ğŸ“… è®¡åˆ’åºŸå¼ƒ:
   - components/StepTestButton.tsx (197è¡Œ)
   - hooks/useSingleStepTest.ts
   - hooks/useStepTestV2Migration.ts (285è¡Œ)
   - hooks/useV2StepTest.ts
   
ğŸ¯ è¿ç§»ç›®æ ‡:
   - DraggableStepCard é›†æˆ useStepCardStateMachine
   - é€æ­¥åºŸå¼ƒ V2 ç³»ç»Ÿ
   - ç»Ÿä¸€åˆ° V3 + Gateway æ¶æ„
```

---

## ğŸš€ å°æ­¥å¿«è·‘æ‰§è¡Œè®¡åˆ’

### Step 1: é›¶é£é™©åˆ é™¤ï¼ˆä»Šå¤©å¯æ‰§è¡Œï¼‰

åˆ é™¤å®Œå…¨å†—ä½™çš„ä»£ç ï¼š
```bash
git rm -r src/components/enhanced-step-card/
git rm src/components/stepCards/ActionParams.tsx
git commit -m "refactor: åˆ é™¤å†—ä½™ç»„ä»¶ï¼ˆ571è¡Œï¼‰

- enhanced-step-card: ä»…ç»„åˆaction-systemï¼Œæ— ç‹¬ç‰¹ä»·å€¼
- ActionParams: åŠŸèƒ½è¢«ActionParamsPanelå®Œå…¨è¦†ç›–"
```

### Step 2: æ–‡æ¡£åŒ–ä»·å€¼ç»„ä»¶ï¼ˆæ˜å¤©ï¼‰

åˆ›å»ºREADMEè¯´æ˜ï¼š
```bash
# src/components/stepCards/README.md
## ğŸ¯ æ­¤ç›®å½•çš„ä»·å€¼

### useStepCardStateMachine.ts (305è¡Œ)
âœ… **æ¨èçš„æ ‡å‡†æ‰§è¡Œå¼•æ“**
- ä½¿ç”¨ StepExecutionGatewayï¼ˆæ­£ç¡®æ¶æ„ï¼‰
- æ”¯æŒ V3 æ™ºèƒ½ç­–ç•¥
- å®Œæ•´çŠ¶æ€æœºè®¾è®¡

### ActionBar.tsx (100è¡Œ)
âœ… **Split Button å‚è€ƒå®ç°**
- æ‰§è¡Œ+åˆ‡æ¢åˆä½“
- matchOnly åŠŸèƒ½ç¤ºä¾‹

### NewStepCard.tsx (288è¡Œ)
âœ… **æ¶æ„æœ€ä½³å®è·µ**
- å±•ç¤ºå¦‚ä½•é›†æˆ useStepCardStateMachine
- æ¯” DraggableStepCard çš„ Prop Drilling æ›´æ¸…æ™°
```

### Step 3: æå– ExecutionActionBarï¼ˆä¸‹å‘¨ï¼‰

åˆ›å»ºç‹¬ç«‹æ¨¡å—ï¼š
```typescript
// src/components/step-card/ExecutionActionBar.tsx
// ä» ActionBar æå–ï¼Œæ¨¡å—åŒ–
export const ExecutionActionBar = ({ ... }) => { ... };
```

### Step 4: DraggableStepCard é›†æˆï¼ˆä¸‹ä¸‹å‘¨ï¼‰

æ·»åŠ å¯é€‰å†…ç½®æ‰§è¡Œï¼š
```typescript
interface DraggableStepCardProps {
  useInternalExecution?: boolean;  // å¼€å…³
  StepTestButton?: React.ComponentType<...>;  // ä¿æŒå…¼å®¹
}
```

---

**æ€»ç»“**ï¼š
1. âœ… ç«‹å³åˆ é™¤ 571è¡Œ å†—ä½™ä»£ç 
2. âœ… ä¿ç•™å¹¶æ–‡æ¡£åŒ– useStepCardStateMachine
3. âœ… é•¿æœŸè¿ç§»åˆ° V3 æ¶æ„
