# Tauri æ¡Œé¢åº”ç”¨å‰ç«¯ã€Œå“ç‰ŒåŒ–é‡æ„ã€â€”â€”å®Œæ•´æç¤ºè¯ï¼ˆChineseï¼‰

> è§’è‰²ï¼šå‰ç«¯å“ç‰ŒåŒ–é‡æ„å·¥ç¨‹å¸ˆï¼ˆBrand-first Front-end Refactor Engineerï¼‰
> æŠ€æœ¯æ ˆï¼š**Tauri + React 18 + TypeScript + Tailwind CSS + Ant Design v5 + Radix UI + shadcn/ui + Motion**
> ç›®æ ‡ï¼šæŠŠå½“å‰ **AntD åŸç”Ÿå¤–è§‚** çš„é¡¹ç›®ï¼Œå‡çº§ä¸º **æ—¶å°šã€ç°ä»£ã€é¢å‘æ¶ˆè´¹è€…** çš„å•†ä¸šåŒ– UIï¼›åœ¨ä¸ç‰ºç‰²å¤æ‚äº¤äº’æ•ˆç‡çš„å‰æä¸‹ï¼Œå»ºç«‹ **å“ç‰ŒåŒ–è½»ç»„ä»¶ä½“ç³»** ä¸ **ç»Ÿä¸€åŠ¨æ•ˆ/ä»¤ç‰Œ**ï¼Œå¹¶ä¿æŒ **æ¨¡å—åŒ–**ï¼ˆå•æ–‡ä»¶ â‰¤500 è¡Œï¼‰ã€‚

---

## 0) æˆåŠŸæ ‡å‡†ï¼ˆä¸€çœ¼çœ‹æ‡‚ï¼‰

- **å“ç‰Œä¸€è‡´**ï¼šé¢œè‰²/åœ†è§’/é˜´å½±/å¯†åº¦/å­—å·ç”± **Design Tokensï¼ˆCSS å˜é‡ï¼‰** é©±åŠ¨ï¼Œæ‰€æœ‰é¡µé¢è§‚æ„Ÿä¸€è‡´ã€‚
- **è½»ç»„ä»¶æ›´å¥½çœ‹**ï¼šæŒ‰é’®/å¡ç‰‡/æ ‡ç­¾/å¼¹å±‚ç­‰**é«˜æ›å…‰è½»ç»„ä»¶**ç”± **Radix+shadcnï¼ˆæºç å…¥åº“ï¼‰+Tailwind çš®è‚¤** å®ç°ï¼Œè´¨æ„Ÿç°ä»£ã€‚
- **é‡ç»„ä»¶çœå¿ƒ**ï¼šè¡¨å•/è¡¨æ ¼/ä¸Šä¼ /æ ‘/æ—¥æœŸ/æŠ½å±‰/æ­¥éª¤ ç­‰**é‡ç»„ä»¶**ç»§ç»­ç”¨ **AntD v5**ï¼Œ**ä¸è¦†å†™ `.ant-*`**ï¼Œä»…é€šè¿‡ tokens ä¸å¤–å±‚å®¹å™¨çš®è‚¤å¯¹é½ã€‚
- **ç»Ÿä¸€åŠ¨æ•ˆ**ï¼šä½¿ç”¨ **Motion** ç»Ÿä¸€æ‚¬åœ/å…¥åœº/è½¬åœºï¼ˆå…¥åœº 180â€“220msã€ç¦»åœº 120â€“160msã€æ‚¬åœ 80â€“120msã€ease-outï¼‰ã€‚
- **A11y ä¸æ¡Œé¢**ï¼šé”®ç›˜å¯è¾¾ã€å¯è§ç„¦ç‚¹ç¯ã€æš—é»‘å¯¹æ¯”è¾¾æ ‡ï¼›Tauri æ ‡é¢˜æ æ‹–æ‹½/æ‰˜ç›˜/å¿«æ·é”®ä¸å—å½±å“ã€‚
- **æ¨¡å—åŒ–å¯ç»´æŠ¤**ï¼šç›®å½•åˆ†å±‚æ¸…æ™°ï¼›å•æ–‡ä»¶ â‰¤500 è¡Œï¼›å‡çº§ AntD æˆ–æ›¿æ¢è½»ç»„ä»¶æ— ç—›ã€‚

---

## 1) åœ°ä½é‡è°ƒï¼ˆè°è´Ÿè´£å¤–è§‚ï¼Œè°è´Ÿè´£å¤æ‚åº¦ï¼‰

- **Tailwindï¼ˆ+Design Tokensï¼‰= è§†è§‰æ‰€æœ‰è€…**ï¼šå“ç‰Œè‰²æ¿ã€åœ†è§’ã€é˜´å½±ã€å¯†åº¦ã€æ’ç‰ˆã€å¸ƒå±€ä¸å“åº”å¼ï¼›ä»…åœ¨**å®¹å™¨ä¸è‡ªæœ‰ç»„ä»¶**ä¸Šä½¿ç”¨ï¼Œä¸è¿›å…¥ AntD å†…éƒ¨æ”¹å¦†ã€‚
- **Radix + shadcn/ui = è½»ç»„ä»¶æºç **ï¼šButton / Card / Tag / Tooltip / Dialog / Dropdown ç­‰æ”¾å…¥ `components/ui`ï¼Œä½œä¸ºâ€œå¤–è§‚æ‹…å½“â€ã€‚
- **Ant Design v5 = é‡ç»„ä»¶ä¸ç”Ÿäº§åŠ›**ï¼šForm / Table / Upload / Tree / DatePicker / Drawer / Stepsâ€¦â€¦é€šè¿‡ **`ConfigProvider` tokens** ä¸**é€‚é…å±‚**ç»Ÿä¸€ï¼Œä¸è¦†å†™å†…éƒ¨æ ·å¼ã€‚
- **Motion = åŠ¨æ•ˆç»Ÿä¸€**ï¼šç»Ÿä¸€èŠ‚å¥ã€ç»Ÿä¸€æ›²çº¿ã€ç»Ÿä¸€è¿›å…¥/ç¦»å¼€/æ‚¬åœæ–¹æ¡ˆã€‚

**åšå†³ä¸è¦**ï¼š

- ä¸è¦ç”¨ Tailwind/CSS å»è¦†ç›– `.ant-*` æˆ– `!important`ï¼›
- ä¸è¦åœ¨ AntD å­å…ƒç´ ä¸ŠåŠ è‡ªå®šä¹‰æ¸å˜/é˜´å½±/åœ†è§’ï¼›
- ä¸è¦è®©å¤šä¸ªé¡µé¢å„è‡ªâ€œåˆ›æ–°â€æ¸å˜/é˜´å½±ï¼Œå¿…é¡»èµ° tokens ä¸è½»ç»„ä»¶çš®è‚¤ã€‚

---

## 2) è®¾è®¡ä»¤ç‰Œï¼ˆSingle Source of Truthï¼‰

åœ¨ `styles/tokens.css` å®šä¹‰ï¼š

```css
/* åŸºç¡€å“ç‰Œè‰² */
--brand            # ä¸»å“ç‰Œè‰²ï¼ˆä¾‹å¦‚ #6E8BFFï¼‰

/* èƒŒæ™¯å±‚çº§ */
--bg-base          # é¡µé¢æ·±è‰²åº•
--bg-elevated      # æµ®å±‚/é¢æ¿åº•
--bg-secondary     # æ¬¡çº§èƒŒæ™¯

/* å±€éƒ¨æµ…è‰²ç»„ä»¶ä¸“ç”¨ï¼ˆå…³é”®ï¼ï¼‰ */
--bg-light-base    # æµ…è‰²ç»„ä»¶ç™½åº• (#FFFFFF)
--bg-light-elevated # æµ…è‰²ç»„ä»¶æå‡èƒŒæ™¯ (#F8FAFC)
--bg-light-secondary # æµ…è‰²ç»„ä»¶æ¬¡çº§èƒŒæ™¯ (#F1F5F9)
--text-inverse     # æµ…è‰²èƒŒæ™¯ä¸‹çš„æ·±è‰²æ–‡å­— (#1E293B)
--text-muted       # æ¬¡è¦æ–‡å­—é¢œè‰² (#94A3B8)

/* ä¿¡æ¯è‰²å½© */
--info             # ä¿¡æ¯è‰² (#3B82F6)
--info-bg          # ä¿¡æ¯èƒŒæ™¯ (#DBEAFE)
--success          # æˆåŠŸè‰² (#10B981)  
--success-bg       # æˆåŠŸèƒŒæ™¯ (#D1FAE5)
--warning          # è­¦å‘Šè‰² (#F59E0B)
--warning-bg       # è­¦å‘ŠèƒŒæ™¯ (#FEF3C7)
--error            # é”™è¯¯è‰² (#EF4444)
--error-bg         # é”™è¯¯èƒŒæ™¯ (#FEE2E2)

/* å¸ƒå±€ä¸æ§ä»¶ */
--text-1 / --text-2  # ä¸»/æ¬¡æ–‡æœ¬
--radius           # ç»Ÿä¸€åœ†è§’ï¼ˆå»ºè®® 10â€“14pxï¼‰
--shadow           # ç»Ÿä¸€é˜´å½±ï¼ˆè½¯é˜´å½±ï¼Œå•†ä¸šåŒ–ï¼‰
--font             # åŸºç¡€å­—å·
--control-h        # æ§ä»¶é«˜åº¦ï¼ˆ40/36 ä¸¤æ¡£ï¼‰
--border-muted     # è¾¹æ¡†é¢œè‰² (#D1D5DB)

/* æµ…è‰²ä¸»é¢˜å¼ºåˆ¶è¦†ç›–ç±»ï¼ˆè§£å†³ Ant Design ç»§æ‰¿é—®é¢˜ï¼‰ */
.light-theme-force {
  color: var(--text-inverse, #1e293b) !important;
}
.light-theme-force span,
.light-theme-force p,
.light-theme-force strong,
.light-theme-force b,
.light-theme-force em,
.light-theme-force i,
.light-theme-force div {
  color: var(--text-inverse, #1e293b) !important;
}
.light-theme-force .ant-typography,
.light-theme-force .ant-typography-title,
.light-theme-force .ant-typography-paragraph,
.light-theme-force .ant-typography-text {
  color: var(--text-inverse, #1e293b) !important;
}
.light-theme-force .ant-typography-secondary {
  color: var(--text-muted, #94a3b8) !important;
}
.light-theme-force .ant-tag {
  color: var(--text-inverse, #1e293b) !important;
  background: var(--bg-light-secondary, #f1f5f9) !important;
  border-color: var(--border-muted, #d1d5db) !important;
}
.light-theme-force .ant-btn {
  color: var(--text-inverse, #1e293b) !important;
}
.light-theme-force .ant-btn-default {
  background: var(--bg-light-elevated, #f8fafc) !important;
  border-color: var(--border-muted, #d1d5db) !important;
}
```

### ğŸš¨ ç™½åº•ç™½å­—é—®é¢˜ç»ˆæè§£å†³æ–¹æ¡ˆ

**é—®é¢˜åŸå› **ï¼šé¡¹ç›®é‡‡ç”¨å…¨å±€æ·±è‰²ä¸»é¢˜ï¼ˆ`color: rgba(255,255,255,0.85)`ï¼‰ï¼Œå½“æŸäº›ç»„ä»¶ä½¿ç”¨æµ…è‰²èƒŒæ™¯æ—¶ï¼Œå¦‚æœä¸æ˜¾å¼è®¾ç½®æ–‡å­—é¢œè‰²ï¼Œå°±ä¼šç»§æ‰¿å…¨å±€çš„ç™½è‰²æ–‡å­—ï¼Œé€ æˆç™½åº•ç™½å­—ä¸å¯è¯»ã€‚

### âš¡ å¿«é€Ÿæ£€æµ‹ä¸ä¿®å¤å‘½ä»¤

**å¼€å‘æ—¶ç«‹å³è¿è¡Œçš„æ£€æµ‹å‘½ä»¤**ï¼š
```bash
# æœç´¢é¡¹ç›®ä¸­æ‰€æœ‰å¯èƒ½çš„ç™½åº•ç™½å­—é—®é¢˜
grep -r "background.*white\|background.*#fff\|background.*#ffffff" src/ --include="*.tsx" --include="*.ts"

# æ£€æŸ¥æ˜¯å¦æœ‰ç¡¬ç¼–ç ç™½è‰²èƒŒæ™¯
grep -r "background: 'white'\|background: '#fff'" src/ --include="*.tsx"

# æ£€æŸ¥åŠé€æ˜ç™½è‰²èƒŒæ™¯ï¼ˆå¸¸è§äºæµ®åŠ¨å…ƒç´ ï¼‰
grep -r "background.*rgba(255.*255.*255" src/ --include="*.tsx"

# æ£€æŸ¥ position: fixed çš„æµ®åŠ¨å…ƒç´ ï¼ˆå®¹æ˜“å¿˜è®°è®¾ç½®ä¸»é¢˜ï¼‰
grep -r "position.*fixed" src/ --include="*.tsx" -A 5 -B 2
```

**æ‰¹é‡ä¿®å¤è„šæœ¬æ¨¡æ¿**ï¼š
```bash
# å°†ç™½è‰²èƒŒæ™¯æ”¹ä¸ºæ·±è‰²ä¸»é¢˜èƒŒæ™¯
sed -i "s/background: 'white'/background: 'var(--bg-elevated, #1e293b)', color: 'var(--text-1, #f8fafc)'/g" src/**/*.tsx
sed -i "s/background: '#fff'/background: 'var(--bg-elevated, #1e293b)', color: 'var(--text-1, #f8fafc)'/g" src/**/*.tsx
```

**AI ä»£ç†å¿…é¡»éµå®ˆçš„å¼ºåˆ¶æ£€æŸ¥æ¸…å•**ï¼š
```
âš¡ ç«‹å³æ£€æµ‹ï¼šçœ‹åˆ°ä»»ä½•åŒ…å«ä»¥ä¸‹æ¨¡å¼çš„ä»£ç ç«‹å³æ£€æŸ¥æ–‡å­—é¢œè‰²
â–¡ background: 'white' 
â–¡ background: '#fff'
â–¡ background: '#ffffff'
â–¡ background: rgba(255, 255, 255, 0.95) ï¼ˆåŠé€æ˜ç™½è‰²ï¼‰
â–¡ background: var(--bg-light-*)
â–¡ position: 'fixed' + æµ…è‰²èƒŒæ™¯ç»„åˆ

âš¡ å¼ºåˆ¶ä¿®å¤ï¼šæ ¹æ®ç»„ä»¶ç”¨é€”é€‰æ‹©åˆé€‚çš„èƒŒæ™¯è‰²
â–¡ æµ®åŠ¨å·¥å…·æ /æç¤ºæ¡† â†’ ä½¿ç”¨æ·±è‰²ä¸»é¢˜ï¼švar(--bg-elevated) + var(--text-1)
â–¡ å†…å®¹é¢æ¿/å¡ç‰‡ â†’ ä½¿ç”¨æµ…è‰²ä¸»é¢˜ï¼švar(--bg-light-base) + var(--text-inverse) + light-theme-forceç±»
â–¡ åŠé€æ˜æµ®å±‚ â†’ ä½¿ç”¨æ·±è‰²åŠé€æ˜ï¼šrgba(30, 41, 59, 0.9)

âš¡ éªŒè¯æ£€æŸ¥ï¼šç¡®ä¿ä»¥ä¸‹ç»„ä»¶ç±»å‹éƒ½å·²æ­£ç¡®å¤„ç†
â–¡ æµ®åŠ¨å·¥å…·æ  (FloatingLayoutToolbar, LayoutControlToolbar)
â–¡ å¼¹å‡ºæ°”æ³¡ (ElementSelectionConfirm)
â–¡ æç¤ºé¢æ¿ (å„ç§ Card, Panel)
â–¡ ä¾§è¾¹æ  (Sider)
â–¡ é¡µé¢å®¹å™¨ (Layout)
â–¡ å¸ƒå±€åˆ‡æ¢å™¨ (ContactImportWorkbench ä¸­çš„å›ºå®šä½ç½®åˆ‡æ¢å™¨)
```

**å¼ºåˆ¶æ£€æŸ¥è§„åˆ™**ï¼š

1. **ä»»ä½•ä½¿ç”¨æµ…è‰²èƒŒæ™¯çš„ç»„ä»¶éƒ½å¿…é¡»åŒæ—¶è®¾ç½®**ï¼š
   ```tsx
   // âœ… æ­£ç¡®æ¨¡å¼
   <div 
     style={{ 
       background: 'var(--bg-light-base, #ffffff)',
       color: 'var(--text-inverse, #1e293b)'  // å¿…é¡»ï¼
     }}
     className="light-theme-force"  // é¢å¤–ä¿é™©
   >
     æµ®åŠ¨å·¥å…·æ å†…å®¹
   </div>
   ```

2. **å¯¹äºåŒ…å« Ant Design ç»„ä»¶çš„æµ…è‰²å®¹å™¨ï¼Œå¿…é¡»ä½¿ç”¨ `.light-theme-force` ç±»**ï¼š
   ```tsx
   // âœ… è§£å†³ Ant Design ç»„ä»¶æ–‡å­—é¢œè‰²ç»§æ‰¿é—®é¢˜
   <Card 
     style={{ background: 'var(--bg-light-base)' }}
     className="light-theme-force"
   >
     <Title>è‡ªåŠ¨å˜ä¸ºæ·±è‰²æ–‡å­—</Title>
     <Text>è‡ªåŠ¨å˜ä¸ºæ·±è‰²æ–‡å­—</Text>
     <Tag>è‡ªåŠ¨å˜ä¸ºæ·±è‰²æ–‡å­—</Tag>
   </Card>
   ```

3. **AI ä»£ç†å¿…é¡»éµå®ˆçš„å¼ºåˆ¶æ£€æŸ¥æ¸…å•**ï¼š
   ```
   â–¡ çœ‹åˆ° background: 'white' æˆ– background: '#ffffff' ç«‹å³æ£€æŸ¥æ˜¯å¦è®¾ç½®äº†æ–‡å­—é¢œè‰²
   â–¡ çœ‹åˆ° background: var(--bg-light-*) ç«‹å³æ£€æŸ¥æ˜¯å¦æ·»åŠ äº† className="light-theme-force"
   â–¡ ä»»ä½•æµ®åŠ¨ç»„ä»¶ã€å¼¹çª—ã€æç¤ºæ¡†ã€å¡ç‰‡ä½¿ç”¨æµ…è‰²èƒŒæ™¯æ—¶å¿…é¡»å¤„ç†æ–‡å­—é¢œè‰²
   â–¡ æ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº† CSS å˜é‡è€Œéç¡¬ç¼–ç é¢œè‰²å€¼
   â–¡ éªŒè¯æœ€ç»ˆå¯¹æ¯”åº¦æ˜¯å¦æ»¡è¶³ WCAG AA æ ‡å‡†ï¼ˆ4.5:1ï¼‰
   ```

**å…³é”®åŸåˆ™**ï¼š

- **å…¨å±€æš—è‰² + å±€éƒ¨æµ…è‰²ç»„ä»¶**ï¼šæ•´ä½“ UI ä¿æŒæš—è‰²ä¸»é¢˜ï¼Œä½†ç‰¹å®šç»„ä»¶ï¼ˆå¦‚å¼¹çª—å†…å®¹ã€æç¤ºå¡ç‰‡ã€ä¿¡æ¯é¢æ¿ï¼‰å¯ä»¥ä½¿ç”¨æµ…è‰²èƒŒæ™¯ä»¥çªå‡ºå†…å®¹ï¼Œ**å¿…é¡»é…å¥—ä½¿ç”¨ `--text-inverse` ç¡®ä¿æ–‡å­—å¯è¯»æ€§**
- **ç¦æ­¢ç¡¬ç¼–ç é¢œè‰²**ï¼šæ‰€æœ‰é¢œè‰²å€¼å¿…é¡»é€šè¿‡ CSS å˜é‡å®šä¹‰ï¼Œä¾¿äºä¸»é¢˜åˆ‡æ¢å’Œå“ç‰Œå®šåˆ¶
- **æµ…è‰²ç»„ä»¶æœ€ä½³å®è·µ**ï¼š
  ```tsx
  // âœ… æ­£ç¡®ï¼šæµ…è‰²èƒŒæ™¯ + æ·±è‰²æ–‡å­— + å¼ºåˆ¶ç±»
  <div 
    style={{ 
      background: 'var(--bg-light-elevated)', 
      color: 'var(--text-inverse)' 
    }}
    className="light-theme-force"
  >
    å†…å®¹ä¼šè‡ªåŠ¨ä½¿ç”¨æ­£ç¡®çš„æ·±è‰²æ–‡å­—
  </div>
  
  // âŒ é”™è¯¯ï¼šæµ…è‰²èƒŒæ™¯ä½†ç»§æ‰¿äº†å…¨å±€ç™½è‰²æ–‡å­—
  <div style={{ background: '#f8fafc' }}>
    çœ‹ä¸è§çš„ç™½è‰²æ–‡å­—ï¼
  </div>
  ```

**å…¸å‹ä¿®å¤ç¤ºä¾‹**ï¼š

```tsx
// âŒ é—®é¢˜ä»£ç 1ï¼šæµ®åŠ¨å·¥å…·æ ç™½åº•ç™½å­—
<div style={{
  background: 'white',  // ç¡¬ç¼–ç  + æ²¡æœ‰æ–‡å­—é¢œè‰²
  padding: '8px 16px',
  borderRadius: '6px'
}}>
  <Text>å¸ƒå±€æ¨¡å¼:</Text>  {/* ç»§æ‰¿å…¨å±€ç™½è‰²æ–‡å­— = ä¸å¯è¯» */}
</div>

// âœ… ä¿®å¤ä»£ç 1ï¼šä½¿ç”¨å˜é‡ + å¼ºåˆ¶ç±»
<div 
  style={{
    background: 'var(--bg-light-base, #ffffff)',
    color: 'var(--text-inverse, #1e293b)',
    padding: '8px 16px',
    borderRadius: '6px'
  }}
  className="light-theme-force"
>
  <Text>å¸ƒå±€æ¨¡å¼:</Text>  {/* è‡ªåŠ¨æ·±è‰²æ–‡å­—ï¼Œæ¸…æ™°å¯è¯» */}
</div>

// âŒ é—®é¢˜ä»£ç 2ï¼šåŠé€æ˜ç™½è‰²æµ®åŠ¨åˆ‡æ¢å™¨ï¼ˆç”¨æˆ·å®é™…é‡åˆ°çš„é—®é¢˜ï¼‰
<div
  style={{
    position: 'fixed',
    top: 80,
    right: 16,
    zIndex: 1000,
    background: 'rgba(255, 255, 255, 0.95)', // åŠé€æ˜ç™½åº•
    padding: '8px 16px',
    borderRadius: 6,
    boxShadow: '0 2px 8px rgba(0, 0, 0, 0.1)',
  }}
>
  <Text>å¸ƒå±€æ¨¡å¼:</Text>  {/* ç™½åº•ç™½å­—ï¼Œå®Œå…¨ä¸å¯è¯»ï¼ */}
</div>

// âœ… ä¿®å¤ä»£ç 2ï¼šæ”¹ä¸ºæ·±è‰²ä¸»é¢˜æµ®åŠ¨å…ƒç´ 
<div
  style={{
    position: 'fixed',
    top: 80,
    right: 16,
    zIndex: 1000,
    background: 'var(--bg-elevated, #1e293b)', // æ·±è‰²èƒŒæ™¯
    color: 'var(--text-1, #f8fafc)', // æµ…è‰²æ–‡å­—
    padding: '8px 16px',
    borderRadius: 6,
    boxShadow: '0 2px 8px rgba(0, 0, 0, 0.3)', // å¢å¼ºé˜´å½±
    border: '1px solid var(--border-primary, #334155)', // æ·»åŠ è¾¹æ¡†å¢å¼ºå±‚æ¬¡
  }}
>
  <Text>å¸ƒå±€æ¨¡å¼:</Text>  {/* æ·±åº•ç™½å­—ï¼Œæ¸…æ™°å¯è¯»ï¼ */}
</div>
```

### ğŸ¨ ä¸»é¢˜é€‰æ‹©æŒ‡å—

**æµ®åŠ¨å…ƒç´ ï¼ˆå·¥å…·æ ã€åˆ‡æ¢å™¨ã€æç¤ºæ¡†ï¼‰**ï¼š
- âœ… **æ¨è**ï¼šæ·±è‰²ä¸»é¢˜ `var(--bg-elevated)` + `var(--text-1)`
- åŸå› ï¼šæµ®åŠ¨åœ¨ä»»ä½•èƒŒæ™¯ä¸Šéƒ½æ¸…æ™°å¯è§ï¼Œç¬¦åˆæ“ä½œç³»ç»ŸåŸç”Ÿé£æ ¼
- é€‚ç”¨ï¼šposition: fixed/absolute çš„æ‰€æœ‰å…ƒç´ 

**å†…å®¹é¢æ¿ï¼ˆå¡ç‰‡ã€è¡¨å•ã€è¯¦æƒ…ï¼‰**ï¼š
- âœ… **æ¨è**ï¼šæµ…è‰²ä¸»é¢˜ `var(--bg-light-base)` + `var(--text-inverse)` + `light-theme-force`
- åŸå› ï¼šå†…å®¹é˜…è¯»ä½“éªŒæ›´å¥½ï¼Œä¸æ·±è‰²èƒŒæ™¯å½¢æˆå¯¹æ¯”
- é€‚ç”¨ï¼šä¸»è¦å†…å®¹åŒºåŸŸã€æ•°æ®å±•ç¤ºåŒºåŸŸ

**è¦æ±‚**ï¼š

- Tailwind åœ¨ `tailwind.config.ts` è¯»å–ä¸Šè¿°å˜é‡ï¼›
- AntD åœ¨é¡¶å±‚ `ConfigProvider` ç”¨ `algorithm:[theme.darkAlgorithm]` å¹¶ä»¥ tokens å¯¹é½ï¼ˆä»…å°‘é‡å¿…è¦ tokenï¼‰ï¼›
- **å¼ºåˆ¶è¦æ±‚**ï¼šä»»ä½•ä½¿ç”¨æµ…è‰²èƒŒæ™¯çš„ç»„ä»¶éƒ½å¿…é¡»æ˜¾å¼è®¾ç½® `color: var(--text-inverse)` æˆ–å¯¹åº”çš„æ–‡å­—é¢œè‰²å˜é‡ï¼›
- è§†è§‰å˜æ›´åªèƒ½æ”¹ tokensï¼Œä¸åœ¨é¡µé¢/ç»„ä»¶ç¡¬ç¼–ç è§†è§‰å€¼ã€‚

---

## 3) ç›®å½•ä¸æ¨¡å—åŒ–çº¦æŸ

```
src/
  styles/          # tokens.cssï¼ˆä»¤ç‰Œï¼‰ã€global.cssï¼ˆå±‚çº§ï¼šantd resetâ†’tailwindï¼‰
  theme/           # ThemeBridge.tsxï¼ˆAntD ä¸»é¢˜æ¡¥ï¼‰
  components/
    ui/            # è½»ç»„ä»¶ï¼ˆButton/CardShell/TagPill/Tooltip/SmartDialog/...ï¼‰
    adapters/      # AntD é‡ç»„ä»¶é€‚é…å±‚ï¼ˆAntTableAdapter/AntFormAdapter/...ï¼‰
    patterns/      # é¡µé¢å›¾å…ƒï¼ˆFilterBar/MarketplaceCard/HeaderBar/...ï¼‰
    layout/        # HeaderNav/PageShell/...ï¼ˆä»…ç¼–æ’ä¸æ …æ ¼ï¼‰
  pages/           # æŒ‰é¡µé¢ç»„åˆ patterns
```

- å•æ–‡ä»¶ â‰¤500 è¡Œï¼›è¶…è¿‡å³æ‹†åˆ†ã€‚
- `pages/` åªåšç¼–æ’ï¼›è§†è§‰åœ¨ `ui/` ä¸ `patterns/` é‡Œï¼›ä¸ AntD çš„è€¦åˆæ”¶æ•›åœ¨ `adapters/`ã€‚

---

## 4) å®æ–½æ­¥éª¤ï¼ˆæœ€å¿«è§æ•ˆçš„è¿ç§»è·¯çº¿ï¼‰

**Phase 0ï¼ˆå½“æ—¥ï¼‰**

1. å»ºç«‹ `styles/tokens.css`ï¼›åœ¨ `tailwind.config.ts` è¯»å–å˜é‡ï¼›
2. `theme/ThemeBridge.tsx`ï¼š`algorithm:[theme.darkAlgorithm]` + å¯¹é½ tokensï¼›
3. æ¸…ç†æ‰€æœ‰ `.ant-*` è¦†ç›–/`!important`ï¼Œä¿è¯ AntD é‡ç»„ä»¶å›åˆ°â€œå¯è¢« tokens é©±åŠ¨â€çš„çŠ¶æ€ã€‚

**Phase 1ï¼ˆ1â€“2 å¤©è§æ•ˆï¼‰** 4. è½åœ° `components/ui`ï¼š`Button / CardShell / TagPill / SmartDialog` ç­‰**è½»ç»„ä»¶**ï¼› 5. ç”¨ `patterns/*` é‡å†™é«˜æ›å…‰åŒºåŸŸï¼ˆé¡µå¤´/ç­›é€‰/å¡ç‰‡ï¼‰ï¼Œ**æ”¹è§‚ç«‹åˆ»ç°ä»£**ï¼› 6. æ¥å…¥ **Motion**ï¼Œç»Ÿä¸€æ‚¬åœ/å…¥åœºèŠ‚å¥ã€‚

**Phase 2ï¼ˆå¹¶è¡Œï¼‰** 7. ä¸º AntD é‡ç»„ä»¶åŠ  **é€‚é…å±‚**ï¼ˆå¯†åº¦ã€ç²˜å¤´ã€æ»šåŠ¨å®¹å™¨ã€åˆ†é¡µä½ç½®ï¼‰ï¼Œ**ä¸è¦†å†™**å†…éƒ¨ï¼› 8. å®Œæˆå¸¸ç”¨ patternsï¼ˆFilterBar, MarketplaceCard, EmptyState, Skeleton ç­‰ï¼‰ï¼›

**Phase 3ï¼ˆæ”¶å°¾ï¼‰** 9. é€é¡µè‡ªæ£€ï¼ˆA11yã€æš—é»‘/ç´§å‡‘ã€åŠ¨æ•ˆä¸€è‡´ã€æ€§èƒ½é¢„ç®—ï¼‰ï¼› 10. æ•´ç†æ–‡æ¡£ï¼štokens è¡¨ã€åŠ¨æ•ˆè§„èŒƒã€è½»ç»„ä»¶ç”¨æ³•ã€AntD é€‚é…çº¦å®šã€‚

---

## 5) Do / Donâ€™tï¼ˆè½åœ°å®ˆåˆ™ï¼‰

**Do**

- åœ¨å®¹å™¨ä¸è‡ªæœ‰è½»ç»„ä»¶ä¸Šä½¿ç”¨ Tailwindï¼›
- é€šè¿‡ tokens æ”¹å¤–è§‚ï¼›
- é‡ç»„ä»¶ç”¨ AntDï¼Œè½»ç»„ä»¶ç”¨è‡ªæœ‰æºç ï¼ˆRadix/shadcn + Tailwind çš®è‚¤ï¼‰ï¼›
- ç»Ÿä¸€åŠ¨æ•ˆï¼ˆMotionï¼‰ã€‚

**Donâ€™t**

- ä¸è¦†å†™ `.ant-*` / ä¸ä½¿ç”¨ `!important`ï¼›
- ä¸åœ¨ AntD å­å…ƒç´ åŠ æ¸å˜/é˜´å½±/åœ†è§’ï¼›
- ä¸åˆ†æ•£å®šä¹‰é¢œè‰²/é˜´å½±ï¼ˆç»Ÿä¸€èµ° tokensï¼‰ã€‚

---

## 6) åŠ¨æ•ˆä¸å¯è®¿é—®æ€§

- èŠ‚å¥ï¼šEnter 180â€“220ms / Exit 120â€“160ms / Hover 80â€“120msï¼›
- æ›²çº¿ï¼šease-outï¼ˆæˆ– cubic-bezier(0.22, 1, 0.36, 1)ï¼‰ï¼›
- ç„¦ç‚¹ï¼šå¯è§ `:focus-visible`ï¼ˆå“ç‰Œè‰² 2px, offset 2pxï¼‰ï¼›
- é”®ç›˜å¯è¾¾/è¯»å±è¯­ä¹‰éµå¾ª Radix/AntD é»˜è®¤å®ç°ã€‚

---

## 7) Tauri æ¡Œé¢ç‰¹æ€§

- è‡ªç»˜æ ‡é¢˜æ ï¼š`.titlebar { -webkit-app-region: drag }`ï¼›äº¤äº’åŒº `no-drag`ï¼›
- ä¸‰å¹³å° DPI/å­—ä½“å›å½’ï¼›æ‰˜ç›˜/å¿«æ·é”®ä¸è‡ªåŠ¨æ›´æ–°ä¿æŒä¸å˜ï¼›
- å®‰å…¨ï¼šæœ€å°åŒ– allowlistï¼ŒCSP é™åˆ¶èµ„æºæ¥æºã€‚

---

## 8) æ€§èƒ½é¢„ç®—

- é¦–å± CSS < 100KBï¼ˆTailwind æŒ‰éœ€ï¼‰ï¼›
- AntD ç»„ä»¶æŒ‰éœ€å¼•å…¥ï¼›å¤§è¡¨è™šæ‹ŸåŒ–ï¼›è·¯ç”±åˆ†åŒ…ï¼›å›¾ç‰‡æ‡’åŠ è½½ï¼›
- åŠ¨æ•ˆé¿å…æ˜‚è´µæ»¤é•œï¼›å°½é‡ç”¨ transform/opacityã€‚

---

## 9) äº¤ä»˜ç‰©ä¸éªŒæ”¶

**äº¤ä»˜**

- `tokens.css`ã€`tailwind.config.ts`ã€`ThemeBridge.tsx`ï¼›
- `components/ui/*`ã€`components/adapters/*`ã€`components/patterns/*`ï¼›
- å…³é”®é¡µé¢ PRï¼ˆæ”¹é€ å‰/åæˆªå›¾ã€åŠ¨æ•ˆå½•å±ã€A11y æŠ¥å‘Šï¼‰ã€‚

**é€é¡µè‡ªæ£€æ¸…å•**

- [ ] æ˜¯å¦å­˜åœ¨ `.ant-*` è¦†ç›–/`!important`ï¼ˆå¿…é¡» 0ï¼‰ã€‚
- [ ] é«˜æ›å…‰è½»ç»„ä»¶æ˜¯å¦å·²æ›¿ä¸º `ui/*`ï¼ˆæŒ‰é’®/å¡ç‰‡/æ ‡ç­¾/å¼¹å±‚ï¼‰ã€‚
- [ ] AntD é‡ç»„ä»¶æ˜¯å¦é€šè¿‡ `adapters/*` åŒ…è£…ï¼ˆæ— å†…éƒ¨è¦†å†™ï¼‰ã€‚
- [ ] åŠ¨æ•ˆèŠ‚å¥æ˜¯å¦ç»Ÿä¸€ã€ç„¦ç‚¹ç¯æ˜¯å¦å¯è§ã€‚
- [ ] æš—é»‘/ç´§å‡‘æ¨¡å¼æ—  UI ç ´åï¼ŒDPI/ç¼©æ”¾æ— å¼‚å¸¸ã€‚
- [ ] é¦–å± CSS/ä½“ç§¯ä¸äº¤äº’æ€§èƒ½ç¬¦åˆé¢„ç®—ã€‚

---

## 10) ä»£ç è¾“å‡ºé£æ ¼ï¼ˆç»™ AI/å›¢é˜Ÿçš„ç¡¬æ€§è¦æ±‚ï¼‰

- **æ‰€æœ‰ä»£ç æ–‡ä»¶é¦–è¡Œ**å†™æ³¨é‡Šæ ‡æ˜â€œæ–‡ä»¶è·¯å¾„â€ï¼Œä¸”**ä¸­æ–‡æ³¨é‡Š**è§£é‡Šæ„å›¾ï¼›
- ç»„ä»¶ä¸æ ·å¼åˆ†å±‚ï¼š`ui`ï¼ˆè½»ç»„ä»¶ï¼‰â†’`patterns`ï¼ˆå›¾å…ƒï¼‰â†’`pages`ï¼ˆç¼–æ’ï¼‰ï¼›
- ä¸è¿”å›è¶… 500 è¡Œçš„å•æ–‡ä»¶ï¼›
- è‹¥ç¤ºä¾‹æ¶‰åŠ AntDï¼Œ**ç¦æ­¢**å†™ `.ant-*` è¦†ç›–ï¼›
- è‹¥ç¤ºä¾‹æ¶‰åŠ Radix/shadcnï¼Œéœ€ä¿ç•™ A11y å±æ€§ä¸é”®ç›˜äº¤äº’ã€‚

---

# Complete Prompt (English)

> **Role**: Brand-first Front-end Refactor Engineer
> **Stack**: **Tauri + React 18 + TypeScript + Tailwind CSS + Ant Design v5 + Radix UI + shadcn/ui + Motion** > **Goal**: Turn an AntD-native-looking app into a **modern, consumer-grade, brand-first UI** without losing heavy-widget productivity. Keep **modularity** (â‰¤500 lines per file).

## 0) Success Criteria

- **Brand consistency** via **CSS tokens**; unified colors/radius/shadows/density/typography.
- **Light components look premium**: implemented with **Radix + shadcn (source-in) + Tailwind skin**.
- **Heavy components stable**: AntD v5 for forms/tables/trees/date etc., **no `.ant-*` overrides**; align via tokens & container skin.
- **Unified motion** with **Motion** (enter 180â€“220ms, exit 120â€“160ms, hover 80â€“120ms, ease-out).
- **A11y & desktop** intact; Tauri-specific behaviors preserved.

## 1) Positioning

- **Tailwind (+ tokens) owns visuals** (brand system, layout, density). Use on containers & your own components.
- **Radix + shadcn** own **light components** (Button/Card/Tag/Tooltip/Dialog/Dropdown).
- **AntD v5** owns **heavy widgets** (Form/Table/Upload/Tree/DatePicker/Drawer/Steps). No internal overrides.
- **Motion** standardizes animation.

## 2) Tokens (SSOT)

Define in `styles/tokens.css`: `--brand, --bg-base, --bg-elevated, --text-1, --text-2, --radius, --shadow, --font, --control-h`. Tailwind reads them; AntD receives them via `ConfigProvider` with `darkAlgorithm`.

## 3) Structure & Modularity

Layered folders: `styles/`, `theme/`, `components/ui`, `components/adapters`, `components/patterns`, `components/layout`, `pages/`. Files â‰¤500 lines.

## 4) Rollout (fast track)

Phase 0: tokens + theme bridge, remove overrides.
Phase 1: ship light UI kit (Button/CardShell/TagPill/Dialog) + Motion; refactor high-exposure areas.
Phase 2: AntD adapters for heavy widgets; build patterns.
Phase 3: page audits (A11y, dark/compact, motion, perf); docs.

## 5) Do / Donâ€™t

**Do**: tokens drive visuals; Tailwind on containers/own components; Radix/shadcn for light UI; AntD for heavy widgets; unified Motion.
**Donâ€™t**: override `.ant-*` or use `!important`; add gradients/shadows/radius inside AntD internals; define ad-hoc colors.

## 6) Motion & A11y

Enter 180â€“220ms / Exit 120â€“160ms / Hover 80â€“120ms; ease-out. Focus ring visible; keyboard navigation preserved.

## 7) Tauri specifics

Custom titlebar drag region; DPI/typography checks; keep updater/tray/hotkeys; minimal allowlist & CSP.

## 8) Perf Budget

First-screen CSS <100KB; tree-shake AntD; virtualize large lists; route-split; lazy images; animation on transform/opacity only.

## 9) Deliverables & Page-by-Page Audit

Deliver tokens/config/bridge; light UI kit; AntD adapters; patterns; PRs with screenshots & motion clips.
Audit checklist: 0 overrides, light components in place, AntD via adapters, uniform motion, dark/compact OK, perf OK.

## 10) Code Output Policy

Every file starts with a file-path comment; Chinese comments welcomed for clarity; no single file >500 lines; no `.ant-*` overrides; keep A11y when using Radix/shadcn.
