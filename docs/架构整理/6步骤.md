è®©æˆ‘æŸ¥æ‰¾V3çš„Step 0-6æ™ºèƒ½ç­–ç•¥åˆ†æç³»ç»Ÿçš„å…·ä½“å®ç°æ–‡ä»¶ï¼š 

æœç´¢ `Step 0` (`**/src-tauri/src/**`)ã€20 ç»“æœçš„æ–‡æœ¬

è®©æˆ‘ç»§ç»­æŸ¥æ‰¾æ›´å¤šç›¸å…³æ–‡ä»¶ï¼š 

æœç´¢ `strategy_engine` (`**/src-tauri/src/**`)ã€10 ç»“æœçš„æ–‡æœ¬

æœç´¢ `StrategyDecisionEngine` (`**/src-tauri/src/**`)ã€4 ç»“æœçš„æ–‡æœ¬

ç°åœ¨è®©æˆ‘æ£€æŸ¥engineç›®å½•çš„ç»“æ„ï¼š 

è¯»å– [](file:///d%3A/rust/active-projects/%E5%B0%8F%E7%BA%A2%E4%B9%A6/employeeGUI/src-tauri/src/engine)

è®©æˆ‘æŸ¥çœ‹ä¸»è¦çš„ç­–ç•¥å¼•æ“æ–‡ä»¶ï¼š 

è¯»å– [](file:///d%3A/rust/active-projects/%E5%B0%8F%E7%BA%A2%E4%B9%A6/employeeGUI/src-tauri/src/engine/strategy_engine.rs#1-1)ï¼Œè¡Œ 1 åˆ° 51

è®©æˆ‘ç»§ç»­æŸ¥çœ‹ç­–ç•¥å¼•æ“çš„æ ¸å¿ƒæ–¹æ³•ï¼š 

æœç´¢ `analyze` (`**/src-tauri/src/engine/strategy_engine.rs`) æ–‡æœ¬ï¼Œ1 ä¸ªç»“æœ

è¯»å– [](file:///d%3A/rust/active-projects/%E5%B0%8F%E7%BA%A2%E4%B9%A6/employeeGUI/src-tauri/src/engine/strategy_engine.rs#300-300)ï¼Œè¡Œ 300 åˆ° 350

ç°åœ¨è®©æˆ‘æ£€æŸ¥strategy_plugin.rsï¼Œè¿™æ˜¯å…·ä½“ç­–ç•¥æ‰§è¡Œå™¨ï¼š 

è¯»å– [](file:///d%3A/rust/active-projects/%E5%B0%8F%E7%BA%A2%E4%B9%A6/employeeGUI/src-tauri/src/engine/strategy_plugin.rs#1-1)ï¼Œè¡Œ 1 åˆ° 61

è®©æˆ‘æŸ¥çœ‹åœ¨chain_engineä¸­æ˜¯å¦æœ‰å®é™…è°ƒç”¨æ™ºèƒ½ç­–ç•¥åˆ†æçš„å®ç°ï¼š 

æœç´¢ `execute_intelligent_analysis_from_scratch` (`**/src-tauri/src/exec/v3/chain_engine.rs`) æ–‡æœ¬ï¼Œæ— ç»“æœ

è¯»å– [](file:///d%3A/rust/active-projects/%E5%B0%8F%E7%BA%A2%E4%B9%A6/employeeGUI/src-tauri/src/exec/v3/chain_engine.rs#1660-1660)ï¼Œè¡Œ 1660 åˆ° 1710

è®©æˆ‘æŸ¥çœ‹å…·ä½“çš„æ­¥éª¤åˆ†æå®ç°ï¼š 

æœç´¢ `extract_all_interactive_elements_from_xml` (`**/src-tauri/src/exec/v3/chain_engine.rs`)ã€4 ç»“æœçš„æ–‡æœ¬

è¯»å– [](file:///d%3A/rust/active-projects/%E5%B0%8F%E7%BA%A2%E4%B9%A6/employeeGUI/src-tauri/src/exec/v3/chain_engine.rs#1750-1750)ï¼Œè¡Œ 1750 åˆ° 1850

ç°åœ¨è®©æˆ‘æŸ¥çœ‹å‰ç«¯çš„æ™ºèƒ½åˆ†æè°ƒç”¨ï¼š 

æœç´¢ `call_frontend_intelligent_analysis_with_context` (`**/src-tauri/src/exec/v3/chain_engine.rs`)ã€4 ç»“æœçš„æ–‡æœ¬

è®©æˆ‘æ£€æŸ¥å‰ç«¯æ™ºèƒ½åˆ†æçš„å®ç°ï¼š 

è¯»å– [](file:///d%3A/rust/active-projects/%E5%B0%8F%E7%BA%A2%E4%B9%A6/employeeGUI/src-tauri/src/exec/v3/chain_engine.rs#2125-2125)ï¼Œè¡Œ 2125 åˆ° 2175

ç°åœ¨è®©æˆ‘æ£€æŸ¥æ™ºèƒ½åˆ†ææœåŠ¡ï¼š 

è¯»å– [](file:///d%3A/rust/active-projects/%E5%B0%8F%E7%BA%A2%E4%B9%A6/employeeGUI/src-tauri/src/services/intelligent_analysis_service.rs#1-1)ï¼Œè¡Œ 1 åˆ° 51

## ğŸ¯ **Step 0-6æ™ºèƒ½ç­–ç•¥åˆ†æç³»ç»Ÿ** çš„åç«¯å®ç°æ–‡ä»¶æ€»ç»“

åŸºäºä»£ç åˆ†æï¼ŒV3çš„**Step 0-6æ™ºèƒ½ç­–ç•¥åˆ†æç³»ç»Ÿ**åœ¨åç«¯çš„å®ç°åˆ†å¸ƒåœ¨ä»¥ä¸‹æ–‡ä»¶ä¸­ï¼š

### **ğŸ“ æ ¸å¿ƒå¼•æ“æ–‡ä»¶ (Core Engine Files)**

#### **1. ä¸»æ§åˆ¶å™¨**
- **chain_engine.rs** (2438è¡Œ)
  - **ä½œç”¨**: V3æ‰§è¡Œå¼•æ“ä¸»æ§åˆ¶å™¨
  - **èŒè´£**: 
    - åˆ¤æ–­æ˜¯å¦è§¦å‘æ™ºèƒ½åˆ†æ (`should_trigger_intelligent_analysis`)
    - æ‰§è¡ŒStep 0-6åˆ†ææµç¨‹ (`execute_intelligent_analysis_from_scratch`) 
    - ç»Ÿç­¹æ•´ä¸ªæ™ºèƒ½ç­–ç•¥åˆ†æè¿‡ç¨‹

#### **2. ç­–ç•¥åˆ†æå¼•æ“**
- **strategy_engine.rs** (372è¡Œ)
  - **ä½œç”¨**: Step 0-6æ ¸å¿ƒç­–ç•¥åˆ†æå¼•æ“
  - **èŒè´£**: 
    - å…«ç»´åº¦è¯æ®ç»“æ„ (`Evidence`)
    - å•æ­¥åˆ†ææ ¸å¿ƒå‡½æ•° (`analyze_single_step`)
    - ç½®ä¿¡åº¦è®¡ç®—å’Œå€™é€‰è¯„åˆ†

#### **3. ç­–ç•¥æ‰§è¡Œå™¨**
- **strategy_plugin.rs** (313è¡Œ)
  - **ä½œç”¨**: å…·ä½“ç­–ç•¥æ‰§è¡Œå™¨ç³»ç»Ÿ
  - **èŒè´£**: 
    - Step 1-6å„ç­–ç•¥çš„å…·ä½“å®ç°
    - æ‰§è¡Œç¯å¢ƒç®¡ç†
    - åŒ¹é…ç»“æœé›†åˆå¤„ç†

### **ğŸ“ æœåŠ¡å±‚æ–‡ä»¶ (Service Layer Files)**

#### **4. æ™ºèƒ½åˆ†ææœåŠ¡**
- **intelligent_analysis_service.rs** (389è¡Œ)
  - **ä½œç”¨**: æ¡¥æ¥åç«¯V3ä¸å‰ç«¯æ™ºèƒ½ç­–ç•¥ç³»ç»Ÿ  
  - **èŒè´£**: 
    - æ™ºèƒ½åˆ†æè¯·æ±‚/å“åº”ç»“æ„
    - å‰ç«¯ç­–ç•¥å¼•æ“è°ƒç”¨æ¥å£
    - ç»“æœæ ¼å¼è½¬æ¢

### **ğŸ“ è¾…åŠ©å·¥å…·æ–‡ä»¶ (Utility Files)**

#### **5. XMLç´¢å¼•å™¨**  
- **xml_indexer.rs**
  - **ä½œç”¨**: UI XMLè§£æå’Œç´¢å¼•
  - **èŒè´£**: XMLå…ƒç´ æå–å’Œé¢„å¤„ç†

#### **6. ç­–ç•¥é—¨æ§**
- **gating.rs** 
  - **ä½œç”¨**: ç­–ç•¥æ‰§è¡Œçš„æ¡ä»¶åˆ¤æ–­å’Œé—¨æ§é€»è¾‘

### **ğŸ”„ Step 0-6 åˆ†ææµç¨‹æ˜ å°„**

```rust
// Step 0: è®¾å¤‡çŠ¶æ€è·å– (chain_engine.rs)
get_device_basic_info()

// Step 1: XMLå…ƒç´ è§£æ (chain_engine.rs + xml_indexer.rs) 
extract_all_interactive_elements_from_xml()

// Step 2: ç”¨æˆ·æ„å›¾åˆ†æ (chain_engine.rs)
analyze_user_intent_from_params()

// Step 3: æ™ºèƒ½è¯„åˆ† (strategy_engine.rs)
score_elements_intelligently()

// Step 4: ç­–ç•¥ç”Ÿæˆ (strategy_plugin.rs)
generate_strategy_candidates()

// Step 5: æœ€ä¼˜é€‰æ‹© (strategy_engine.rs)
select_optimal_strategies()

// Step 6: æ ¼å¼è½¬æ¢ (chain_engine.rs)
convert_strategies_to_v3_steps()
```

### **âš ï¸ å½“å‰é—®é¢˜**

ä»æ—¥å¿—åˆ†æçœ‹ï¼Œ**V3çš„æ™ºèƒ½åˆ†æè¢«é”™è¯¯è·³è¿‡**ï¼Œå¯¼è‡´ç›´æ¥ä½¿ç”¨Legacyå¼•æ“ã€‚è¿™æ˜¯å› ä¸ºï¼š

- `should_trigger_intelligent_analysis()` é€»è¾‘è¿‡äº"èªæ˜"
- é”™è¯¯è®¤ä¸ºæœ‰`targetText`å‚æ•°å°±æ˜¯"é«˜è´¨é‡æ­¥éª¤"  
- å®é™…ä¸Š`smart_selection`è¯·æ±‚æœ¬èº«å°±éœ€è¦Step 0-6åˆ†æ

**ä¿®å¤é‡ç‚¹**: ä¿®æ”¹ chain_engine.rs ä¸­çš„åˆ¤æ–­é€»è¾‘ï¼Œç¡®ä¿ `smart_selection` åŠ¨ä½œè§¦å‘å®Œæ•´çš„Step 0-6åˆ†ææµç¨‹ã€‚