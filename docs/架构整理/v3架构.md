让我搜索 V3 架构相关的文件和结构： 

搜索与 `**/v3*` 匹配的文件，20 匹配项

读取 [](file:///d%3A/rust/active-projects/%E5%B0%8F%E7%BA%A2%E4%B9%A6/employeeGUI/src-tauri/src/exec/v3/README.md)

读取 [](file:///d%3A/rust/active-projects/%E5%B0%8F%E7%BA%A2%E4%B9%A6/employeeGUI/src-tauri/src/exec/v3/mod.rs)

读取 [](file:///d%3A/rust/active-projects/%E5%B0%8F%E7%BA%A2%E4%B9%A6/employeeGUI/src-tauri/src/exec/v3/types.rs#1-1)，行 1 到 51

读取 [](file:///d%3A/rust/active-projects/%E5%B0%8F%E7%BA%A2%E4%B9%A6/employeeGUI/src-tauri/src/exec)

读取 [](file:///d%3A/rust/active-projects/%E5%B0%8F%E7%BA%A2%E4%B9%A6/employeeGUI/src-tauri/src/exec/v3)

读取 [](file:///d%3A/rust/active-projects/%E5%B0%8F%E7%BA%A2%E4%B9%A6/employeeGUI/src-tauri/src/exec/v3_new)

读取 [](file:///d%3A/rust/active-projects/%E5%B0%8F%E7%BA%A2%E4%B9%A6/employeeGUI/src-tauri/src/exec/v3_new/mod.rs)

搜索 `execute.*v3` (`**/src-tauri/src/main.rs`)、4 结果的文本

根据搜索结果，这是 **V3 架构的完整概览**：

## 🏗️ V3 架构总览

### 📁 目录结构

```
src-tauri/src/exec/
├── v3/                          # 📍 当前稳定的 V3 架构
│   ├── mod.rs                   # 模块入口
│   ├── README.md                # 📖 V3 完整文档
│   ├── types.rs                 # 🎯 核心类型定义（请求/响应/上下文）
│   ├── events.rs                # 📡 事件/日志模型
│   ├── commands.rs              # 🔌 Tauri 命令导出
│   ├── single_step.rs           # 🎯 单步智能执行
│   ├── chain_engine.rs          # ⛓️ 智能自动链（多步执行 + 策略分析）
│   └── static_exec.rs           # 🧪 静态策略执行（无需设备）
└── v3_new/                      # 🚧 未来演进架构（进行中）
    ├── mod.rs
    ├── types/                   # 新的规格/事件/结果类型
    │   ├── specs.rs
    │   ├── events.rs
    │   ├── results.rs
    │   └── context.rs
    └── core/
        └── executor.rs          # 新执行器（演进方向）
```

## 🎯 V3 核心能力

### **三大执行模式**
1. **单步执行** (single_step.rs): 智能单步操作
2. **链式执行** (chain_engine.rs): 智能自动链 + Step 0-6 策略分析
3. **静态执行** (static_exec.rs): 无设备策略验证

### **Tauri 命令接口**
```rust
// 在 main.rs 中注册的 V3 命令
execute_single_step_test_v3    // 单步智能执行
execute_chain_test_v3          // 智能自动链（主要）
execute_static_strategy_test_v3 // 静态策略执行
```

## 🔄 V2 vs V3 对比

| 维度 | V2 | V3 |
|---|---|---|
| **架构位置** | run_step_v2.rs | v3 |
| **执行粒度** | 单步为主 | 单步 + **链式（主要）** |
| **策略分析** | 简化版 | **完整 Step 0-6 分析** |
| **事件系统** | 基础 | **结构化事件，便于回放** |
| **数据传输** | 普通结构 | **支持 by-ref，减少拷贝** |
| **静态能力** | 无 | **有（static_exec）** |
| **类型系统** | 紧耦合 | **模块化，易扩展** |

## 🎯 V3 执行流程

### **链式执行** (主要)
```
前端调用 execute_chain_test_v3 →
chain_engine.rs 处理多步骤 →
Step 0-6 策略分析 →
事件流记录 →
返回执行结果
```

### **单步执行**
```
解析 Step → 生成候选元素 →
策略打分（文本/属性/位置/上下文） →
选择最优候选并执行动作 →
执行后验证与回退策略
```

## 🚀 前端集成

**推荐使用方式：**
```typescript
// 智能自动链（推荐）
const result = await invoke('execute_chain_test_v3', {
  deviceId: 'emulator-5554',
  steps: [/* 多个 Step */],
  threshold: 0.72,             // 置信度阈值
  dryRun: false,               // 仅分析不执行
  options: { byRef: true }     // by-ref 模式，避免大对象拷贝
});
```

## 📋 V3 关键特性

1. **完整策略分析链路** - Step 0-6 策略分析（匹配、验证、容错、回退）
2. **事件驱动** - 结构化事件系统，前端可实时追踪执行进度
3. **by-ref 模式** - 减少大对象拷贝，提升性能
4. **静态执行** - 无需连接设备即可验证策略
5. **模块化设计** - 清晰的类型系统和扩展性

## 🔮 未来发展 (v3_new)

`v3_new/` 目录包含正在开发的下一代架构：
- 更统一的类型系统
- 新的执行器设计
- 解决类型不匹配和接口不一致问题

V3 架构相比 V2 提供了更强大、更灵活的执行能力，特别是在**智能自动链**和**策略分析**方面有显著提升！