先给你一个全景图：步骤卡片是基于统一的数据模型渲染出来的 UI 组件，容器按顺序把每个步骤映射成一张可拖拽的卡片，卡片的“长相”和“行为”由步骤类型 step_type 和样式映射表共同决定。

## 步骤卡片是怎么“创建/渲染”的

- 数据模型

  - 每个步骤是一个 `SmartScriptStep`：`{ id, name, step_type, description, parameters, enabled }`。
  - 新增步骤时，前端创建一个 `SmartScriptStep` 对象，设置默认文案/参数，然后把它加入步骤列表。

- 渲染链路

  - 容器：`DraggableStepsContainer.tsx` 遍历步骤列表，逐个渲染 `DraggableStepCard`（中间通常通过一个轻薄的 wrapper 传参）。
  - 卡片：DraggableStepCard.tsx 内部用 dnd-kit 的 `useSortable` 接管拖拽，卡片本体使用 AntD 的 `Card`。
  - 结构模块化：
    - 头部 `StepCardHeader`：标题内联编辑、类型标签、启用开关、测试按钮、删除/编辑、循环次数按钮、（对 smart_scroll）滚动参数控制等。
    - 主体 `StepCardBody`：描述内联编辑、循环内联控制、策略区域（匹配策略/批量匹配）、联系人相关操作、循环强调条。
      - 主体进一步细分：
        - `AccentBars`：循环卡的顶部/左侧强调条
        - `StrategyArea`：策略控件组合
          - `StrategyControlsBlock`（策略编辑）
          - `BatchMatchBlock`（批量匹配开关）
        - `ContactActions`：联系人导入/生成 VCF 的操作区
  - 文案/图标/分类：来自 `SMART_ACTION_CONFIGS`（常量映射）。
  - 样式映射：`getStepTypeStyle(step.step_type)` 返回该类型的视觉风格（见下文“样式有多少种”）。

- 拖拽与动效（简要）
  - 用 dnd-kit 的 transform/transition 实现位移动效；容器提供 DragOverlay“拖拽幽灵”提高流畅度。
  - 支持“减少动态效果”系统偏好：会自动弱化旋转/缩放/过渡。

## 一共有多少种“步骤卡片样式”

样式定义集中在 stepTypeStyles.ts。当前显式定义了 8 种样式，另有 1 个兜底样式：

- loop_start
  - 主题：蓝色渐变背景、粗边框、强调标题色
  - 专属：顶部/左侧强调条、头部拖柄样式、拖拽态阴影/环形描边
- loop_end
  - 与 loop_start 一致的蓝色主题与强调条
- smart_click
  - 绿色系：`bg-green-50`、左侧色条、hover 阴影、绿色标题
- smart_input
  - 橙色系：`bg-orange-50`、左侧色条、hover 阴影、橙色标题
- smart_scroll
  - 紫色系：`bg-purple-50`、左侧色条、hover 阴影、紫色标题
- smart_verify
  - 蓝色系（geekblue）：`bg-blue-50`、左侧色条、hover 阴影、蓝色标题
- smart_extract
  - 红色系：`bg-red-50`、左侧色条、hover 阴影、红色标题
- smart_wait
  - 青色系：`bg-cyan-50`、左侧色条、hover 阴影、青色标题
- 兜底样式（fallback）
  - 无匹配类型时使用基础样式：默认 Tag 颜色、`hover:shadow-sm`、`ring-blue-300`

每种样式包含的关键字段与含义：

- tagColor：类型标签颜色
- cardClass：卡片底色/边框/圆角等
- ringClass：拖拽时的环形描边颜色
- hoverClass：悬停时的阴影效果
- titleTextClass/titleBarClass：标题文本与标题栏的额外样式
- extraCardClass/draggingCardClass：卡片的额外/拖拽态样式（循环卡会使用）
- headerHandleClass/iconPillClass：头部拖柄与图标药丸样式（循环卡会使用）
- topAccentClass/leftAccentClass：循环卡片顶部/左侧强调条
- titleTagClass：标题旁类型 Tag 的胶囊样式（循环卡会使用）

决定使用哪种样式的规则很简单：

- 以 `step.step_type` 作为键，从 `stepTypeStyles` 中取；如果没有命中，走兜底 base 样式。
- 循环类（loop_start/loop_end）还会叠加 `loopTheme.css` 里的阴影/强调条过渡，拖拽时强调条透明度也会按需降低。

如果你需要，我也可以把这 8 种样式渲染出来做一张“样式对照表”（纯前端页面/Storybook 风格）用于设计与联调。
