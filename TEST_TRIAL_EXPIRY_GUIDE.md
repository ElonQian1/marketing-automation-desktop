# è¯•ç”¨æœŸè¿‡æœŸåŠŸèƒ½æµ‹è¯•æŒ‡å—

## å¿«é€Ÿæµ‹è¯•æ­¥éª¤

### å‡†å¤‡å·¥ä½œ
1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š`npm run dev`
2. åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€åº”ç”¨
3. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆæŒ‰ F12ï¼‰

---

## æµ‹è¯•åœºæ™¯ 1ï¼šè¯•ç”¨æœŸè­¦å‘Šå¼¹çª—

**ç›®æ ‡**ï¼šæµ‹è¯•å½“è¯•ç”¨æœŸè¿˜å‰© â‰¤3 å¤©æ—¶ï¼Œä¼šæ˜¾ç¤ºè­¦å‘Šå¼¹çª—

### æ­¥éª¤ï¼š

1. **ç™»å½•æµ‹è¯•è´¦æˆ·**
   - ç”¨æˆ·åï¼š`test`
   - å¯†ç ï¼š`test123`

2. **æ‰“å¼€æµè§ˆå™¨ Console**ï¼ˆå¼€å‘è€…å·¥å…· â†’ Console æ ‡ç­¾ï¼‰

3. **æ‰§è¡Œä»¥ä¸‹ä»£ç **ï¼ˆå¤åˆ¶ç²˜è´´åæŒ‰å›è½¦ï¼‰ï¼š
```javascript
// è®¾ç½®è¯•ç”¨æœŸè¿˜å‰© 2 å¤©
const authStorage = JSON.parse(localStorage.getItem('auth-storage') || '{}');
const twoDaysLater = new Date(Date.now() + 2 * 24 * 60 * 60 * 1000);
authStorage.state.user.expiresAt = twoDaysLater.toISOString();
localStorage.setItem('auth-storage', JSON.stringify(authStorage));
console.log('âœ… å·²è®¾ç½®è¯•ç”¨æœŸè¿˜å‰© 2 å¤©ï¼Œè¯·åˆ·æ–°é¡µé¢');
```

4. **åˆ·æ–°é¡µé¢**ï¼ˆæŒ‰ F5ï¼‰

5. **é¢„æœŸç»“æœ**ï¼š
   - âœ… çœ‹åˆ°é»„è‰²è­¦å‘Šå¼¹çª—ï¼š"è¯•ç”¨æœŸå³å°†åˆ°æœŸ"
   - âœ… æ˜¾ç¤ºå‰©ä½™å¤©æ•°ï¼š2 å¤©
   - âœ… æ˜¾ç¤ºè¿›åº¦æ¡ï¼ˆæ©™çº¢è‰²ï¼‰
   - âœ… å³ä¸Šè§’ç”¨æˆ·ä¸‹æ‹‰èœå•æ˜¾ç¤º"è¯•ç”¨æœŸï¼š2 å¤©"

---

## æµ‹è¯•åœºæ™¯ 2ï¼šè¯•ç”¨æœŸå·²è¿‡æœŸ

**ç›®æ ‡**ï¼šæµ‹è¯•å½“è¯•ç”¨æœŸè¿‡æœŸåï¼Œå¼ºåˆ¶é€€å‡ºå¹¶æ˜¾ç¤ºè¿‡æœŸé¡µé¢

### æ­¥éª¤ï¼š

1. **ç™»å½•æµ‹è¯•è´¦æˆ·**ï¼ˆå¦‚æœå·²é€€å‡ºï¼‰
   - ç”¨æˆ·åï¼š`test`
   - å¯†ç ï¼š`test123`

2. **æ‰“å¼€æµè§ˆå™¨ Console**

3. **æ‰§è¡Œä»¥ä¸‹ä»£ç **ï¼š
```javascript
// è®¾ç½®è¯•ç”¨æœŸä¸ºæ˜¨å¤©è¿‡æœŸ
const authStorage = JSON.parse(localStorage.getItem('auth-storage') || '{}');
const yesterday = new Date(Date.now() - 24 * 60 * 60 * 1000);
authStorage.state.user.expiresAt = yesterday.toISOString();
localStorage.setItem('auth-storage', JSON.stringify(authStorage));
console.log('âœ… å·²è®¾ç½®è¯•ç”¨æœŸä¸ºæ˜¨å¤©è¿‡æœŸï¼Œè¯·åˆ·æ–°é¡µé¢');
```

4. **åˆ·æ–°é¡µé¢**

5. **é¢„æœŸç»“æœ**ï¼š
   - âœ… çœ‹åˆ°ç´«è‰²æ¸å˜èƒŒæ™¯çš„è¿‡æœŸé¡µé¢
   - âœ… æ˜¾ç¤ºçº¢è‰²è­¦å‘Šå›¾æ ‡å’Œ"è¯•ç”¨æœŸå·²è¿‡æœŸ"æ ‡é¢˜
   - âœ… æœ‰"è¿”å›ç™»å½•"æŒ‰é’®
   - âœ… ç‚¹å‡»æŒ‰é’®åè·³è½¬åˆ°ç™»å½•é¡µ

---

## æµ‹è¯•åœºæ™¯ 3ï¼šç”¨æˆ·ä¸‹æ‹‰èœå•æ˜¾ç¤ºè¯•ç”¨æœŸ

**ç›®æ ‡**ï¼šæµ‹è¯•å³ä¸Šè§’ç”¨æˆ·èœå•æ˜¾ç¤ºè¯•ç”¨æœŸå€’è®¡æ—¶

### æ­¥éª¤ï¼š

1. **ç™»å½•æµ‹è¯•è´¦æˆ·**
   - ç”¨æˆ·åï¼š`test`
   - å¯†ç ï¼š`test123`

2. **æŸ¥çœ‹å³ä¸Šè§’**
   - ç‚¹å‡»ç”¨æˆ·å¤´åƒï¼ˆæ©™è‰²åœ†å½¢ï¼‰

3. **é¢„æœŸç»“æœ**ï¼š
   - âœ… çœ‹åˆ°ç”¨æˆ·åï¼štest
   - âœ… çœ‹åˆ°æ©™è‰²"è¯•ç”¨"æ ‡ç­¾
   - âœ… çœ‹åˆ°é‚®ç®±ï¼štest@example.com
   - âœ… çœ‹åˆ°è¯•ç”¨æœŸå€’è®¡æ—¶ï¼šğŸ•’ è¯•ç”¨æœŸï¼šX å¤©

---

## å¸¸ç”¨æµ‹è¯•å‘½ä»¤ï¼ˆConsole ä¸­æ‰§è¡Œï¼‰

### 1ï¸âƒ£ æŸ¥çœ‹å½“å‰è¯•ç”¨æœŸçŠ¶æ€
```javascript
const authStorage = JSON.parse(localStorage.getItem('auth-storage') || '{}');
const expiryDate = new Date(authStorage.state.user.expiresAt);
const daysLeft = Math.ceil((expiryDate - Date.now()) / (1000*60*60*24));
console.log('åˆ°æœŸæ—¶é—´:', expiryDate.toLocaleString('zh-CN'));
console.log('å‰©ä½™å¤©æ•°:', daysLeft);
```

### 2ï¸âƒ£ é‡ç½®ä¸ºå®Œæ•´çš„ 15 å¤©è¯•ç”¨æœŸ
```javascript
const authStorage = JSON.parse(localStorage.getItem('auth-storage') || '{}');
const fifteenDaysLater = new Date(Date.now() + 15 * 24 * 60 * 60 * 1000);
authStorage.state.user.expiresAt = fifteenDaysLater.toISOString();
localStorage.setItem('auth-storage', JSON.stringify(authStorage));
console.log('âœ… å·²é‡ç½®ä¸º 15 å¤©è¯•ç”¨æœŸï¼Œè¯·åˆ·æ–°é¡µé¢');
```

### 3ï¸âƒ£ æ¸…é™¤è®¤è¯æ•°æ®ï¼ˆè¿”å›ç™»å½•é¡µï¼‰
```javascript
localStorage.removeItem('auth-storage');
console.log('âœ… å·²æ¸…é™¤è®¤è¯æ•°æ®ï¼Œè¯·åˆ·æ–°é¡µé¢');
```

---

## å¿«æ·æµ‹è¯•è„šæœ¬

ä¹Ÿå¯ä»¥ç›´æ¥åœ¨ Console ä¸­åŠ è½½å®Œæ•´çš„æµ‹è¯•å·¥å…·ï¼š

```javascript
// åŠ è½½æµ‹è¯•å·¥å…·
const script = document.createElement('script');
script.src = '/scripts/test-trial-expiry.js';
document.head.appendChild(script);

// ç„¶åå°±å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š
// - setTrialExpiringSoon()  // è®¾ç½®è¿˜å‰©2å¤©
// - setTrialExpired()        // è®¾ç½®å·²è¿‡æœŸ
// - resetTrialPeriod()       // é‡ç½®ä¸º15å¤©
// - checkTrialStatus()       // æŸ¥çœ‹çŠ¶æ€
// - clearAuth()              // æ¸…é™¤è®¤è¯
```

---

## æ³¨æ„äº‹é¡¹

1. **æ¯æ¬¡ä¿®æ”¹ localStorage åéƒ½éœ€è¦åˆ·æ–°é¡µé¢**æ‰èƒ½çœ‹åˆ°æ•ˆæœ
2. **ç®¡ç†å‘˜è´¦æˆ·ï¼ˆadminï¼‰æ²¡æœ‰è¯•ç”¨æœŸé™åˆ¶**ï¼Œä¸ä¼šè§¦å‘è¿‡æœŸé€»è¾‘
3. **æµ‹è¯•å®Œæˆå**ï¼Œå¯ä»¥ç”¨ `clearAuth()` æ¸…é™¤æ•°æ®é‡æ–°å¼€å§‹
4. **å¼€å‘ç¯å¢ƒ**ä¸­å¯ä»¥ä»»æ„ä¿®æ”¹è¿‡æœŸæ—¶é—´ï¼Œ**ç”Ÿäº§ç¯å¢ƒ**åˆ™ä¼šæŒ‰çœŸå®æ—¶é—´è®¡ç®—

---

## å®Œæ•´æµ‹è¯•æµç¨‹ï¼ˆæ¨èï¼‰

```bash
# 1. å¯åŠ¨åº”ç”¨
npm run dev

# 2. æµè§ˆå™¨ä¸­ï¼š
#    - ç™»å½• test/test123
#    - æ‰“å¼€ Console (F12)

# 3. ä¾æ¬¡æµ‹è¯•ï¼š

# æµ‹è¯•è­¦å‘Šï¼ˆ2å¤©ï¼‰
const authStorage = JSON.parse(localStorage.getItem('auth-storage') || '{}');
authStorage.state.user.expiresAt = new Date(Date.now() + 2*24*60*60*1000).toISOString();
localStorage.setItem('auth-storage', JSON.stringify(authStorage));
location.reload();  // è‡ªåŠ¨åˆ·æ–°

# æµ‹è¯•è¿‡æœŸ
const authStorage = JSON.parse(localStorage.getItem('auth-storage') || '{}');
authStorage.state.user.expiresAt = new Date(Date.now() - 24*60*60*1000).toISOString();
localStorage.setItem('auth-storage', JSON.stringify(authStorage));
location.reload();  // è‡ªåŠ¨åˆ·æ–°

# é‡ç½®
localStorage.removeItem('auth-storage');
location.reload();  // è¿”å›ç™»å½•é¡µ
```

---

## é¢„æœŸç•Œé¢æˆªå›¾è¯´æ˜

### è­¦å‘Šå¼¹çª—ï¼ˆå‰©ä½™ â‰¤3 å¤©ï¼‰
- é»„è‰²æ—¶é’Ÿå›¾æ ‡
- æ ‡é¢˜ï¼š"è¯•ç”¨æœŸå³å°†åˆ°æœŸ"
- æ˜¾ç¤ºå‰©ä½™å¤©æ•°ï¼ˆå¤§å·æ©™è‰²æ•°å­—ï¼‰
- è¿›åº¦æ¡ï¼ˆæ©™çº¢æ¸å˜ï¼‰
- æç¤ºæ–‡å­—

### è¿‡æœŸé¡µé¢
- ç´«è‰²æ¸å˜èƒŒæ™¯
- ç™½è‰²å¡ç‰‡å±…ä¸­
- çº¢è‰²è­¦å‘Šå›¾æ ‡ï¼ˆå¤§ï¼‰
- "è¯•ç”¨æœŸå·²è¿‡æœŸ"æ ‡é¢˜
- æç¤ºè”ç³»ç®¡ç†å‘˜
- è“è‰²"è¿”å›ç™»å½•"æŒ‰é’®

### ç”¨æˆ·ä¸‹æ‹‰èœå•
- å¤´åƒï¼ˆæ©™è‰²èƒŒæ™¯ï¼‰
- ç”¨æˆ·å + æ©™è‰²"è¯•ç”¨"æ ‡ç­¾
- é‚®ç®±
- ğŸ•’ è¯•ç”¨æœŸï¼šX å¤©ï¼ˆæ©™è‰²æ–‡å­—ï¼‰
- é€€å‡ºç™»å½•æŒ‰é’®

---

## å¸¸è§é—®é¢˜

**Q: ä¸ºä»€ä¹ˆåˆ·æ–°åæ²¡æœ‰çœ‹åˆ°è¿‡æœŸé¡µé¢ï¼Ÿ**  
A: ç¡®ä¿åœ¨ localStorage ä¸­æ­£ç¡®è®¾ç½®äº†è¿‡å»çš„æ—¥æœŸï¼Œå¹¶ä¸”ç”¨çš„æ˜¯ `test` è´¦æˆ·ï¼ˆä¸æ˜¯ `admin`ï¼‰

**Q: å¦‚ä½•æµ‹è¯•æ­£å¥½å‰©ä½™ 3 å¤©çš„è¾¹ç•Œæƒ…å†µï¼Ÿ**  
A: å°†ä»£ç ä¸­çš„ `2` æ”¹ä¸º `3`ï¼š`+ 3 * 24 * 60 * 60 * 1000`

**Q: ç®¡ç†å‘˜è´¦æˆ·ä¼šè¿‡æœŸå—ï¼Ÿ**  
A: ä¸ä¼šï¼Œåªæœ‰è§’è‰²ä¸º `trial` çš„è´¦æˆ·æ‰ä¼šæ£€æŸ¥è¯•ç”¨æœŸ

**Q: å¦‚ä½•ä¿®æ”¹è¯•ç”¨æœŸå¤©æ•°ï¼Ÿ**  
A: åœ¨ `authStore.ts` ä¸­ä¿®æ”¹ `15 * 24 * 60 * 60 * 1000` ä¸­çš„ `15`
