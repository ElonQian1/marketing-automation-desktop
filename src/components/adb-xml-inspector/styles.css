/**
 * ADB XML检查器样式
 * 适配项目暗黑主题，解决白色背景和文字可见性问题
 */

/* 主容器样式 - 支持所有使用场景 */
.xml-inspector-in-modal,
.adb-xml-inspector {
  /* 确保根容器有正确的暗黑主题背景和文字颜色 */
  background: var(--dark-bg-primary, #1a1a1a) !important;
  color: var(--dark-text-primary, #ffffff) !important;
  
  /* 所有文本元素都应该是白色 */
  color: var(--dark-text-primary, #ffffff) !important;
  
  /* 覆盖所有内联样式的背景色 */
  * {
    color: inherit !important;
  }
  
  /* 修复白色背景问题 */
  div[style*="background: rgb(245, 245, 245)"],
  div[style*="background-color: rgb(245, 245, 245)"],
  div[style*="background: #f5f5f5"],
  div[style*="background-color: #f5f5f5"] {
    background: var(--dark-bg-tertiary, #1f1f1f) !important;
    color: var(--dark-text-primary, #ffffff) !important;
    border-color: var(--dark-border-primary, #404040) !important;
  }
  
  /* 修复浅蓝色背景的选中状态 */
  div[style*="background-color: rgb(240, 249, 255)"],
  div[style*="background: rgb(240, 249, 255)"],
  div[style*="background-color: #f0f9ff"],
  div[style*="background: #f0f9ff"] {
    background: rgba(24, 144, 255, 0.2) !important;
    color: var(--dark-text-primary, #ffffff) !important;
    border-color: #1890ff !important;
  }
  
  /* 修复灰色边框 */
  div[style*="border: 1px solid rgb(217, 217, 217)"],
  div[style*="border-color: rgb(217, 217, 217)"],
  div[style*="border: 1px solid #d9d9d9"],
  div[style*="border-color: #d9d9d9"] {
    border-color: var(--dark-border-primary, #404040) !important;
  }
  
  .ant-card {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    border: 1px solid var(--dark-border-primary, #404040) !important;
    margin-bottom: 8px;
    background: var(--dark-bg-card, #2d2d2d) !important;
  }
  
  .ant-card-head {
    background: var(--dark-bg-tertiary, #1f1f1f) !important;
    border-bottom: 1px solid var(--dark-border-primary, #404040) !important;
    padding: 6px 12px;
    min-height: auto;
  }
  
  .ant-card-head-title {
    padding: 2px 0;
    font-size: 12px;
    font-weight: 500;
    color: var(--dark-text-primary, #ffffff) !important;
  }
  
  /* 标题栏内的图标 */
  .ant-card-head .anticon {
    color: var(--dark-success-border, #52c41a) !important;
  }
  
  /* 标题栏内的文本 */
  .ant-card-head .ant-space-item {
    color: var(--dark-text-primary, #ffffff) !important;
  }
  
  /* 标题栏内的按钮 */
  .ant-card-head .ant-btn {
    background: var(--dark-bg-secondary, #2d2d2d) !important;
    border-color: var(--dark-border-primary, #404040) !important;
    color: var(--dark-text-primary, #ffffff) !important;
  }
  
  .ant-card-head .ant-btn:hover {
    background: var(--dark-border-focus, #1890ff) !important;
    border-color: var(--dark-border-focus, #1890ff) !important;
    color: var(--dark-text-primary, #ffffff) !important;
  }
  
  .ant-card-head .ant-btn .anticon {
    color: inherit !important;
  }
  
  .ant-card-body {
    padding: 8px 12px;
    background: var(--dark-bg-card, #2d2d2d) !important;
    color: var(--dark-text-primary, #ffffff) !important;
  }
  
  /* 紧凑间距 */
  .ant-space-item {
    margin-bottom: 0;
  }
  
  /* 工具栏优化 */
  .ant-btn-sm {
    font-size: 11px;
    height: 24px;
    padding: 0 6px;
  }
  
  /* 输入框优化 */
  .ant-input-sm {
    font-size: 11px;
    background: var(--dark-bg-secondary, #2d2d2d) !important;
    border-color: var(--dark-border-primary, #404040) !important;
    color: var(--dark-text-primary, #ffffff) !important;
  }
  
  .ant-input-sm:hover {
    border-color: var(--dark-border-focus, #1890ff) !important;
  }
  
  .ant-input-sm:focus {
    border-color: var(--dark-border-focus, #1890ff) !important;
    box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2) !important;
  }
  
  .ant-input-sm::placeholder {
    color: var(--dark-text-disabled, #999999) !important;
  }
  
  /* 文本区域优化 */
  .ant-input {
    font-size: 11px;
    line-height: 1.3;
    background: var(--dark-bg-secondary, #2d2d2d) !important;
    border-color: var(--dark-border-primary, #404040) !important;
    color: var(--dark-text-primary, #ffffff) !important;
  }
  
  .ant-input:hover {
    border-color: var(--dark-border-focus, #1890ff) !important;
  }
  
  .ant-input:focus {
    border-color: var(--dark-border-focus, #1890ff) !important;
    box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2) !important;
  }
  
  .ant-input::placeholder {
    color: var(--dark-text-disabled, #999999) !important;
  }
  
  /* 节点树样式优化 */
  .select-text {
    color: var(--dark-text-primary, #ffffff) !important;
  }
  
  .select-text .group {
    transition: all 0.15s ease;
    border-radius: 3px;
    color: var(--dark-text-primary, #ffffff) !important;
  }
  
  .select-text .group:hover {
    background: var(--dark-bg-hover, #333333) !important;
  }
  
  /* 选中状态 */
  .select-text .selected-node {
    background: rgba(24, 144, 255, 0.1) !important;
    border: 1px solid var(--dark-border-focus, #1890ff) !important;
    color: var(--dark-text-primary, #ffffff) !important;
  }
  
  /* Badge样式 */
  .ant-tag {
    font-size: 9px;
    padding: 0 3px;
    line-height: 16px;
    margin: 0 2px;
    border-radius: 2px;
    background: var(--dark-bg-secondary, #2d2d2d) !important;
    border-color: var(--dark-border-primary, #404040) !important;
    color: var(--dark-text-primary, #ffffff) !important;
  }
  
  .ant-tag-green {
    background: var(--dark-success-bg, #0f4429) !important;
    border-color: var(--dark-success-border, #52c41a) !important;
    color: var(--dark-success-border, #52c41a) !important;
  }
  
  .ant-tag-blue {
    background: var(--dark-info-bg, #0f3460) !important;
    border-color: var(--dark-info-border, #1890ff) !important;
    color: var(--dark-info-border, #1890ff) !important;
  }
  
  /* 网格布局优化 */
  .grid {
    gap: 6px;
  }
  
  /* 预览区域优化 */
  .relative.bg-gray-50,
  div[style*="background: rgb(250, 250, 250)"],
  div[style*="background-color: rgb(250, 250, 250)"],
  div[style*="background: #fafafa"],
  div[style*="background-color: #fafafa"] {
    background: var(--dark-bg-tertiary, #1f1f1f) !important;
    border: 1px solid var(--dark-border-primary, #404040) !important;
    border-radius: 4px;
    color: var(--dark-text-primary, #ffffff) !important;
  }
  
  /* Typography文本组件 */
  .ant-typography {
    color: var(--dark-text-primary, #ffffff) !important;
  }
  
  /* 按钮组件优化 */
  .ant-btn {
    background: var(--dark-bg-secondary, #2d2d2d) !important;
    border-color: var(--dark-border-primary, #404040) !important;
    color: var(--dark-text-primary, #ffffff) !important;
  }
  
  .ant-btn:hover {
    background: var(--dark-bg-hover, #333333) !important;
    border-color: var(--dark-border-focus, #1890ff) !important;
    color: var(--dark-text-primary, #ffffff) !important;
  }
  
  .ant-btn-text {
    background: transparent !important;
    border: none !important;
    color: var(--dark-text-secondary, #e6e6e6) !important;
  }
  
  .ant-btn-text:hover {
    background: var(--dark-bg-hover, #333333) !important;
    color: var(--dark-text-primary, #ffffff) !important;
  }
  
  /* 所有子元素文本颜色 */
  * {
    color: inherit;
  }
  
  /* 预览区域的高亮元素 */
  .preview-highlight {
    border-color: var(--dark-success-border, #52c41a) !important;
    box-shadow: 0 0 0 2px rgba(82, 196, 26, 0.2) !important;
  }
  
  /* Alert组件优化 */
  .ant-alert {
    background: var(--dark-bg-secondary, #2d2d2d) !important;
    border-color: var(--dark-border-primary, #404040) !important;
    color: var(--dark-text-primary, #ffffff) !important;
  }
  
  .ant-alert-info {
    background: var(--dark-info-bg, #0f3460) !important;
    border-color: var(--dark-info-border, #1890ff) !important;
  }
  
  .ant-alert-message,
  .ant-alert-description {
    color: var(--dark-text-primary, #ffffff) !important;
  }
  
  /* 滚动条样式 */
  ::-webkit-scrollbar {
    width: 4px;
    height: 4px;
  }
  
  ::-webkit-scrollbar-track {
    background: var(--dark-bg-secondary, #2d2d2d);
    border-radius: 2px;
  }
  
  ::-webkit-scrollbar-thumb {
    background: var(--dark-border-primary, #404040);
    border-radius: 2px;
  }
  
  ::-webkit-scrollbar-thumb:hover {
    background: var(--dark-border-secondary, #333333);
  }
  
  /* 响应式优化 */
  @media (max-width: 1200px) {
    .ant-card-body {
      padding: 6px 8px;
    }
    
    .ant-btn-sm {
      font-size: 10px;
      height: 22px;
      padding: 0 5px;
    }
  }
}