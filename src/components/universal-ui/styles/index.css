/**
 * Universal UI 独立样式系统入口
 * 
 * 这是一个完全独立的样式系统，专门为 Universal UI 组件设计
 * 使用最高优先级的 CSS 层确保不被主应用样式覆盖
 * 
 * 功能特点：
 * - 完全独立的 CSS 变量命名空间 (--uui-*)
 * - 6 层 CSS 优先级系统
 * - 完整的样式重置和隔离
 * - 响应式设计支持
 * - 高性能动画和交互
 * 
 * 使用方法：
 * 1. 在 UniversalPageFinderModal 组件中导入此文件
 * 2. 确保 Modal 容器使用 'universal-page-finder' 类名
 * 3. 所有内部组件将自动获得独立样式
 * 
 * @author GitHub Copilot
 * @version 2.0.0
 * @created 2025-01-26
 */

/* 导入所有样式模块 - 按优先级顺序 */
@import './foundation.css';   /* 基础设施：CSS 层、变量、重置 */
@import './modal.css';        /* Modal 专属：遮罩、容器、头部、底部 */
@import './components.css';   /* 组件库：按钮、输入、表格、Grid 等 */
@import './themes.css';       /* 主题系统：动画、状态、交互效果 */

/* =============================================================================
   样式系统验证和调试
   ============================================================================= */

@layer universal-overrides {
  /* 验证样式系统是否正确加载 */
  .universal-page-finder {
    /* 确保根容器可见 */
    position: relative !important;
    z-index: var(--uui-z-modal) !important;
    
    /* 添加系统标识（开发模式下可见） */
    &::before {
      content: "Universal UI v2.0 - Independent Style System Loaded" !important;
      position: fixed !important;
      top: 10px !important;
      right: 10px !important;
      background: var(--uui-accent-blue) !important;
      color: white !important;
      padding: 4px 8px !important;
      border-radius: 4px !important;
      font-size: 10px !important;
      font-weight: bold !important;
      z-index: 999999 !important;
      opacity: 0 !important;
      pointer-events: none !important;
      
      /* 开发模式下显示 */
      .debug-mode & {
        opacity: 1 !important;
      }
    }
  }
  
  /* 强制样式优先级验证 */
  .universal-page-finder .style-priority-test {
    background: var(--uui-accent-green) !important;
    color: white !important;
    padding: var(--uui-space-sm) !important;
    border-radius: var(--uui-radius-md) !important;
    
    &::after {
      content: " ✓ Universal UI Styles Active" !important;
      font-weight: bold !important;
    }
  }
}

/* =============================================================================
   主应用样式隔离和保护
   ============================================================================= */

@layer universal-overrides {
  /* 防止主应用样式污染 Universal UI */
  .universal-page-finder {
    /* 完全重置继承的样式 */
    all: unset !important;
    
    /* 重新设置必要的显示属性 */
    display: block !important;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    z-index: var(--uui-z-modal) !important;
    
    /* 应用我们的样式系统 */
    font-family: var(--uui-font-family) !important;
    font-size: var(--uui-font-size-base) !important;
    line-height: var(--uui-line-height-base) !important;
    color: var(--uui-text-secondary) !important;
    
    /* 确保所有子元素也被保护 */
    * {
      box-sizing: border-box !important;
    }
    
    /* 防止外部样式覆盖 */
    &, & * {
      /* 重置可能被污染的样式 */
      background: unset !important;
      border: unset !important;
      color: unset !important;
      margin: unset !important;
      padding: unset !important;
      font: unset !important;
      
      /* 立即重新应用我们的样式 */
      font-family: var(--uui-font-family) !important;
      line-height: var(--uui-line-height-base) !important;
    }
  }
}

/* =============================================================================
   特殊情况处理和兼容性
   ============================================================================= */

@layer universal-overrides {
  /* Ant Design 特殊组件强制样式 */
  .universal-page-finder {
    /* Modal 组件强制可见 */
    .ant-modal-mask,
    .ant-modal-wrap,
    .ant-modal,
    .ant-modal-content {
      display: block !important;
      visibility: visible !important;
      opacity: 1 !important;
      pointer-events: auto !important;
    }
    
    /* 确保内容区域背景不透明 */
    .ant-modal-content {
      background: var(--uui-gradient-card) !important;
      
      /* 多层背景保护 */
      &::before {
        content: "" !important;
        position: absolute !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        background: var(--uui-bg-primary) !important;
        opacity: 0.98 !important;
        z-index: -1 !important;
        pointer-events: none !important;
      }
      
      /* 额外的背景层 */
      &::after {
        content: "" !important;
        position: absolute !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        background: var(--uui-gradient-card) !important;
        opacity: 0.95 !important;
        z-index: -2 !important;
        pointer-events: none !important;
      }
    }
    
    /* 表格和 Grid 特殊处理 */
    .ant-table,
    .grid-container {
      background: var(--uui-bg-primary) !important;
      
      /* 确保所有单元格都有背景 */
      td, th, .grid-cell {
        background: var(--uui-bg-elevated) !important;
      }
    }
    
    /* 输入框强制可见 */
    .ant-input,
    .ant-select-selector {
      background: var(--uui-bg-input) !important;
      color: var(--uui-text-primary) !important;
    }
    
    /* 按钮强制可见 */
    .ant-btn {
      opacity: 1 !important;
      visibility: visible !important;
      pointer-events: auto !important;
    }
  }
}

/* =============================================================================
   性能优化最终配置
   ============================================================================= */

@layer universal-overrides {
  .universal-page-finder {
    /* 最终性能优化 */
    contain: layout style paint !important;
    isolation: isolate !important;
    
    /* GPU 加速 */
    transform: translateZ(0) !important;
    will-change: auto !important;
    
    /* 字体渲染优化 */
    text-rendering: optimizeLegibility !important;
    -webkit-font-smoothing: antialiased !important;
    -moz-osx-font-smoothing: grayscale !important;
    
    /* 滚动优化 */
    -webkit-overflow-scrolling: touch !important;
  }
}

/* =============================================================================
   调试工具（仅开发环境）
   ============================================================================= */

@layer universal-overrides {
  /* 开发模式下的调试辅助 */
  .universal-page-finder.debug-mode {
    /* 显示样式边界 */
    .ant-modal-content {
      outline: 3px solid lime !important;
      outline-offset: -3px !important;
    }
    
    .ant-modal-body {
      outline: 2px solid orange !important;
      outline-offset: -2px !important;
    }
    
    .grid-container {
      outline: 1px solid cyan !important;
    }
    
    .grid-cell {
      outline: 1px solid rgba(255, 0, 255, 0.3) !important;
    }
    
    /* 显示 CSS 变量值 */
    &::after {
      content: 
        "Primary BG: " var(--uui-bg-primary) 
        " | Secondary BG: " var(--uui-bg-secondary)
        " | Text: " var(--uui-text-primary) !important;
      position: fixed !important;
      bottom: 10px !important;
      left: 10px !important;
      background: rgba(0, 0, 0, 0.8) !important;
      color: white !important;
      padding: 8px !important;
      border-radius: 4px !important;
      font-size: 10px !important;
      z-index: 999999 !important;
      max-width: 400px !important;
      word-break: break-all !important;
    }
  }
}

/* =============================================================================
   使用说明和文档
   ============================================================================= */

/*
使用方法：

1. 在 UniversalPageFinderModal.tsx 中导入：
   import './styles/index.css';

2. 确保 Modal 容器有正确的类名：
   <Modal className="universal-page-finder">

3. 开启调试模式（可选）：
   <Modal className="universal-page-finder debug-mode">

4. 性能监控模式（可选）：
   <Modal className="universal-page-finder perf-monitor">

文件结构：
├── index.css          (本文件 - 入口和集成)
├── foundation.css     (基础：变量、层级、重置)
├── modal.css          (Modal：遮罩、容器、布局)
├── components.css     (组件：按钮、表格、Grid)
└── themes.css         (主题：动画、状态、效果)

变量命名规范：
- 所有变量使用 --uui- 前缀
- 颜色：--uui-bg-*, --uui-text-*, --uui-accent-*
- 尺寸：--uui-space-*, --uui-radius-*, --uui-shadow-*
- 其他：--uui-transition-*, --uui-z-*, --uui-font-*

层级优先级：
1. universal-reset     (最高 - CSS 重置)
2. universal-base      (基础变量和工具)
3. universal-layout    (布局和容器)
4. universal-components(组件样式)
5. universal-themes    (主题和动画)
6. universal-overrides (最终覆盖)

*/