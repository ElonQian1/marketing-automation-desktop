/**
 * Universal UI 主题样式
 * 包含高级交互、动画、状态效果
 * 确保视觉一致性和用户体验
 */

/* =============================================================================
   主题动画系统
   ============================================================================= */

@layer universal-themes {
  /* 全局过渡效果 */
  .universal-page-finder * {
    transition: 
      background-color var(--uui-transition-normal),
      border-color var(--uui-transition-normal),
      color var(--uui-transition-normal),
      box-shadow var(--uui-transition-normal),
      transform var(--uui-transition-fast),
      opacity var(--uui-transition-fast) !important;
  }
  
  /* 动画性能优化 */
  .universal-page-finder *,
  .universal-page-finder *::before,
  .universal-page-finder *::after {
    will-change: auto !important;
    backface-visibility: hidden !important;
    perspective: 1000px !important;
  }
  
  /* 减少动画时间 - 大量元素 */
  .universal-page-finder .grid-container *,
  .universal-page-finder .ant-table * {
    transition-duration: 0.1s !important;
  }
}

/* =============================================================================
   悬停和聚焦效果
   ============================================================================= */

@layer universal-themes {
  /* 通用悬停效果 */
  .universal-page-finder [class*="hover"],
  .universal-page-finder .ant-btn:not(:disabled):hover,
  .universal-page-finder .grid-cell:hover {
    transform: translateY(-1px) !important;
    box-shadow: var(--uui-shadow-md) !important;
  }
  
  /* 聚焦环效果 */
  .universal-page-finder *:focus-visible {
    outline: 3px solid rgba(59, 130, 246, 0.4) !important;
    outline-offset: 2px !important;
    border-radius: var(--uui-radius-md) !important;
  }
  
  /* 点击波纹效果基础 */
  .universal-page-finder .ripple-effect {
    position: relative !important;
    overflow: hidden !important;
  }
  
  .universal-page-finder .ripple-effect::after {
    content: "" !important;
    position: absolute !important;
    top: 50% !important;
    left: 50% !important;
    width: 0 !important;
    height: 0 !important;
    border-radius: 50% !important;
    background: rgba(255, 255, 255, 0.3) !important;
    transform: translate(-50%, -50%) !important;
    transition: width 0.3s, height 0.3s !important;
    pointer-events: none !important;
  }
  
  .universal-page-finder .ripple-effect:active::after {
    width: 300px !important;
    height: 300px !important;
  }
}

/* =============================================================================
   状态指示器和反馈
   ============================================================================= */

@layer universal-themes {
  /* 成功状态 */
  .universal-page-finder .status-success {
    background: linear-gradient(135deg, 
      rgba(34, 197, 94, 0.1), 
      rgba(34, 197, 94, 0.05)) !important;
    border-color: var(--uui-status-success) !important;
    color: var(--uui-status-success) !important;
  }
  
  .universal-page-finder .status-success::before {
    content: "✓" !important;
    margin-right: var(--uui-space-xs) !important;
    font-weight: bold !important;
  }
  
  /* 警告状态 */
  .universal-page-finder .status-warning {
    background: linear-gradient(135deg, 
      rgba(249, 115, 22, 0.1), 
      rgba(249, 115, 22, 0.05)) !important;
    border-color: var(--uui-status-warning) !important;
    color: var(--uui-status-warning) !important;
  }
  
  .universal-page-finder .status-warning::before {
    content: "⚠" !important;
    margin-right: var(--uui-space-xs) !important;
  }
  
  /* 错误状态 */
  .universal-page-finder .status-error {
    background: linear-gradient(135deg, 
      rgba(239, 68, 68, 0.1), 
      rgba(239, 68, 68, 0.05)) !important;
    border-color: var(--uui-status-error) !important;
    color: var(--uui-status-error) !important;
  }
  
  .universal-page-finder .status-error::before {
    content: "✗" !important;
    margin-right: var(--uui-space-xs) !important;
    font-weight: bold !important;
  }
  
  /* 信息状态 */
  .universal-page-finder .status-info {
    background: linear-gradient(135deg, 
      rgba(59, 130, 246, 0.1), 
      rgba(59, 130, 246, 0.05)) !important;
    border-color: var(--uui-accent-blue) !important;
    color: var(--uui-accent-blue) !important;
  }
  
  .universal-page-finder .status-info::before {
    content: "ℹ" !important;
    margin-right: var(--uui-space-xs) !important;
  }
}

/* =============================================================================
   加载动画和骨架屏
   ============================================================================= */

@layer universal-themes {
  /* 脉冲加载效果 */
  .universal-page-finder .loading-pulse {
    background: linear-gradient(90deg, 
      var(--uui-bg-secondary) 25%, 
      var(--uui-bg-tertiary) 50%, 
      var(--uui-bg-secondary) 75%) !important;
    background-size: 200% 100% !important;
    animation: universalPulse 1.5s ease-in-out infinite !important;
    border-radius: var(--uui-radius-md) !important;
  }
  
  @keyframes universalPulse {
    0% {
      background-position: -200% 0 !important;
    }
    100% {
      background-position: 200% 0 !important;
    }
  }
  
  /* 旋转加载效果 */
  .universal-page-finder .loading-spin {
    animation: universalSpin 1s linear infinite !important;
  }
  
  @keyframes universalSpin {
    from {
      transform: rotate(0deg) !important;
    }
    to {
      transform: rotate(360deg) !important;
    }
  }
  
  /* 弹跳加载效果 */
  .universal-page-finder .loading-bounce {
    animation: universalBounce 1.4s ease-in-out infinite both !important;
  }
  
  @keyframes universalBounce {
    0%, 80%, 100% {
      transform: scale(0) !important;
    }
    40% {
      transform: scale(1) !important;
    }
  }
  
  /* 骨架屏 */
  .universal-page-finder .skeleton {
    background: var(--uui-bg-secondary) !important;
    border-radius: var(--uui-radius-md) !important;
    position: relative !important;
    overflow: hidden !important;
  }
  
  .universal-page-finder .skeleton::after {
    content: "" !important;
    position: absolute !important;
    top: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    left: 0 !important;
    background: linear-gradient(90deg, 
      transparent, 
      rgba(255, 255, 255, 0.1), 
      transparent) !important;
    animation: universalSkeletonShimmer 1.6s ease-in-out infinite !important;
  }
  
  @keyframes universalSkeletonShimmer {
    0% {
      transform: translateX(-100%) !important;
    }
    100% {
      transform: translateX(100%) !important;
    }
  }
}

/* =============================================================================
   工具提示和弹出框
   ============================================================================= */

@layer universal-themes {
  .universal-page-finder .ant-tooltip-inner {
    background: var(--uui-bg-tooltip) !important;
    color: var(--uui-text-primary) !important;
    border: 1px solid var(--uui-border-secondary) !important;
    border-radius: var(--uui-radius-md) !important;
    box-shadow: var(--uui-shadow-lg) !important;
    backdrop-filter: blur(20px) !important;
    font-size: 12px !important;
    font-weight: 500 !important;
    padding: var(--uui-space-xs) var(--uui-space-sm) !important;
  }
  
  .universal-page-finder .ant-tooltip-arrow::before {
    background: var(--uui-bg-tooltip) !important;
    border: 1px solid var(--uui-border-secondary) !important;
  }
  
  .universal-page-finder .ant-popover-inner {
    background: var(--uui-bg-elevated) !important;
    border: 2px solid var(--uui-border-secondary) !important;
    border-radius: var(--uui-radius-lg) !important;
    box-shadow: var(--uui-shadow-xl) !important;
    backdrop-filter: blur(20px) !important;
  }
  
  .universal-page-finder .ant-popover-title {
    background: var(--uui-bg-secondary) !important;
    border-bottom: 1px solid var(--uui-border-secondary) !important;
    color: var(--uui-text-primary) !important;
    font-weight: 600 !important;
    padding: var(--uui-space-md) var(--uui-space-lg) !important;
  }
  
  .universal-page-finder .ant-popover-inner-content {
    background: var(--uui-bg-primary) !important;
    color: var(--uui-text-secondary) !important;
    padding: var(--uui-space-lg) !important;
  }
}

/* =============================================================================
   响应式交互
   ============================================================================= */

@layer universal-themes {
  /* 触摸设备优化 */
  @media (hover: none) and (pointer: coarse) {
    .universal-page-finder .ant-btn,
    .universal-page-finder .grid-cell,
    .universal-page-finder [class*="hover"] {
      min-height: 44px !important;
      min-width: 44px !important;
    }
    
    .universal-page-finder .ant-btn:active,
    .universal-page-finder .grid-cell:active {
      transform: scale(0.98) !important;
      transition: transform 0.1s !important;
    }
  }
  
  /* 高对比度模式 */
  @media (prefers-contrast: high) {
    .universal-page-finder * {
      border-width: 2px !important;
      box-shadow: none !important;
    }
    
    .universal-page-finder .ant-btn-primary {
      background: var(--uui-accent-blue) !important;
      color: white !important;
    }
    
    .universal-page-finder .ant-btn-default {
      background: white !important;
      color: black !important;
      border-color: black !important;
    }
  }
  
  /* 减少运动模式 */
  @media (prefers-reduced-motion: reduce) {
    .universal-page-finder * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }
}

/* =============================================================================
   深色主题增强
   ============================================================================= */

@layer universal-themes {
  /* 深色主题特定样式 */
  .universal-page-finder.dark-theme {
    /* 增强对比度 */
    --uui-bg-primary: #0f1419 !important;
    --uui-bg-secondary: #1a1f29 !important;
    --uui-bg-tertiary: #252b38 !important;
    --uui-text-primary: #e6e8eb !important;
    --uui-text-secondary: #b8bcc8 !important;
    --uui-border-secondary: #34394a !important;
  }
  
  .universal-page-finder.dark-theme .ant-modal-content {
    background: linear-gradient(135deg, 
      #0f1419 0%, 
      #1a1f29 50%, 
      #252b38 100%) !important;
    border-color: #34394a !important;
  }
  
  .universal-page-finder.dark-theme .grid-cell {
    background: #1a1f29 !important;
    border-color: #2a2f3a !important;
  }
  
  .universal-page-finder.dark-theme .grid-cell:hover {
    background: #252b38 !important;
    border-color: #3a3f4a !important;
  }
}

/* =============================================================================
   高级视觉效果
   ============================================================================= */

@layer universal-themes {
  /* 发光效果 */
  .universal-page-finder .glow-effect {
    filter: drop-shadow(0 0 8px currentColor) !important;
  }
  
  .universal-page-finder .glow-blue {
    filter: drop-shadow(0 0 12px rgba(59, 130, 246, 0.6)) !important;
  }
  
  .universal-page-finder .glow-green {
    filter: drop-shadow(0 0 12px rgba(34, 197, 94, 0.6)) !important;
  }
  
  .universal-page-finder .glow-red {
    filter: drop-shadow(0 0 12px rgba(239, 68, 68, 0.6)) !important;
  }
  
  /* 模糊效果 */
  .universal-page-finder .blur-effect {
    backdrop-filter: blur(8px) !important;
    -webkit-backdrop-filter: blur(8px) !important;
  }
  
  .universal-page-finder .blur-strong {
    backdrop-filter: blur(20px) saturate(180%) !important;
    -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
  }
  
  /* 渐变动画 */
  .universal-page-finder .gradient-animation {
    background: linear-gradient(45deg, 
      var(--uui-accent-blue), 
      var(--uui-accent-purple), 
      var(--uui-accent-green), 
      var(--uui-accent-blue)) !important;
    background-size: 400% 400% !important;
    animation: universalGradientShift 4s ease infinite !important;
  }
  
  @keyframes universalGradientShift {
    0% {
      background-position: 0% 50% !important;
    }
    50% {
      background-position: 100% 50% !important;
    }
    100% {
      background-position: 0% 50% !important;
    }
  }
  
  /* 呼吸效果 */
  .universal-page-finder .breathing-effect {
    animation: universalBreathe 3s ease-in-out infinite !important;
  }
  
  @keyframes universalBreathe {
    0%, 100% {
      opacity: 0.8 !important;
      transform: scale(1) !important;
    }
    50% {
      opacity: 1 !important;
      transform: scale(1.02) !important;
    }
  }
}

/* =============================================================================
   性能优化和硬件加速
   ============================================================================= */

@layer universal-themes {
  /* GPU 加速优化 */
  .universal-page-finder .hardware-accelerated {
    transform: translateZ(0) !important;
    will-change: transform, opacity !important;
  }
  
  .universal-page-finder .ant-modal,
  .universal-page-finder .grid-container,
  .universal-page-finder .ant-table {
    transform: translateZ(0) !important;
    contain: layout style paint !important;
  }
  
  /* 字体渲染优化 */
  .universal-page-finder * {
    text-rendering: optimizeLegibility !important;
    -webkit-font-smoothing: antialiased !important;
    -moz-osx-font-smoothing: grayscale !important;
    font-variant-ligatures: none !important;
  }
  
  /* 滚动性能优化 */
  .universal-page-finder .scroll-optimized {
    scroll-behavior: smooth !important;
    overflow-x: hidden !important;
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
    scrollbar-width: thin !important;
  }
}

/* =============================================================================
   调试和开发辅助
   ============================================================================= */

@layer universal-overrides {
  /* 调试模式边框 */
  .universal-page-finder.debug-mode * {
    outline: 1px solid rgba(255, 0, 0, 0.3) !important;
  }
  
  .universal-page-finder.debug-mode .ant-modal-content {
    outline: 3px solid lime !important;
  }
  
  .universal-page-finder.debug-mode .ant-modal-body {
    outline: 2px solid orange !important;
  }
  
  /* 性能监控 */
  .universal-page-finder.perf-monitor * {
    transition-duration: 0s !important;
    animation-duration: 0s !important;
  }
}