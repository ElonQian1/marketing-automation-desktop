@layer theme-overrides {
  /* ==================== 模态框和浮层组件暗色主题覆盖 ==================== */
  
  /* 模态框主体 */
  .ant-modal {
    /* 模态框背景遮罩 */
    &-mask {
      background: rgba(0, 0, 0, 0.7) !important;
    }

    /* 模态框包装器 */
    &-wrap {
      backdrop-filter: blur(4px) !important;
    }

    /* 模态框内容容器 */
    &-content {
      background: var(--dark-bg-secondary) !important;
      color: var(--dark-text-primary) !important;
      border: 1px solid var(--dark-border-primary) !important;
      box-shadow: 0 12px 32px rgba(0, 0, 0, 0.6) !important;
    }

    /* 模态框头部 */
    &-header {
      background: var(--dark-bg-secondary) !important;
      color: var(--dark-text-primary) !important;
      border-bottom: 1px solid var(--dark-border-primary) !important;
      
      .ant-modal-title {
        color: var(--dark-text-primary) !important;
      }
    }

    /* 模态框主体 */
    &-body {
      background: var(--dark-bg-secondary) !important;
      color: var(--dark-text-primary) !important;
      
      /* 确认对话框内容 */
      .ant-modal-confirm-body-wrapper {
        .ant-modal-confirm-body {
          background: transparent !important;
          
          /* 图标颜色 */
          .anticon {
            color: var(--dark-text-secondary) !important;
          }
          
          /* 标题 */
          .ant-modal-confirm-title {
            color: var(--dark-text-primary) !important;
          }
          
          /* 内容文本 */
          .ant-modal-confirm-content {
            color: var(--dark-text-secondary) !important;
            
            p, div, span, li {
              color: var(--dark-text-secondary) !important;
            }
            
            strong {
              color: var(--dark-text-primary) !important;
            }
          }
        }
      }
    }

    /* 模态框底部 */
    &-footer {
      background: var(--dark-bg-secondary) !important;
      border-top: 1px solid var(--dark-border-primary) !important;
      
      .ant-btn {
        &:not(.ant-btn-primary) {
          background: var(--dark-bg-tertiary) !important;
          color: var(--dark-text-primary) !important;
          border-color: var(--dark-border-primary) !important;
          
          &:hover {
            background: var(--dark-bg-hover) !important;
            border-color: var(--dark-border-focus) !important;
          }
        }
      }
    }

    /* 确认对话框按钮区域 */
    &-confirm-btns {
      .ant-space {
        .ant-btn {
          &:not(.ant-btn-primary):not(.ant-btn-dangerous) {
            background: var(--dark-bg-tertiary) !important;
            color: var(--dark-text-primary) !important;
            border-color: var(--dark-border-primary) !important;
            
            &:hover {
              background: var(--dark-bg-hover) !important;
              border-color: var(--dark-border-focus) !important;
            }
          }
          
          &.ant-btn-dangerous {
            background: var(--dark-error-bg) !important;
            border-color: var(--dark-error-border) !important;
            color: white !important;
            
            &:hover {
              background: var(--color-error) !important;
            }
          }
        }
      }
    }

    /* 关闭按钮 */
    &-close {
      color: var(--dark-text-secondary) !important;
      
      &:hover {
        color: var(--dark-text-primary) !important;
        background: var(--dark-bg-hover) !important;
      }
    }
  }

  /* ==================== 抽屉组件 ==================== */
  
  .ant-drawer {
    /* 抽屉遮罩 */
    &-mask {
      background: rgba(0, 0, 0, 0.7) !important;
    }

    /* 抽屉内容包装器 */
    &-content-wrapper {
      .ant-drawer-content {
        background: var(--dark-bg-secondary) !important;
        color: var(--dark-text-primary) !important;
      }
    }

    /* 抽屉头部 */
    &-header {
      background: var(--dark-bg-secondary) !important;
      color: var(--dark-text-primary) !important;
      border-bottom: 1px solid var(--dark-border-primary) !important;
      
      .ant-drawer-title {
        color: var(--dark-text-primary) !important;
      }
    }

    /* 抽屉主体 */
    &-body {
      background: var(--dark-bg-secondary) !important;
      color: var(--dark-text-primary) !important;
    }

    /* 抽屉底部 */
    &-footer {
      background: var(--dark-bg-secondary) !important;
      border-top: 1px solid var(--dark-border-primary) !important;
    }

    /* 关闭按钮 */
    &-close {
      color: var(--dark-text-secondary) !important;
      
      &:hover {
        color: var(--dark-text-primary) !important;
        background: var(--dark-bg-hover) !important;
      }
    }
  }

  /* ==================== 下拉菜单和弹出层 ==================== */
  
  .ant-dropdown {
    /* 下拉菜单容器 */
    &-menu {
      background: var(--dark-bg-secondary) !important;
      border: 1px solid var(--dark-border-primary) !important;
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4) !important;
      
      .ant-dropdown-menu-item {
        color: var(--dark-text-primary) !important;
        
        &:hover {
          background: var(--dark-bg-hover) !important;
        }
        
        &.ant-dropdown-menu-item-disabled {
          color: var(--dark-text-disabled) !important;
        }
      }
      
      .ant-dropdown-menu-separator {
        background: var(--dark-border-primary) !important;
      }
    }
  }

  /* ==================== 工具提示 ==================== */
  
  .ant-tooltip {
    /* 工具提示内容 */
    &-inner {
      background: var(--dark-bg-tertiary) !important;
      color: var(--dark-text-primary) !important;
      border: 1px solid var(--dark-border-primary) !important;
    }

    /* 工具提示箭头 */
    &-arrow {
      &::before {
        background: var(--dark-bg-tertiary) !important;
        border: 1px solid var(--dark-border-primary) !important;
      }
    }
  }

  /* ==================== 通知和消息 ==================== */
  
  .ant-notification {
    .ant-notification-notice {
      background: var(--dark-bg-secondary) !important;
      border: 1px solid var(--dark-border-primary) !important;
      color: var(--dark-text-primary) !important;
      
      .ant-notification-notice-message {
        color: var(--dark-text-primary) !important;
      }
      
      .ant-notification-notice-description {
        color: var(--dark-text-secondary) !important;
      }
      
      .ant-notification-notice-close {
        color: var(--dark-text-secondary) !important;
        
        &:hover {
          color: var(--dark-text-primary) !important;
        }
      }
    }
  }

  .ant-message {
    .ant-message-notice-content {
      background: var(--dark-bg-secondary) !important;
      color: var(--dark-text-primary) !important;
      border: 1px solid var(--dark-border-primary) !important;
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4) !important;
    }
  }

  /* ==================== 弹出确认框 ==================== */
  
  .ant-popconfirm {
    .ant-popover-inner {
      background: var(--dark-bg-secondary) !important;
      color: var(--dark-text-primary) !important;
      border: 1px solid var(--dark-border-primary) !important;
      
      .ant-popover-inner-content {
        color: var(--dark-text-primary) !important;
        
        .ant-popconfirm-message {
          color: var(--dark-text-primary) !important;
          
          .ant-popconfirm-message-title {
            color: var(--dark-text-primary) !important;
          }
        }
        
        .ant-popconfirm-buttons {
          .ant-btn {
            &:not(.ant-btn-primary) {
              background: var(--dark-bg-tertiary) !important;
              color: var(--dark-text-primary) !important;
              border-color: var(--dark-border-primary) !important;
              
              &:hover {
                background: var(--dark-bg-hover) !important;
              }
            }
          }
        }
      }
    }

    .ant-popover-arrow {
      &::before {
        background: var(--dark-bg-secondary) !important;
        border: 1px solid var(--dark-border-primary) !important;
      }
    }
  }
}