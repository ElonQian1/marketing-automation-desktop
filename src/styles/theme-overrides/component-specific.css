@layer theme-overrides {
  /* ==================== 联系人导入模块特定修复 ==================== */

  /* 批量操作栏 - 针对你提到的问题元素 */
  .contact-import-page,
  .contact-import-workbench {
    /* 批量操作容器 */
    div[style*="padding: 8px 12px"][style*="background: rgb(250, 250, 250)"] {
      background: var(--dark-bg-secondary) !important;
      color: var(--dark-text-primary) !important;
      border-color: var(--dark-border-primary) !important;

      /* 内部的 ant-space 组件 */
      .ant-space {
        color: var(--dark-text-primary) !important;

        .ant-space-item {
          color: var(--dark-text-primary) !important;
        }
      }

      /* 批量操作按钮 */
      .ant-btn {
        background: var(--dark-bg-tertiary) !important;
        color: var(--dark-text-primary) !important;
        border-color: var(--dark-border-primary) !important;

        &:hover {
          background: var(--dark-bg-hover) !important;
          border-color: var(--dark-border-focus) !important;
        }

        &:disabled {
          background: var(--dark-bg-tertiary) !important;
          color: var(--dark-text-disabled) !important;
          border-color: var(--dark-border-secondary) !important;
          opacity: 0.6;
        }

        /* 主要按钮 */
        &.ant-btn-primary {
          background: var(--color-primary) !important;
          border-color: var(--color-primary) !important;
          color: white !important;

          &:disabled {
            background: var(--dark-bg-tertiary) !important;
            color: var(--dark-text-disabled) !important;
            border-color: var(--dark-border-secondary) !important;
          }
        }
      }

      /* 标签组件 */
      .ant-tag {
        background: var(--dark-bg-tertiary) !important;
        color: var(--dark-text-secondary) !important;
        border-color: var(--dark-border-primary) !important;
      }

      /* 文字组件 */
      .ant-typography {
        color: var(--dark-text-secondary) !important;

        &.ant-typography-secondary {
          color: var(--dark-text-tertiary) !important;
        }
      }
    }

    /* 网格布局工具栏修复 */
    .grid-layout-container {
      .layout-control-toolbar,
      .floating-layout-toolbar,
      .smart-layout-toolbar-control,
      .smart-layout-toolbar-trigger {
        background: var(--dark-bg-elevated) !important;
        color: var(--dark-text-primary) !important;
        border-color: var(--dark-border-primary) !important;
        backdrop-filter: blur(8px);

        .ant-btn {
          background: transparent !important;
          color: var(--dark-text-primary) !important;
          border-color: var(--dark-border-primary) !important;

          &:hover {
            background: var(--dark-bg-hover) !important;
          }
        }
      }
    }

    /* 拖拽工具栏 */
    .draggable-toolbar,
    .header-only-drag-toolbar {
      background: var(--toolbar-bg) !important;
      color: var(--toolbar-text) !important;
      border-color: var(--toolbar-border) !important;
      box-shadow: var(--toolbar-shadow) !important;

      &.dragging {
        background: var(--toolbar-bg-dragging) !important;
        box-shadow: var(--toolbar-shadow-dragging) !important;
      }

      .ant-btn {
        background: var(--toolbar-btn-bg) !important;
        color: var(--toolbar-text) !important;
        border-color: var(--toolbar-border) !important;

        &:hover {
          background: var(--toolbar-btn-hover-bg) !important;
          color: var(--toolbar-icon-hover-color) !important;
        }
      }
    }

    /* 表格和数据显示 */
    .ant-table-wrapper {
      .ant-table {
        background: var(--dark-bg-card) !important;

        .ant-table-thead > tr > th {
          background: var(--dark-bg-tertiary) !important;
          color: var(--dark-text-primary) !important;
          border-color: var(--dark-border-primary) !important;
        }

        .ant-table-tbody > tr > td {
          background: var(--dark-bg-card) !important;
          color: var(--dark-text-primary) !important;
          border-color: var(--dark-border-secondary) !important;
        }

        .ant-table-tbody > tr:hover > td {
          background: var(--dark-bg-hover) !important;
        }

        /* 选择框 */
        .ant-checkbox-wrapper {
          .ant-checkbox {
            .ant-checkbox-inner {
              background: var(--dark-bg-tertiary) !important;
              border-color: var(--dark-border-primary) !important;
            }

            &.ant-checkbox-checked .ant-checkbox-inner {
              background: var(--color-primary) !important;
              border-color: var(--color-primary) !important;
            }
          }

          .ant-checkbox + span {
            color: var(--dark-text-primary) !important;
          }
        }
      }
    }

    /* 分页器 */
    .ant-pagination {
      .ant-pagination-item {
        background: var(--dark-bg-tertiary) !important;
        border-color: var(--dark-border-primary) !important;

        a {
          color: var(--dark-text-primary) !important;
        }

        &:hover {
          background: var(--dark-bg-hover) !important;
          border-color: var(--dark-border-focus) !important;
        }

        &.ant-pagination-item-active {
          background: var(--color-primary) !important;
          border-color: var(--color-primary) !important;

          a {
            color: white !important;
          }
        }
      }

      .ant-pagination-prev,
      .ant-pagination-next {
        .ant-pagination-item-link {
          background: var(--dark-bg-tertiary) !important;
          color: var(--dark-text-primary) !important;
          border-color: var(--dark-border-primary) !important;
        }

        &:hover .ant-pagination-item-link {
          background: var(--dark-bg-hover) !important;
          border-color: var(--dark-border-focus) !important;
        }
      }
    }
  }

  /* ==================== 循环步骤卡片保持白色 ==================== */

  .loop-step-card,
  .step-card,
  [data-step-type="loop"],
  .draggable-step-card[data-loop="true"] {
    background: white !important;
    color: #333 !important;
    border-color: #d9d9d9 !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;

    /* 确保所有子元素也保持正确颜色 */
    * {
      color: #333 !important;
    }

    .ant-btn {
      background: white !important;
      color: #333 !important;
      border-color: #d9d9d9 !important;

      &:hover {
        background: #f5f5f5 !important;
        border-color: #1890ff !important;
      }

      &.ant-btn-primary {
        background: #1890ff !important;
        color: white !important;
        border-color: #1890ff !important;
      }

      &.ant-btn-danger {
        background: #ff4d4f !important;
        color: white !important;
        border-color: #ff4d4f !important;
      }
    }

    .ant-tag {
      background: #f5f5f5 !important;
      color: #333 !important;
      border-color: #d9d9d9 !important;
    }

    .ant-typography {
      color: #333 !important;

      &.ant-typography-secondary {
        color: #666 !important;
      }
    }
  }
}