/**
 * Universal UI 保护模块
 * 确保Universal UI组件保持一致的暗色主题，不受其他样式影响
 */

/* =============================================================================
   Universal UI 主题变量
   ============================================================================= */

:root {
  --universal-ui-bg: #1f2937;
  --universal-ui-bg-secondary: #374151;
  --universal-ui-text: #e5e7eb;
  --universal-ui-text-secondary: #9ca3af;
  --universal-ui-border: #4b5563;
  --universal-ui-hover: #4b5563;
  --universal-ui-primary: #3b82f6;
  --universal-ui-success: #10b981;
  --universal-ui-warning: #f59e0b;
  --universal-ui-error: #ef4444;
}

/* =============================================================================
   Universal UI 容器保护
   ============================================================================= */

/* 主要容器选择器 */
.universal-page-finder,
.universal-ui-container,
.xml-inspector-modal,
.grid-element-view,
.visual-element-view,
.tree-element-view,
.list-element-view,
[data-component="universal-ui"] {
  /* 强制重置为暗色主题 */
  background-color: var(--universal-ui-bg) !important;
  color: var(--universal-ui-text) !important;
  
  /* 确保容器样式不受外部影响 */
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
  line-height: 1.6 !important;
}

/* =============================================================================
   Universal UI 模态框保护
   ============================================================================= */

/* 模态框主体 */
.universal-page-finder .ant-modal-content,
.xml-inspector-modal .ant-modal-content,
.universal-ui-container .ant-modal-content {
  background: var(--universal-ui-bg) !important;
  border-radius: 12px !important;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
}

/* 模态框头部 */
.universal-page-finder .ant-modal-header,
.xml-inspector-modal .ant-modal-header {
  background: #111827 !important;
  border-bottom: 1px solid var(--universal-ui-border) !important;
  border-radius: 12px 12px 0 0 !important;
}

/* 模态框标题 */
.universal-page-finder .ant-modal-title,
.xml-inspector-modal .ant-modal-title {
  color: #f9fafb !important;
  font-size: 16px !important;
  font-weight: 600 !important;
}

/* 模态框关闭按钮 */
.universal-page-finder .ant-modal-close,
.xml-inspector-modal .ant-modal-close {
  color: var(--universal-ui-text-secondary) !important;
}

.universal-page-finder .ant-modal-close:hover,
.xml-inspector-modal .ant-modal-close:hover {
  color: var(--universal-ui-text) !important;
}

/* =============================================================================
   Universal UI 表格组件保护
   ============================================================================= */

/* 表格主体 */
.universal-page-finder .ant-table,
.xml-inspector-modal .ant-table,
.grid-element-view .ant-table {
  background-color: var(--universal-ui-bg) !important;
  color: var(--universal-ui-text) !important;
}

/* 表格头部 */
.universal-page-finder .ant-table-thead > tr > th,
.xml-inspector-modal .ant-table-thead > tr > th {
  background-color: var(--universal-ui-bg-secondary) !important;
  color: var(--universal-ui-text) !important;
  border-bottom: 1px solid var(--universal-ui-border) !important;
  font-weight: 600 !important;
}

/* 表格行 */
.universal-page-finder .ant-table-tbody > tr > td,
.xml-inspector-modal .ant-table-tbody > tr > td {
  background-color: var(--universal-ui-bg) !important;
  color: var(--universal-ui-text) !important;
  border-bottom: 1px solid var(--universal-ui-border) !important;
}

/* 表格悬停 */
.universal-page-finder .ant-table-tbody > tr:hover > td,
.xml-inspector-modal .ant-table-tbody > tr:hover > td {
  background-color: var(--universal-ui-hover) !important;
}

/* =============================================================================
   Universal UI 树形组件保护
   ============================================================================= */

/* 树形组件 */
.universal-page-finder .ant-tree,
.xml-inspector-modal .ant-tree {
  background-color: var(--universal-ui-bg) !important;
  color: var(--universal-ui-text) !important;
}

/* 树节点 */
.universal-page-finder .ant-tree-node-content-wrapper,
.xml-inspector-modal .ant-tree-node-content-wrapper {
  color: var(--universal-ui-text) !important;
  border-radius: 4px !important;
}

.universal-page-finder .ant-tree-node-content-wrapper:hover,
.xml-inspector-modal .ant-tree-node-content-wrapper:hover {
  background-color: var(--universal-ui-hover) !important;
}

/* 选中的树节点 */
.universal-page-finder .ant-tree-node-selected .ant-tree-node-content-wrapper,
.xml-inspector-modal .ant-tree-node-selected .ant-tree-node-content-wrapper {
  background-color: var(--universal-ui-primary) !important;
  color: white !important;
}

/* =============================================================================
   Universal UI 表单组件保护
   ============================================================================= */

/* 输入框 */
.universal-page-finder .ant-input,
.xml-inspector-modal .ant-input {
  background-color: var(--universal-ui-bg-secondary) !important;
  border-color: var(--universal-ui-border) !important;
  color: var(--universal-ui-text) !important;
}

.universal-page-finder .ant-input:focus,
.universal-page-finder .ant-input-focused,
.xml-inspector-modal .ant-input:focus {
  background-color: var(--universal-ui-bg-secondary) !important;
  border-color: var(--universal-ui-primary) !important;
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2) !important;
}

.universal-page-finder .ant-input::placeholder,
.xml-inspector-modal .ant-input::placeholder {
  color: var(--universal-ui-text-secondary) !important;
}

/* 选择框 */
.universal-page-finder .ant-select,
.xml-inspector-modal .ant-select {
  color: var(--universal-ui-text) !important;
}

.universal-page-finder .ant-select-selector,
.xml-inspector-modal .ant-select-selector {
  background-color: var(--universal-ui-bg-secondary) !important;
  border-color: var(--universal-ui-border) !important;
  color: var(--universal-ui-text) !important;
}

.universal-page-finder .ant-select-selection-item,
.xml-inspector-modal .ant-select-selection-item {
  color: var(--universal-ui-text) !important;
}

/* =============================================================================
   Universal UI 按钮组件保护
   ============================================================================= */

/* 默认按钮 */
.universal-page-finder .ant-btn-default,
.xml-inspector-modal .ant-btn-default {
  background: var(--universal-ui-bg-secondary) !important;
  border-color: var(--universal-ui-border) !important;
  color: var(--universal-ui-text) !important;
}

.universal-page-finder .ant-btn-default:hover,
.xml-inspector-modal .ant-btn-default:hover {
  background: var(--universal-ui-hover) !important;
  border-color: var(--universal-ui-border) !important;
  color: var(--universal-ui-text) !important;
}

/* 主要按钮 */
.universal-page-finder .ant-btn-primary,
.xml-inspector-modal .ant-btn-primary {
  background: linear-gradient(135deg, var(--universal-ui-primary), #2563eb) !important;
  border: none !important;
  color: white !important;
}

.universal-page-finder .ant-btn-primary:hover,
.xml-inspector-modal .ant-btn-primary:hover {
  background: linear-gradient(135deg, #2563eb, #1d4ed8) !important;
  transform: translateY(-1px) !important;
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3) !important;
}

/* =============================================================================
   Universal UI 卡片组件保护
   ============================================================================= */

/* 卡片 */
.universal-page-finder .ant-card,
.xml-inspector-modal .ant-card {
  background: var(--universal-ui-bg-secondary) !important;
  border-color: var(--universal-ui-border) !important;
  border-radius: 8px !important;
}

.universal-page-finder .ant-card-head,
.xml-inspector-modal .ant-card-head {
  background: var(--universal-ui-bg-secondary) !important;
  border-bottom-color: var(--universal-ui-border) !important;
  color: var(--universal-ui-text) !important;
}

.universal-page-finder .ant-card-body,
.xml-inspector-modal .ant-card-body {
  background: var(--universal-ui-bg-secondary) !important;
  color: var(--universal-ui-text) !important;
}

/* =============================================================================
   Universal UI 标签和标签页保护
   ============================================================================= */

/* 标签 */
.universal-page-finder .ant-tag,
.xml-inspector-modal .ant-tag {
  background: var(--universal-ui-hover) !important;
  border-color: var(--universal-ui-border) !important;
  color: var(--universal-ui-text) !important;
  border-radius: 4px !important;
}

/* 标签页 */
.universal-page-finder .ant-tabs,
.xml-inspector-modal .ant-tabs {
  color: var(--universal-ui-text) !important;
}

.universal-page-finder .ant-tabs-tab,
.xml-inspector-modal .ant-tabs-tab {
  color: var(--universal-ui-text-secondary) !important;
}

.universal-page-finder .ant-tabs-tab:hover,
.xml-inspector-modal .ant-tabs-tab:hover {
  color: var(--universal-ui-text) !important;
}

.universal-page-finder .ant-tabs-tab-active,
.xml-inspector-modal .ant-tabs-tab-active {
  color: var(--universal-ui-primary) !important;
}

/* =============================================================================
   Universal UI 防止循环卡片样式污染
   ============================================================================= */

/* 在Universal UI内的循环卡片应保持暗色 */
.universal-page-finder .loop-card,
.xml-inspector-modal .loop-card,
.universal-page-finder .step-card[data-loop="true"],
.xml-inspector-modal .step-card[data-loop="true"] {
  background-color: var(--universal-ui-bg-secondary) !important;
  color: var(--universal-ui-text) !important;
  border-color: var(--universal-ui-border) !important;
}

.universal-page-finder .loop-card *,
.xml-inspector-modal .loop-card *,
.universal-page-finder .step-card[data-loop="true"] *,
.xml-inspector-modal .step-card[data-loop="true"] * {
  color: var(--universal-ui-text) !important;
}

/* =============================================================================
   Universal UI 滚动条样式
   ============================================================================= */

.universal-page-finder ::-webkit-scrollbar,
.xml-inspector-modal ::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

.universal-page-finder ::-webkit-scrollbar-track,
.xml-inspector-modal ::-webkit-scrollbar-track {
  background: var(--universal-ui-bg);
}

.universal-page-finder ::-webkit-scrollbar-thumb,
.xml-inspector-modal ::-webkit-scrollbar-thumb {
  background: var(--universal-ui-border);
  border-radius: 3px;
}

.universal-page-finder ::-webkit-scrollbar-thumb:hover,
.xml-inspector-modal ::-webkit-scrollbar-thumb:hover {
  background: var(--universal-ui-hover);
}