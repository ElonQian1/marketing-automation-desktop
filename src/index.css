/* 文件路径：src/index.css */

/**
 * 应用主样式入口文件
 * 
 * 样式层级顺序：
 * 1. 设计令牌（已在 main.tsx 引入）
 * 2. Tailwind CSS 基础层
 * 3. 全局重置和基础样式
 * 4. 应用级别样式
 */

/* Tailwind CSS v4 导入 */
@import "tailwindcss/preflight";
@import "tailwindcss/utilities";

/* 全局重置和基础样式 */
@layer base {
  /* 应用 Design Tokens 到根元素 */
  html {
    /* 设置默认主题为深色 */
    background-color: var(--bg-base);
    color: var(--text-1);
    font-family: var(--font-family);
    font-size: var(--font);
    line-height: var(--leading-normal);
  }

  body {
    margin: 0;
    padding: 0;
    background-color: var(--bg-base);
    color: var(--text-1);
    overflow-x: hidden;
    
    /* 现代化字体渲染 */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  /* 确保根容器填满视口 */
  #root {
    min-height: 100vh;
    background-color: var(--bg-base);
  }

  /* 全局焦点环样式 - A11y 增强 */
  *:focus-visible {
    outline: 2px solid var(--brand);
    outline-offset: 2px;
    border-radius: var(--radius-sm);
  }

  /* 去除默认的 focus outline，由上面的 focus-visible 替代 */
  *:focus {
    outline: none;
  }
}

/* 应用级别组件样式 */
@layer components {
  /* Tauri 窗口拖拽区域 - 保持桌面应用特性 */
  .titlebar {
    -webkit-app-region: drag;
    user-select: none;
  }

  .titlebar * {
    -webkit-app-region: no-drag;
  }

  /* 主应用容器 */
  .app-container {
    min-height: 100vh;
    background-color: var(--bg-base);
    color: var(--text-1);
    display: flex;
    flex-direction: column;
  }

  /* 页面内容区域 */
  .page-content {
    flex: 1;
    padding: var(--space-6);
    background-color: var(--bg-base);
  }

  /* 侧边栏 */
  .sidebar {
    background-color: var(--bg-elevated);
    border-right: 1px solid var(--border-primary);
  }

  /* 头部导航 */
  .header {
    background-color: var(--bg-elevated);
    border-bottom: 1px solid var(--border-primary);
  }
}

/* 实用工具类 */
@layer utilities {
  /* 品牌色渐变背景 */
  .gradient-brand {
    background: linear-gradient(135deg, var(--brand-400) 0%, var(--brand-600) 100%);
  }

  /* 卡片容器通用样式 */
  .card-elevated {
    background-color: var(--bg-elevated);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
  }

  /* 文本省略 */
  .text-ellipsis {
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
  }

  .text-ellipsis-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* 现代化滚动条 */
  .scrollbar-modern {
    scrollbar-width: thin;
    scrollbar-color: var(--neutral-600) var(--neutral-800);
  }

  .scrollbar-modern::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .scrollbar-modern::-webkit-scrollbar-track {
    background: var(--neutral-800);
    border-radius: var(--radius-sm);
  }

  .scrollbar-modern::-webkit-scrollbar-thumb {
    background: var(--neutral-600);
    border-radius: var(--radius-sm);
    transition: background-color var(--duration-fast) var(--ease-out);
  }

  .scrollbar-modern::-webkit-scrollbar-thumb:hover {
    background: var(--neutral-500);
  }

  /* 隐藏滚动条但保持功能 */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* 现代化的加载状态 */
  .loading-shimmer {
    background: linear-gradient(
      90deg,
      var(--neutral-800) 0%,
      var(--neutral-700) 50%,
      var(--neutral-800) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 2s ease-in-out infinite;
  }

  @keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }

  /* 品牌化的状态色彩 */
  .status-success {
    color: var(--success);
    background-color: var(--success-bg);
  }

  .status-warning {
    color: var(--warning);
    background-color: var(--warning-bg);
  }

  .status-error {
    color: var(--error);
    background-color: var(--error-bg);
  }

  .status-info {
    color: var(--info);
    background-color: var(--info-bg);
  }
}

/* 动画系统 */
@layer utilities {
  /* 统一的过渡动画 */
  .transition-brand {
    transition-property: all;
    transition-duration: var(--duration-normal);
    transition-timing-function: var(--ease-brand);
  }

  .transition-fast {
    transition-property: all;
    transition-duration: var(--duration-fast);
    transition-timing-function: var(--ease-out);
  }

  .transition-slow {
    transition-property: all;
    transition-duration: var(--duration-slow);
    transition-timing-function: var(--ease-out);
  }

  /* 悬停效果 */
  .hover-lift {
    transition: transform var(--duration-fast) var(--ease-out);
  }

  .hover-lift:hover {
    transform: translateY(-2px);
  }

  /* 缩放效果 */
  .hover-scale {
    transition: transform var(--duration-fast) var(--ease-out);
  }

  .hover-scale:hover {
    transform: scale(1.02);
  }
}