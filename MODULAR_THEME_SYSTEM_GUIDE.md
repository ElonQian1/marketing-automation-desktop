# ğŸ¨ æ¨¡å—åŒ–ä¸»é¢˜ç³»ç»Ÿä½¿ç”¨æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æ–°çš„æ¨¡å—åŒ–ä¸»é¢˜ç³»ç»Ÿè§£å†³äº†Universal UIæ™ºèƒ½é¡µé¢æŸ¥æ‰¾å™¨çš„ç™½åº•ç™½å­—é—®é¢˜ï¼Œå¹¶å»ºç«‹äº†ç²¾ç¡®åˆ†ç¦»çš„CSSæ¶æ„ã€‚

## ğŸ¯ è§£å†³çš„é—®é¢˜

### åŸé—®é¢˜
- âœ… Universal UIæ™ºèƒ½é¡µé¢æŸ¥æ‰¾å™¨ç™½åº•ç™½å­—
- âœ… å¾ªç¯å¡ç‰‡æ ·å¼è¢«ä¸»ç¨‹åºæ ·å¼å½±å“
- âœ… ä¸åŒåŠŸèƒ½åŒºåŸŸæ ·å¼äº’ç›¸æ±¡æŸ“
- âœ… æ ·å¼è§„åˆ™ä¼˜å…ˆçº§æ··ä¹±

### è§£å†³æ–¹æ¡ˆ
é€šè¿‡æ¨¡å—åŒ–CSSæ¶æ„ï¼Œå®ç°äº†**ç²¾ç¡®åˆ†ç¦»**ï¼š
- ğŸ¯ **å¾ªç¯å¡ç‰‡**: ç™½åº•é»‘å­—ï¼ˆç”¨æˆ·å”¯ä¸€éœ€è¦çš„ç™½è‰²åŒºåŸŸï¼‰
- ğŸ¯ **ä¸»ç¨‹åº**: ç»Ÿä¸€æš—ç°è‰²ç³»
- ğŸ¯ **Universal UI**: ä¿æŠ¤åŸæœ‰æš—è‰²ä¸»é¢˜
- ğŸ¯ **XMLæ£€æŸ¥å™¨**: ç™½åº•é»‘å­—ï¼ˆæé«˜å¯è¯»æ€§ï¼‰

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æ¨¡å—ç»“æ„
```
src/styles/theme-overrides/modules/
â”œâ”€â”€ precise-style-separator.css    # CSSå±‚çº§ç®¡ç† (170è¡Œ)
â”œâ”€â”€ main-app-theme.css            # ä¸»ç¨‹åºæš—è‰²ç³» (280è¡Œ)
â”œâ”€â”€ loop-cards-theme.css          # å¾ªç¯å¡ç‰‡ç™½è‰²ç³» (180è¡Œ)
â””â”€â”€ universal-ui-protection.css   # Universal UIä¿æŠ¤ (320è¡Œ)
```

**âœ… æ‰€æœ‰æ¨¡å—æ–‡ä»¶éƒ½æ§åˆ¶åœ¨500è¡Œä»¥å†…**

### CSSå±‚çº§ç³»ç»Ÿ
```css
@layer theme-base, loop-cards, main-app, universal-ui, overrides;
```

1. **theme-base**: åŸºç¡€å˜é‡å®šä¹‰
2. **loop-cards**: å¾ªç¯å¡ç‰‡ä¸“ç”¨æ ·å¼ï¼ˆç™½åº•é»‘å­—ï¼‰
3. **main-app**: ä¸»ç¨‹åºé»˜è®¤æ ·å¼ï¼ˆæš—ç°è‰²ç³»ï¼‰
4. **universal-ui**: Universal UIä¿æŠ¤æ ·å¼
5. **overrides**: é˜²å†²çªè¦†ç›–è§„åˆ™

## ğŸ¨ æ ·å¼åˆ†ç¦»ç­–ç•¥

### 1. å¾ªç¯å¡ç‰‡ï¼ˆç™½åº•é»‘å­—ï¼‰
**é€‰æ‹©å™¨**:
```css
.loop-card,
.step-card[data-loop="true"],
.draggable-step-card[data-is-loop="true"],
.smart-step-card[data-loop="true"]
```

**å˜é‡**:
```css
--loop-card-bg: #ffffff;
--loop-card-text: #333333;
--loop-card-border: #e1e4e8;
```

### 2. ä¸»ç¨‹åºï¼ˆæš—ç°è‰²ç³»ï¼‰
**é€‰æ‹©å™¨**:
```css
.main-app-theme,
[data-theme="main-app"],
/* æ’é™¤Universal UIå’Œå¾ªç¯å¡ç‰‡çš„æ‰€æœ‰ä¸»ç¨‹åºå…ƒç´  */
```

**å˜é‡**:
```css
--main-app-bg: #1f2937;
--main-app-text: #e5e7eb;
--main-app-border: #374151;
```

### 3. Universal UIï¼ˆä¿æŠ¤æš—è‰²ä¸»é¢˜ï¼‰
**é€‰æ‹©å™¨**:
```css
.universal-page-finder,
.xml-inspector-modal,
.grid-element-view,
.visual-element-view
```

**å˜é‡**:
```css
--universal-ui-bg: #1f2937;
--universal-ui-text: #e5e7eb;
--universal-ui-border: #4b5563;
```

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### å¼€å‘ç¯å¢ƒè°ƒè¯•
```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­
modularThemeManager.getStats()          // æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€
modularThemeManager.enableDebug()       // å¯ç”¨è°ƒè¯•æ¨¡å¼ï¼ˆå¾ªç¯å¡ç‰‡æ˜¾ç¤ºè¾¹æ¡†ï¼‰
modularThemeManager.disableDebug()      // ç¦ç”¨è°ƒè¯•æ¨¡å¼
```

### æ·»åŠ æ–°çš„å¾ªç¯å¡ç‰‡
```jsx
// æ–¹æ³•1: ä½¿ç”¨dataå±æ€§
<div data-loop="true" className="step-card">
  å¾ªç¯æ­¥éª¤å†…å®¹
</div>

// æ–¹æ³•2: ä½¿ç”¨CSSç±»
<div className="loop-card">
  å¾ªç¯æ­¥éª¤å†…å®¹
</div>

// æ–¹æ³•3: ä½¿ç”¨data-step-type
<div data-step-type="loop" className="draggable-step-card">
  å¾ªç¯æ­¥éª¤å†…å®¹
</div>
```

### æ·»åŠ æ–°çš„Universal UIç»„ä»¶
```jsx
// ç¡®ä¿ç»„ä»¶åœ¨æ­£ç¡®çš„å®¹å™¨å†…
<div className="universal-page-finder">
  <Modal>
    {/* Universal UIç»„ä»¶ä¼šè‡ªåŠ¨ä¿æŒæš—è‰²ä¸»é¢˜ */}
  </Modal>
</div>
```

### æ·»åŠ æ–°çš„ä¸»ç¨‹åºç»„ä»¶
```jsx
// ä¸»ç¨‹åºç»„ä»¶ä¼šè‡ªåŠ¨åº”ç”¨æš—ç°è‰²ç³»
<div className="main-app-theme">
  <Table />
  <Card />
  {/* æ‰€æœ‰Ant Designç»„ä»¶è‡ªåŠ¨æš—è‰²ä¸»é¢˜ */}
</div>
```

## âš¡ æ€§èƒ½ç‰¹ç‚¹

- **é›¶JavaScriptå¼€é”€**: çº¯CSSå®ç°ï¼Œæ— è¿è¡Œæ—¶ç›‘æ§
- **CSSå±‚çº§ä¼˜åŒ–**: ä½¿ç”¨CSS @layerç¡®ä¿æ­£ç¡®ä¼˜å…ˆçº§
- **CSSå˜é‡é«˜æ•ˆ**: æµè§ˆå™¨åŸç”Ÿä¼˜åŒ–ï¼Œæ€§èƒ½æœ€ä½³
- **é€‰æ‹©å™¨ç²¾ç¡®**: æœ€å°åŒ–CSSè§„åˆ™åŒ¹é…å¼€é”€

## ğŸ›¡ï¸ é˜²å†²çªæœºåˆ¶

### 1. CSSå±‚çº§éš”ç¦»
ä½¿ç”¨ `@layer` ç¡®ä¿æ ·å¼ä¼˜å…ˆçº§æ­£ç¡®ï¼Œé¿å…æ„å¤–è¦†ç›–ã€‚

### 2. ç²¾ç¡®é€‰æ‹©å™¨
```css
/* âœ… æ­£ç¡®ï¼šæ’é™¤ç‰¹å®šå®¹å™¨ */
.main-app-theme .ant-table:not(.universal-page-finder .ant-table):not(.loop-card .ant-table)

/* âŒ é”™è¯¯ï¼šå…¨å±€è¦†ç›– */
.ant-table { color: white !important; }
```

### 3. è¾¹ç•Œä¿æŠ¤
```css
/* é˜²æ­¢å¾ªç¯å¡ç‰‡æ ·å¼æ³„éœ²åˆ°Universal UI */
.universal-page-finder .loop-card {
  background-color: var(--universal-ui-bg) !important;
}
```

## ğŸ” è°ƒè¯•æŠ€å·§

### 1. å¯ç”¨è°ƒè¯•æ¨¡å¼
```javascript
modularThemeManager.enableDebug()
```
å¾ªç¯å¡ç‰‡ä¼šæ˜¾ç¤ºçº¢è‰²è™šçº¿è¾¹æ¡†ï¼Œä¾¿äºè¯†åˆ«ã€‚

### 2. æ£€æŸ¥CSSå±‚çº§
åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­æŸ¥çœ‹å…ƒç´ çš„è®¡ç®—æ ·å¼ï¼Œç¡®è®¤CSSå±‚çº§ç”Ÿæ•ˆã€‚

### 3. éªŒè¯å˜é‡å€¼
```javascript
getComputedStyle(document.documentElement).getPropertyValue('--loop-card-bg')
```

## ğŸ“ æœ€ä½³å®è·µ

### âœ… æ¨èåšæ³•
1. æ–°å¾ªç¯å¡ç‰‡ä½¿ç”¨ `data-loop="true"` å±æ€§
2. Universal UIç»„ä»¶æ”¾åœ¨ `.universal-page-finder` å®¹å™¨å†…
3. ä¸»ç¨‹åºç»„ä»¶è‡ªåŠ¨ç»§æ‰¿ `.main-app-theme` æ ·å¼
4. ä½¿ç”¨CSSå˜é‡è€Œéç¡¬ç¼–ç é¢œè‰²å€¼

### âŒ é¿å…åšæ³•
1. ä¸è¦åœ¨CSSä¸­ä½¿ç”¨ `!important` å¼ºåˆ¶è¦†ç›–
2. ä¸è¦åˆ›å»ºä¸ç°æœ‰é€‰æ‹©å™¨å†²çªçš„å…¨å±€æ ·å¼
3. ä¸è¦åœ¨JavaScriptä¸­ç›´æ¥ä¿®æ”¹æ ·å¼
4. ä¸è¦æ··åˆä½¿ç”¨ä¸åŒçš„ä¸»é¢˜æ ‡è®°

## ğŸ”„ è¿ç§»æŒ‡å—

### ä»æ—§ç³»ç»Ÿè¿ç§»
1. **ç§»é™¤æ—§ä¿æŠ¤æœºåˆ¶**: æ—§çš„JavaScriptç›‘æ§å·²ç¦ç”¨
2. **æ›´æ–°ç»„ä»¶æ ‡è®°**: ç¡®ä¿å¾ªç¯å¡ç‰‡ä½¿ç”¨æ­£ç¡®çš„dataå±æ€§
3. **éªŒè¯æ ·å¼**: æ£€æŸ¥æ‰€æœ‰ç»„ä»¶åœ¨æ–°æ¶æ„ä¸‹çš„æ˜¾ç¤ºæ•ˆæœ

### æ›´æ–°ç°æœ‰ç»„ä»¶
```jsx
// æ—§æ–¹å¼
<div className="old-loop-card-class">

// æ–°æ–¹å¼
<div className="loop-card" data-loop="true">
```

## ğŸš€ æ‰©å±•æŒ‡å—

### æ·»åŠ æ–°ä¸»é¢˜æ¨¡å—
1. åœ¨ `modules/` ç›®å½•åˆ›å»ºæ–°CSSæ–‡ä»¶
2. æ§åˆ¶æ–‡ä»¶å¤§å°åœ¨500è¡Œä»¥å†…
3. ä½¿ç”¨CSSå±‚çº§å’Œå˜é‡
4. åœ¨ `index.ts` ä¸­å¯¼å…¥

### ä¿®æ”¹ä¸»é¢˜å˜é‡
```css
/* åœ¨å¯¹åº”æ¨¡å—æ–‡ä»¶ä¸­ä¿®æ”¹ */
:root {
  --loop-card-bg: #ffffff;  /* å¾ªç¯å¡ç‰‡èƒŒæ™¯ */
  --main-app-bg: #1f2937;   /* ä¸»ç¨‹åºèƒŒæ™¯ */
}
```

## ğŸ“Š ç³»ç»ŸçŠ¶æ€

é€šè¿‡ `modularThemeManager.getStats()` å¯ä»¥æŸ¥çœ‹ï¼š
- åˆå§‹åŒ–çŠ¶æ€
- æ¶æ„æ–¹å¼
- æ€§èƒ½ç‰¹å¾
- æ¨¡å—ä¿¡æ¯

ç³»ç»Ÿç°åœ¨æä¾›äº†**ç²¾ç¡®åˆ†ç¦»ã€é›¶æ€§èƒ½å¼€é”€ã€æ˜“äºç»´æŠ¤**çš„ä¸»é¢˜æ¶æ„ï¼