# å¾ªç¯å¡ç‰‡è¾“å…¥æ¡†æ–‡å­—é¢œè‰²ä¿®å¤æŠ¥å‘Š

## ğŸ› é—®é¢˜æè¿°

**ç°è±¡**ï¼šå¾ªç¯å¡ç‰‡ä¸­çš„ InputNumberï¼ˆæ•°å­—è¾“å…¥æ¡†ï¼‰å‡ºç°"é»‘åº•æ·±å­—"é—®é¢˜ï¼Œæ–‡å­—ä¸å¯è§ã€‚

**æ ¹æœ¬åŸå› **ï¼šCSS æ ·å¼å†²çªå¯¼è‡´
1. å…¨å±€æ·±è‰²ä¸»é¢˜è®¾ç½®äº†æš—è‰²èƒŒæ™¯
2. `.light-theme-force` é€šé…ç¬¦é€‰æ‹©å™¨å¼ºåˆ¶æ‰€æœ‰å­å…ƒç´ ä½¿ç”¨æ·±è‰²æ–‡å­—
3. InputNumber å†…éƒ¨çš„ `.ant-input-number-input` æ²¡æœ‰ç‹¬ç«‹çš„é¢œè‰²è¦†ç›–

```css
/* âŒ é”™è¯¯çš„é€šé…ç¬¦é€‰æ‹©å™¨ */
.loop-card.light-theme-force * {
  color: #111827 !important;  /* æ·±è‰²æ–‡å­— */
}

/* ç»“æœï¼šæ·±è‰²èƒŒæ™¯ + æ·±è‰²æ–‡å­— = çœ‹ä¸è§ */
```

---

## âœ… ä¿®å¤æ–¹æ¡ˆ

### åŸåˆ™ï¼š**ç‹¬ç«‹åŸºå‡†çº¿ + æ˜¾å¼è¦†ç›–**

æ¯ä¸ªè¡¨é¢ï¼ˆSurfaceï¼‰éƒ½åº”è¯¥æœ‰ç‹¬ç«‹çš„é¢œè‰²åŸºå‡†çº¿ï¼Œè€Œä¸æ˜¯ä¾èµ–é€šé…ç¬¦ç»§æ‰¿ã€‚

### 1ï¸âƒ£ ä¿®å¤ `tokens.css`ï¼ˆå…¨å±€æ ·å¼ï¼‰

**æ–‡ä»¶**ï¼š`src/styles/tokens.css`

**ä¿®æ”¹**ï¼šåœ¨ `.light-theme-force` ä¸­æ·»åŠ  InputNumber æ”¯æŒ

```css
/* Input ç»„ä»¶é¢œè‰²è¦†ç›– */
.light-theme-force .ant-input,
.light-theme-force .ant-select-selector,
.light-theme-force .ant-input-number,           /* ğŸ¯ æ–°å¢ */
.light-theme-force .ant-input-number-input {    /* ğŸ¯ æ–°å¢ */
  color: var(--text-inverse, #1e293b) !important;
  background: var(--bg-light-base, #ffffff) !important;
}
```

**æ•ˆæœ**ï¼šæ‰€æœ‰ä½¿ç”¨ `.light-theme-force` çš„æµ…è‰²å®¹å™¨ä¸­çš„è¾“å…¥æ¡†éƒ½ä¼šæ­£ç¡®æ˜¾ç¤ºæ·±è‰²æ–‡å­—ã€‚

---

### 2ï¸âƒ£ ä¿®å¤ `loop.css`ï¼ˆå¾ªç¯å¡ç‰‡å…¨å±€æ ·å¼ï¼‰

**æ–‡ä»¶**ï¼š`src/styles/surfaces/loop.css`

**ä¿®æ”¹**ï¼šæ·»åŠ  InputNumber è¾“å…¥æ¡†çš„å¼ºåˆ¶æ ·å¼

```css
/* ===== è¡¨å•æ§ä»¶æ ·å¼é‡å†™ ===== */

.loop-step-card .ant-input-number {
  background: var(--bg-light-base, #ffffff) !important;
  border-color: var(--loop-card-border) !important;
}

/* ğŸ¯ å…³é”®ä¿®å¤ï¼šInputNumber å†…éƒ¨è¾“å…¥æ¡†æ–‡å­—é¢œè‰² */
.loop-step-card .ant-input-number-input {
  color: var(--loop-card-text-primary) !important;
  background: var(--bg-light-base, #ffffff) !important;
}
```

**æ•ˆæœ**ï¼šæ‰€æœ‰ `.loop-step-card` ä¸­çš„ InputNumber éƒ½ä¼šæ˜¾ç¤ºæ­£ç¡®çš„æ–‡å­—é¢œè‰²ã€‚

---

### 3ï¸âƒ£ ä¿®å¤ `LoopStartCard/styles.css`ï¼ˆå¾ªç¯å¼€å§‹/ç»“æŸå¡ç‰‡ï¼‰

**æ–‡ä»¶**ï¼š`src/components/LoopStartCard/styles.css`

**ä¿®æ”¹å‰**ï¼ˆé”™è¯¯ï¼‰ï¼š
```css
/* âŒ é€šé…ç¬¦é€‰æ‹©å™¨å¯¼è‡´æ‰€æœ‰å­å…ƒç´ è¢«å¼ºåˆ¶è®¾ç½®é¢œè‰² */
.loop-card.light-theme-force,
.loop-card.light-theme-force * {
  color: #111827 !important;
}
```

**ä¿®æ”¹å**ï¼ˆæ­£ç¡®ï¼‰ï¼š
```css
/* âœ… æ˜¾å¼æŒ‡å®šéœ€è¦æ·±è‰²æ–‡å­—çš„å…ƒç´  */
.loop-card.light-theme-force {
  color: #111827 !important;
}

/* æ™®é€šæ–‡æœ¬å…ƒç´ ä½¿ç”¨æ·±è‰²æ–‡å­— */
.loop-card.light-theme-force span,
.loop-card.light-theme-force p,
.loop-card.light-theme-force div,
.loop-card.light-theme-force .ant-typography {
  color: #111827 !important;
}

.loop-card.light-theme-force .ant-typography-secondary {
  color: #6b7280 !important;
}

/* ğŸ¯ å…³é”®ä¿®å¤ï¼šè¡¨å•è¾“å…¥æ¡†ä½¿ç”¨æ·±è‰²æ–‡å­— + ç™½è‰²èƒŒæ™¯ */
.loop-card.light-theme-force .ant-input,
.loop-card.light-theme-force .ant-input-number,
.loop-card.light-theme-force .ant-input-number-input,
.loop-card.light-theme-force .ant-select-selector {
  color: #111827 !important;
  background: #ffffff !important;
}
```

**å…³é”®å˜åŒ–**ï¼š
1. âŒ åˆ é™¤é€šé…ç¬¦é€‰æ‹©å™¨ `*`
2. âœ… æ˜¾å¼åˆ—å‡ºéœ€è¦æ·±è‰²æ–‡å­—çš„å…ƒç´ ï¼ˆspan, p, div, .ant-typographyï¼‰
3. âœ… ä¸ºè¡¨å•æ§ä»¶å•ç‹¬è®¾ç½®ï¼šæ·±è‰²æ–‡å­— + ç™½è‰²èƒŒæ™¯

---

## ğŸ¯ è®¾è®¡åŸåˆ™æ€»ç»“

### 1. **é¿å…é€šé…ç¬¦é€‰æ‹©å™¨ï¼ˆ`*`ï¼‰**

**é”™è¯¯ç¤ºèŒƒ**ï¼š
```css
.container * {
  color: black !important;
}
```

**é—®é¢˜**ï¼šä¼šå½±å“æ‰€æœ‰å­å…ƒç´ ï¼ŒåŒ…æ‹¬ä¸åº”è¯¥è¢«ä¿®æ”¹çš„ç»„ä»¶ï¼ˆå¦‚è¾“å…¥æ¡†ã€æŒ‰é’®ç­‰ï¼‰ã€‚

**æ­£ç¡®åšæ³•**ï¼š
```css
.container span,
.container p,
.container div {
  color: black !important;
}
```

---

### 2. **ç‹¬ç«‹åŸºå‡†çº¿åŸåˆ™**

æ¯ä¸ªè¡¨é¢ï¼ˆSurfaceï¼‰åº”è¯¥æœ‰ç‹¬ç«‹çš„é¢œè‰²åŸºå‡†ï¼š

```css
/* æµ…è‰²è¡¨é¢ */
.light-surface {
  background: white;
  color: black;
}

/* æµ…è‰²è¡¨é¢ä¸­çš„è¾“å…¥æ¡† */
.light-surface input {
  background: white;
  color: black;
}

/* æ·±è‰²è¡¨é¢ */
.dark-surface {
  background: black;
  color: white;
}

/* æ·±è‰²è¡¨é¢ä¸­çš„è¾“å…¥æ¡† */
.dark-surface input {
  background: #333;
  color: white;
}
```

---

### 3. **Ant Design è¾“å…¥ç»„ä»¶çš„åµŒå¥—ç»“æ„**

```html
<span class="ant-input-number">          <!-- å¤–å±‚å®¹å™¨ -->
  <input class="ant-input-number-input"> <!-- å®é™…è¾“å…¥æ¡† âš ï¸ éœ€è¦å•ç‹¬è®¾ç½® -->
</span>
```

**å…³é”®ç‚¹**ï¼š
- `.ant-input-number`ï¼šå¤–å±‚å®¹å™¨æ ·å¼
- `.ant-input-number-input`ï¼š**å®é™…çš„è¾“å…¥æ¡†**ï¼Œå¿…é¡»å•ç‹¬è®¾ç½®é¢œè‰²ï¼

**å®Œæ•´è¦†ç›–**ï¼š
```css
.container .ant-input-number {
  border-color: #ddd;
}

.container .ant-input-number-input {  /* ğŸ¯ å…³é”® */
  color: black !important;
  background: white !important;
}
```

---

## ğŸ“‹ ä¿®æ”¹æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ | å½±å“èŒƒå›´ |
|------|---------|---------|
| `src/styles/tokens.css` | åœ¨ `.light-theme-force` ä¸­æ·»åŠ  `.ant-input-number-input` æ”¯æŒ | å…¨å±€æ‰€æœ‰ä½¿ç”¨ `.light-theme-force` çš„æµ…è‰²å®¹å™¨ |
| `src/styles/surfaces/loop.css` | ä¸º `.loop-step-card` æ·»åŠ  `.ant-input-number-input` æ ·å¼ | æ‰€æœ‰å¾ªç¯å¡ç‰‡ï¼ˆé€šç”¨ç±»ï¼‰ |
| `src/components/LoopStartCard/styles.css` | åˆ é™¤é€šé…ç¬¦ `*`ï¼Œæ˜¾å¼æŒ‡å®šæ–‡å­—é¢œè‰² | LoopStartCard å’Œ LoopEndCard |

---

## âœ… éªŒè¯æ¸…å•

### 1ï¸âƒ£ å¾ªç¯å¼€å§‹å¡ç‰‡ï¼ˆLoopStartCardï¼‰
- [ ] InputNumber è¾“å…¥æ¡†èƒŒæ™¯æ˜¯ç™½è‰²
- [ ] InputNumber è¾“å…¥æ¡†æ–‡å­—æ˜¯æ·±è‰²ï¼ˆ#111827ï¼‰
- [ ] è¾“å…¥æ•°å­—æ—¶æ–‡å­—æ¸…æ™°å¯è§
- [ ] æ‚¬åœ/èšç„¦æ—¶è¾¹æ¡†é¢œè‰²æ­£å¸¸ï¼ˆç»¿è‰²ï¼‰

### 2ï¸âƒ£ å¾ªç¯ç»“æŸå¡ç‰‡ï¼ˆLoopEndCardï¼‰
- [ ] InputNumber è¾“å…¥æ¡†èƒŒæ™¯æ˜¯ç™½è‰²
- [ ] InputNumber è¾“å…¥æ¡†æ–‡å­—æ˜¯æ·±è‰²ï¼ˆ#111827ï¼‰
- [ ] é…ç½®æ¨¡æ€æ¡†ä¸­çš„è¾“å…¥æ¡†æ­£å¸¸æ˜¾ç¤º

### 3ï¸âƒ£ å…¶ä»–æµ…è‰²å®¹å™¨
- [ ] æ‰€æœ‰ä½¿ç”¨ `.light-theme-force` çš„ç»„ä»¶ä¸­çš„è¾“å…¥æ¡†éƒ½æ­£å¸¸
- [ ] å‚æ•°é¢æ¿ä¸­çš„è¾“å…¥æ¡†æ­£å¸¸
- [ ] è®¾ç½®çª—å£ä¸­çš„è¾“å…¥æ¡†æ­£å¸¸

---

## ğŸ” ç±»ä¼¼é—®é¢˜æ’æŸ¥æŒ‡å—

### å¦‚ä½•å‘ç°"ç™½åº•ç™½å­—"æˆ–"é»‘åº•æ·±å­—"é—®é¢˜ï¼Ÿ

1. **æ£€æŸ¥é€šé…ç¬¦é€‰æ‹©å™¨**ï¼š
   ```bash
   # æœç´¢å¯èƒ½å¯¼è‡´é—®é¢˜çš„é€šé…ç¬¦
   grep -r "\..*\s\*\s*{" src/styles/
   ```

2. **æ£€æŸ¥ Ant Design è¾“å…¥ç»„ä»¶**ï¼š
   - ç¡®ä¿ `.ant-input-number-input` æœ‰ç‹¬ç«‹çš„é¢œè‰²è®¾ç½®
   - ç¡®ä¿ `.ant-select-selector` æœ‰ç‹¬ç«‹çš„é¢œè‰²è®¾ç½®
   - ç¡®ä¿ `.ant-input` æœ‰ç‹¬ç«‹çš„é¢œè‰²è®¾ç½®

3. **æ£€æŸ¥é¢œè‰²å¯¹æ¯”åº¦**ï¼š
   ```typescript
   // ä½¿ç”¨æµè§ˆå™¨å¼€å‘å·¥å…·æ£€æŸ¥è®¡ç®—åçš„é¢œè‰²
   background-color: rgb(xxx, xxx, xxx)
   color: rgb(xxx, xxx, xxx)
   
   // å¯¹æ¯”åº¦è‡³å°‘åº”è¯¥ >= 4.5:1 (WCAG AA æ ‡å‡†)
   ```

### ä¿®å¤æ¨¡æ¿ï¼š

```css
/* æ­¥éª¤1ï¼šæ£€æŸ¥çˆ¶å®¹å™¨ */
.parent-container {
  background: var(--bg-light-base, #ffffff);
  color: var(--text-inverse, #1e293b);
}

/* æ­¥éª¤2ï¼šé¿å…é€šé…ç¬¦ */
/* âŒ ä¸è¦è¿™æ ·å†™ */
.parent-container * {
  color: inherit;
}

/* âœ… åº”è¯¥è¿™æ ·å†™ */
.parent-container span,
.parent-container p,
.parent-container div {
  color: var(--text-inverse, #1e293b);
}

/* æ­¥éª¤3ï¼šæ˜¾å¼è¦†ç›–è¾“å…¥ç»„ä»¶ */
.parent-container .ant-input,
.parent-container .ant-input-number-input,
.parent-container .ant-select-selector {
  color: var(--text-inverse, #1e293b) !important;
  background: var(--bg-light-base, #ffffff) !important;
}
```

---

## ğŸ¨ è®¾è®¡ç³»ç»Ÿå»ºè®®

### å®šä¹‰é¢œè‰²è¡¨é¢ï¼ˆColor Surfacesï¼‰

å»ºè®®åœ¨è®¾è®¡ç³»ç»Ÿä¸­å®šä¹‰æ ‡å‡†çš„é¢œè‰²è¡¨é¢ï¼š

```css
/* æµ…è‰²è¡¨é¢ï¼ˆç”¨äºå¡ç‰‡ã€æ¨¡æ€æ¡†ç­‰ï¼‰ */
.surface-light {
  background: var(--bg-light-base, #ffffff);
  color: var(--text-inverse, #1e293b);
}

.surface-light input,
.surface-light .ant-input-number-input {
  color: var(--text-inverse, #1e293b) !important;
  background: var(--bg-light-base, #ffffff) !important;
}

/* æ·±è‰²è¡¨é¢ï¼ˆç”¨äºä¾§è¾¹æ ã€é¡¶æ ç­‰ï¼‰ */
.surface-dark {
  background: var(--bg-base, #0f172a);
  color: var(--text-1, #f8fafc);
}

.surface-dark input,
.surface-dark .ant-input-number-input {
  color: var(--text-1, #f8fafc) !important;
  background: var(--bg-elevated, #1e293b) !important;
}

/* å¼ºè°ƒè¡¨é¢ï¼ˆç”¨äºé€šçŸ¥ã€è­¦å‘Šç­‰ï¼‰ */
.surface-accent {
  background: var(--brand-100, #e0eaff);
  color: var(--brand-900, #334085);
}

.surface-accent input,
.surface-accent .ant-input-number-input {
  color: var(--brand-900, #334085) !important;
  background: var(--bg-light-base, #ffffff) !important;
}
```

---

## ğŸ“ å®æ–½æ€»ç»“

### ä¿®æ”¹ç»Ÿè®¡
- **ä¿®æ”¹æ–‡ä»¶æ•°**ï¼š3 ä¸ª
- **æ–°å¢ä»£ç è¡Œ**ï¼šçº¦ 20 è¡Œ
- **åˆ é™¤ä»£ç è¡Œ**ï¼šçº¦ 5 è¡Œ
- **ä¿®å¤æ—¶é—´**ï¼šçº¦ 10 åˆ†é’Ÿ

### æŠ€æœ¯å€ºåŠ¡
- **æ— æ–°å¢æŠ€æœ¯å€ºåŠ¡**
- **æ¶ˆé™¤é—ç•™é—®é¢˜**ï¼šé€šé…ç¬¦é€‰æ‹©å™¨çš„æ»¥ç”¨

### æµ‹è¯•è¦†ç›–
- [x] TypeScript ç±»å‹æ£€æŸ¥é€šè¿‡
- [ ] UI åŠŸèƒ½æµ‹è¯•ï¼ˆå¾…ç”¨æˆ·éªŒè¯ï¼‰
- [ ] å¯¹æ¯”åº¦æµ‹è¯•ï¼ˆå¾…ç”¨æˆ·éªŒè¯ï¼‰

---

## ğŸš€ åç»­ä¼˜åŒ–å»ºè®®

### 1. åˆ›å»ºé¢œè‰²è¡¨é¢ç»„ä»¶åº“
```typescript
// src/components/surfaces/LightSurface.tsx
export const LightSurface: React.FC<PropsWithChildren> = ({ children }) => {
  return (
    <div className="surface-light">
      {children}
    </div>
  );
};
```

### 2. è‡ªåŠ¨åŒ–å¯¹æ¯”åº¦æ£€æµ‹
```typescript
// åœ¨å¼€å‘ç¯å¢ƒä¸­è‡ªåŠ¨æ£€æµ‹é¢œè‰²å¯¹æ¯”åº¦
if (process.env.NODE_ENV === 'development') {
  checkContrastRatio(backgroundColor, textColor);
}
```

### 3. è®¾è®¡ Token æ ‡å‡†åŒ–
```typescript
// ç»Ÿä¸€æ‰€æœ‰è¡¨é¢çš„é¢œè‰²å®šä¹‰
export const surfaceTokens = {
  light: {
    background: '#ffffff',
    text: '#1e293b',
    input: { background: '#ffffff', text: '#1e293b' },
  },
  dark: {
    background: '#0f172a',
    text: '#f8fafc',
    input: { background: '#1e293b', text: '#f8fafc' },
  },
};
```

---

**ä¿®å¤å®Œæˆï¼è¯·åˆ·æ–°é¡µé¢éªŒè¯å¾ªç¯å¡ç‰‡ä¸­çš„ InputNumber æ˜¯å¦æ˜¾ç¤ºæ­£å¸¸ã€‚** ğŸ‰
