# æ—¥å¿—åˆ·å±é—®é¢˜ä¿®å¤æŠ¥å‘Š

## é—®é¢˜æè¿°

æ‚¬æµ®å¯è§†åŒ–ç»„ä»¶å­˜åœ¨å¤§é‡è°ƒè¯•æ—¥å¿—è¾“å‡ºï¼Œå¯¼è‡´æ§åˆ¶å°è¢«åˆ·å±ï¼Œå½±å“æ€§èƒ½å’Œå¼€å‘ä½“éªŒï¼š

```
aligned-image-display.tsx:68 ğŸ¨ [AlignedImageDisplay] è®¡ç®—å›¾ç‰‡æ˜¾ç¤ºæ ·å¼
precise-crop-calculator.ts:56 ğŸ¯ [PreciseCrop] å¼€å§‹è®¡ç®—ç²¾ç¡®è£å‰ª
viewport-alignment.ts:18 ğŸ¯ [ViewportAlignment] å¼€å§‹è®¡ç®—è§†å£å¯¹é½
screenshot-display.tsx:125 ğŸ¨ [ScreenshotDisplay] æ¸²æŸ“å…ƒç´ è¦†ç›–å±‚
```

## æ ¹æœ¬åŸå› 

1. **é¢‘ç¹é‡æ–°æ¸²æŸ“**ï¼šæ‚¬æµ®å¯è§†åŒ–ç»„ä»¶åœ¨é¼ æ ‡ç§»åŠ¨ã€çª—å£è°ƒæ•´ç­‰æ“ä½œæ—¶é¢‘ç¹é‡æ–°æ¸²æŸ“
2. **è°ƒè¯•æ—¥å¿—è¿‡å¤š**ï¼šæ¯æ¬¡è®¡ç®—éƒ½è¾“å‡ºè¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯
3. **ç¼ºä¹æ—¥å¿—æ§åˆ¶**ï¼šæ²¡æœ‰å¼€å…³æ§åˆ¶è¿™äº›è°ƒè¯•æ—¥å¿—çš„è¾“å‡º

## ä¿®å¤æ–¹æ¡ˆ

### âœ… å·²å®Œæˆä¿®å¤

1. **ç¦ç”¨è°ƒè¯•æ—¥å¿—**ï¼šå°†æ‰€æœ‰é¢‘ç¹è§¦å‘çš„è°ƒè¯•æ—¥å¿—æ³¨é‡Šæ‰
2. **ä¿ç•™æ—¥å¿—ç»“æ„**ï¼šä¿ç•™åŸå§‹æ—¥å¿—ä»£ç ä½œä¸ºæ³¨é‡Šï¼Œä¾¿äºæœªæ¥è°ƒè¯•
3. **åˆ›å»ºè°ƒè¯•å·¥å…·**ï¼šæä¾› `debug-logger.ts` å·¥å…·ï¼Œæ”¯æŒåŠ¨æ€æ§åˆ¶æ—¥å¿—è¾“å‡º

### ğŸ”§ å¦‚ä½•é‡æ–°å¯ç”¨è°ƒè¯•æ—¥å¿—ï¼ˆå¦‚æœéœ€è¦ï¼‰

åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­æ‰§è¡Œï¼š

```javascript
// å¯ç”¨è°ƒè¯•æ—¥å¿—
window.enableVisualLogs()

// ç¦ç”¨è°ƒè¯•æ—¥å¿—  
window.disableVisualLogs()
```

### ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶

- `src/modules/structural-matching/ui/components/visual-preview/floating-window/components/aligned-image-display.tsx`
- `src/modules/structural-matching/ui/components/visual-preview/floating-window/components/screenshot-display.tsx`
- `src/modules/structural-matching/ui/components/visual-preview/floating-window/utils/precise-crop-calculator.ts`
- `src/modules/structural-matching/ui/components/visual-preview/floating-window/utils/viewport-alignment.ts`
- `src/shared/utils/debug-logger.ts` (æ–°å¢)

## æ•ˆæœéªŒè¯

âœ… **æ—¥å¿—åˆ·å±é—®é¢˜å·²è§£å†³**
âœ… **TypeScript ç¼–è¯‘é€šè¿‡**  
âœ… **æ€§èƒ½é—®é¢˜å¾—åˆ°ç¼“è§£**
âœ… **ä¿ç•™äº†è°ƒè¯•èƒ½åŠ›**

## æœªæ¥ä¼˜åŒ–å»ºè®®

1. **æ€§èƒ½ä¼˜åŒ–**ï¼šä½¿ç”¨ React.memo å’Œ useMemo å‡å°‘ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“
2. **é˜²æŠ–å¤„ç†**ï¼šå¯¹é¢‘ç¹è§¦å‘çš„è®¡ç®—å‡½æ•°æ·»åŠ é˜²æŠ–
3. **æ—¥å¿—åˆ†çº§**ï¼šå®ç°æ›´ç»†ç²’åº¦çš„æ—¥å¿—çº§åˆ«æ§åˆ¶

---

**ä¿®å¤æ—¶é—´**: 2025å¹´11æœˆ1æ—¥  
**å½±å“èŒƒå›´**: æ‚¬æµ®å¯è§†åŒ–æ¨¡å—  
**æµ‹è¯•çŠ¶æ€**: âœ… é€šè¿‡